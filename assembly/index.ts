
let viewLength: i32
let channelLength: i32
let width: i32
let height: i32
const viewOffsets = new StaticArray<u32>(4)
const countOffsets = new StaticArray<u32>(4)
const displayCountOffsets = new StaticArray<u32>(4)

declare function consoleLog(arg0: i32): void;
declare function consoleFloat(arg0: f32): void;

const pyramidRoof = new Float32Array(256)

const lineUp = new Float32Array(256)
const lineDown = new Float32Array(256)

const lineUpFromPoint1= new Float32Array(256)
const lineDownToPoint1 = new Float32Array(256)

const lineUpFromPoint2 = new Float32Array(256)
const lineDownToPoint2 = new Float32Array(256)

const lineDownToPoint75 = new Float32Array(256)
const lineDownToPoint5 = new Float32Array(256)

const curveExpUp = new Float32Array(256)
const curveExpDown = new Float32Array(256)

const curveCircleBigUp = new Float32Array(256)
const curveCircleBigDown = new Float32Array(256)

const curveRootMidUp = new Float32Array(256)
const curveRootMidDown = new Float32Array(256)

const curveGrayUp = new Float32Array(256)
const curveGrayDown = new Float32Array(256)

const curveSinFull = new Float32Array(256)
const curveSinFull32 = new Float32Array(256)
const curveSinFull224 = new Float32Array(256)

export function initData (_width: i32, _height: i32, _totalViews: u32): void {
  width = _width
  height = _height
  channelLength = width * height
  viewLength = channelLength * 4

  let arrayOffset = 0
  for (let i: u32 = 0; i < _totalViews; i++) {
    viewOffsets[i] = arrayOffset
    arrayOffset += viewLength
  }
  for (let i: u32 = 0; i < _totalViews; i++) {
    countOffsets[i] = arrayOffset
    arrayOffset += (256 * 4 * 3)
  }
  for (let i: u32 = 0; i < _totalViews; i++) {
    displayCountOffsets[i] = arrayOffset
    arrayOffset += (256 * 3)
  }
  const valsPyramidRoof = [0.5019607843137255, 0.5058823529411764, 0.5098039215686274, 0.5137254901960784, 0.5176470588235295, 0.5215686274509804, 0.5254901960784314, 0.5294117647058824, 0.5333333333333333, 0.5372549019607843, 0.5411764705882353, 0.5450980392156862, 0.5490196078431373, 0.5529411764705883, 0.5568627450980392, 0.5607843137254902, 0.5647058823529412, 0.5686274509803921, 0.5725490196078431, 0.5764705882352941, 0.5803921568627451, 0.5843137254901961, 0.5882352941176471, 0.592156862745098, 0.596078431372549, 0.6, 0.6039215686274509, 0.6078431372549019, 0.611764705882353, 0.615686274509804, 0.6196078431372549, 0.6235294117647059, 0.6274509803921569, 0.6313725490196078, 0.6352941176470588, 0.6392156862745098, 0.6431372549019608, 0.6470588235294118, 0.6509803921568628, 0.6549019607843137, 0.6588235294117647, 0.6627450980392157, 0.6666666666666666, 0.6705882352941176, 0.6745098039215687, 0.6784313725490196, 0.6823529411764706, 0.6862745098039216, 0.6901960784313725, 0.6941176470588235, 0.6980392156862745, 0.7019607843137254, 0.7058823529411765, 0.7098039215686275, 0.7137254901960784, 0.7176470588235294, 0.7215686274509804, 0.7254901960784313, 0.7294117647058823, 0.7333333333333333, 0.7372549019607844, 0.7411764705882353, 0.7450980392156863, 0.7490196078431373, 0.7529411764705882, 0.7568627450980392, 0.7607843137254902, 0.7647058823529411, 0.7686274509803922, 0.7725490196078432, 0.7764705882352941, 0.7803921568627451, 0.7843137254901961, 0.788235294117647, 0.792156862745098, 0.796078431372549, 0.8, 0.803921568627451, 0.807843137254902, 0.8117647058823529, 0.8156862745098039, 0.8196078431372549, 0.8235294117647058, 0.8274509803921568, 0.8313725490196079, 0.8352941176470589, 0.8392156862745098, 0.8431372549019608, 0.8470588235294118, 0.8509803921568627, 0.8549019607843137, 0.8588235294117647, 0.8627450980392157, 0.8666666666666667, 0.8705882352941177, 0.8745098039215686, 0.8784313725490196, 0.8823529411764706, 0.8862745098039215, 0.8901960784313725, 0.8941176470588236, 0.8980392156862745, 0.9019607843137255, 0.9058823529411765, 0.9098039215686274, 0.9137254901960784, 0.9176470588235294, 0.9215686274509803, 0.9254901960784314, 0.9294117647058824, 0.9333333333333333, 0.9372549019607843, 0.9411764705882353, 0.9450980392156862, 0.9490196078431372, 0.9529411764705882, 0.9568627450980393, 0.9607843137254902, 0.9647058823529412, 0.9686274509803922, 0.9725490196078431, 0.9764705882352941, 0.9803921568627451, 0.984313725490196, 0.9882352941176471, 0.9921568627450981, 0.996078431372549, 1, 1, 0.996078431372549, 0.9921568627450981, 0.9882352941176471, 0.984313725490196, 0.9803921568627451, 0.9764705882352941, 0.9725490196078431, 0.9686274509803922, 0.9647058823529412, 0.9607843137254902, 0.9568627450980393, 0.9529411764705882, 0.9490196078431372, 0.9450980392156862, 0.9411764705882353, 0.9372549019607843, 0.9333333333333333, 0.9294117647058824, 0.9254901960784314, 0.9215686274509803, 0.9176470588235294, 0.9137254901960784, 0.9098039215686274, 0.9058823529411765, 0.9019607843137255, 0.8980392156862745, 0.8941176470588236, 0.8901960784313725, 0.8862745098039215, 0.8823529411764706, 0.8784313725490196, 0.8745098039215686, 0.8705882352941177, 0.8666666666666667, 0.8627450980392157, 0.8588235294117647, 0.8549019607843137, 0.8509803921568627, 0.8470588235294118, 0.8431372549019608, 0.8392156862745098, 0.8352941176470589, 0.8313725490196079, 0.8274509803921568, 0.8235294117647058, 0.8196078431372549, 0.8156862745098039, 0.8117647058823529, 0.807843137254902, 0.803921568627451, 0.8, 0.796078431372549, 0.792156862745098, 0.788235294117647, 0.7843137254901961, 0.7803921568627451, 0.7764705882352941, 0.7725490196078432, 0.7686274509803922, 0.7647058823529411, 0.7607843137254902, 0.7568627450980392, 0.7529411764705882, 0.7490196078431373, 0.7450980392156863, 0.7411764705882353, 0.7372549019607844, 0.7333333333333333, 0.7294117647058823, 0.7254901960784313, 0.7215686274509804, 0.7176470588235294, 0.7137254901960784, 0.7098039215686275, 0.7058823529411765, 0.7019607843137254, 0.6980392156862745, 0.6941176470588235, 0.6901960784313725, 0.6862745098039216, 0.6823529411764706, 0.6784313725490196, 0.6745098039215687, 0.6705882352941176, 0.6666666666666666, 0.6627450980392157, 0.6588235294117647, 0.6549019607843137, 0.6509803921568628, 0.6470588235294118, 0.6431372549019608, 0.6392156862745098, 0.6352941176470588, 0.6313725490196078, 0.6274509803921569, 0.6235294117647059, 0.6196078431372549, 0.615686274509804, 0.611764705882353, 0.6078431372549019, 0.6039215686274509, 0.6, 0.596078431372549, 0.592156862745098, 0.5882352941176471, 0.5843137254901961, 0.5803921568627451, 0.5764705882352941, 0.5725490196078431, 0.5686274509803921, 0.5647058823529412, 0.5607843137254902, 0.5568627450980392, 0.5529411764705883, 0.5490196078431373, 0.5450980392156862, 0.5411764705882353, 0.5372549019607843, 0.5333333333333333, 0.5294117647058824, 0.5254901960784314, 0.5215686274509804, 0.5176470588235295, 0.5137254901960784, 0.5098039215686274, 0.5058823529411764, 0.5019607843137255]
  
  const valsLineUp = [0, 0.00392156862745098, 0.00784313725490196, 0.011764705882352941, 0.01568627450980392, 0.0196078431372549, 0.023529411764705882, 0.027450980392156862, 0.03137254901960784, 0.03529411764705882, 0.0392156862745098, 0.043137254901960784, 0.047058823529411764, 0.050980392156862744, 0.054901960784313725, 0.058823529411764705, 0.06274509803921569, 0.06666666666666667, 0.07058823529411765, 0.07450980392156863, 0.0784313725490196, 0.08235294117647059, 0.08627450980392157, 0.09019607843137255, 0.09411764705882353, 0.09803921568627451, 0.10196078431372549, 0.10588235294117647, 0.10980392156862745, 0.11372549019607843, 0.11764705882352941, 0.12156862745098039, 0.12549019607843137, 0.12941176470588234, 0.13333333333333333, 0.13725490196078433, 0.1411764705882353, 0.14509803921568626, 0.14901960784313725, 0.15294117647058825, 0.1568627450980392, 0.16078431372549018, 0.16470588235294117, 0.16862745098039217, 0.17254901960784313, 0.1764705882352941, 0.1803921568627451, 0.1843137254901961, 0.18823529411764706, 0.19215686274509802, 0.19607843137254902, 0.2, 0.20392156862745098, 0.20784313725490194, 0.21176470588235294, 0.21568627450980393, 0.2196078431372549, 0.22352941176470587, 0.22745098039215686, 0.23137254901960785, 0.23529411764705882, 0.2392156862745098, 0.24313725490196078, 0.24705882352941178, 0.25098039215686274, 0.2549019607843137, 0.2588235294117647, 0.2627450980392157, 0.26666666666666666, 0.27058823529411763, 0.27450980392156865, 0.2784313725490196, 0.2823529411764706, 0.28627450980392155, 0.2901960784313725, 0.29411764705882354, 0.2980392156862745, 0.30196078431372547, 0.3058823529411765, 0.30980392156862746, 0.3137254901960784, 0.3176470588235294, 0.32156862745098036, 0.3254901960784314, 0.32941176470588235, 0.3333333333333333, 0.33725490196078434, 0.3411764705882353, 0.34509803921568627, 0.34901960784313724, 0.3529411764705882, 0.3568627450980392, 0.3607843137254902, 0.36470588235294116, 0.3686274509803922, 0.37254901960784315, 0.3764705882352941, 0.3803921568627451, 0.38431372549019605, 0.38823529411764707, 0.39215686274509803, 0.396078431372549, 0.4, 0.403921568627451, 0.40784313725490196, 0.4117647058823529, 0.4156862745098039, 0.4196078431372549, 0.4235294117647059, 0.42745098039215684, 0.43137254901960786, 0.43529411764705883, 0.4392156862745098, 0.44313725490196076, 0.44705882352941173, 0.45098039215686275, 0.4549019607843137, 0.4588235294117647, 0.4627450980392157, 0.4666666666666667, 0.47058823529411764, 0.4745098039215686, 0.4784313725490196, 0.4823529411764706, 0.48627450980392156, 0.49019607843137253, 0.49411764705882355, 0.4980392156862745, 0.5019607843137255, 0.5058823529411764, 0.5098039215686274, 0.5137254901960784, 0.5176470588235293, 0.5215686274509804, 0.5254901960784314, 0.5294117647058824, 0.5333333333333333, 0.5372549019607843, 0.5411764705882353, 0.5450980392156862, 0.5490196078431373, 0.5529411764705883, 0.5568627450980392, 0.5607843137254902, 0.5647058823529412, 0.5686274509803921, 0.5725490196078431, 0.5764705882352941, 0.580392156862745, 0.5843137254901961, 0.5882352941176471, 0.592156862745098, 0.596078431372549, 0.6, 0.6039215686274509, 0.6078431372549019, 0.611764705882353, 0.615686274509804, 0.6196078431372549, 0.6235294117647059, 0.6274509803921569, 0.6313725490196078, 0.6352941176470588, 0.6392156862745098, 0.6431372549019607, 0.6470588235294118, 0.6509803921568628, 0.6549019607843137, 0.6588235294117647, 0.6627450980392157, 0.6666666666666666, 0.6705882352941176, 0.6745098039215687, 0.6784313725490196, 0.6823529411764706, 0.6862745098039216, 0.6901960784313725, 0.6941176470588235, 0.6980392156862745, 0.7019607843137254, 0.7058823529411764, 0.7098039215686275, 0.7137254901960784, 0.7176470588235294, 0.7215686274509804, 0.7254901960784313, 0.7294117647058823, 0.7333333333333333, 0.7372549019607844, 0.7411764705882353, 0.7450980392156863, 0.7490196078431373, 0.7529411764705882, 0.7568627450980392, 0.7607843137254902, 0.7647058823529411, 0.7686274509803921, 0.7725490196078432, 0.7764705882352941, 0.7803921568627451, 0.7843137254901961, 0.788235294117647, 0.792156862745098, 0.796078431372549, 0.8, 0.803921568627451, 0.807843137254902, 0.8117647058823529, 0.8156862745098039, 0.8196078431372549, 0.8235294117647058, 0.8274509803921568, 0.8313725490196078, 0.8352941176470589, 0.8392156862745098, 0.8431372549019608, 0.8470588235294118, 0.8509803921568627, 0.8549019607843137, 0.8588235294117647, 0.8627450980392157, 0.8666666666666667, 0.8705882352941177, 0.8745098039215686, 0.8784313725490196, 0.8823529411764706, 0.8862745098039215, 0.8901960784313725, 0.8941176470588235, 0.8980392156862745, 0.9019607843137255, 0.9058823529411765, 0.9098039215686274, 0.9137254901960784, 0.9176470588235294, 0.9215686274509803, 0.9254901960784314, 0.9294117647058824, 0.9333333333333333, 0.9372549019607843, 0.9411764705882353, 0.9450980392156862, 0.9490196078431372, 0.9529411764705882, 0.9568627450980391, 0.9607843137254902, 0.9647058823529412, 0.9686274509803922, 0.9725490196078431, 0.9764705882352941, 0.9803921568627451, 0.984313725490196, 0.9882352941176471, 0.9921568627450981, 0.996078431372549, 1]
  const valsLineDown = [1, 0.996078431372549, 0.9921568627450981, 0.9882352941176471, 0.9843137254901961, 0.9803921568627451, 0.9764705882352941, 0.9725490196078431, 0.9686274509803922, 0.9647058823529412, 0.9607843137254902, 0.9568627450980393, 0.9529411764705882, 0.9490196078431372, 0.9450980392156862, 0.9411764705882353, 0.9372549019607843, 0.9333333333333333, 0.9294117647058824, 0.9254901960784314, 0.9215686274509804, 0.9176470588235294, 0.9137254901960784, 0.9098039215686274, 0.9058823529411765, 0.9019607843137255, 0.8980392156862745, 0.8941176470588236, 0.8901960784313725, 0.8862745098039215, 0.8823529411764706, 0.8784313725490196, 0.8745098039215686, 0.8705882352941177, 0.8666666666666667, 0.8627450980392157, 0.8588235294117648, 0.8549019607843138, 0.8509803921568627, 0.8470588235294118, 0.8431372549019608, 0.8392156862745098, 0.8352941176470589, 0.8313725490196078, 0.8274509803921568, 0.8235294117647058, 0.8196078431372549, 0.8156862745098039, 0.8117647058823529, 0.807843137254902, 0.803921568627451, 0.8, 0.7960784313725491, 0.7921568627450981, 0.788235294117647, 0.7843137254901961, 0.7803921568627451, 0.7764705882352941, 0.7725490196078432, 0.7686274509803921, 0.7647058823529411, 0.7607843137254902, 0.7568627450980392, 0.7529411764705882, 0.7490196078431373, 0.7450980392156863, 0.7411764705882353, 0.7372549019607844, 0.7333333333333334, 0.7294117647058824, 0.7254901960784313, 0.7215686274509804, 0.7176470588235294, 0.7137254901960784, 0.7098039215686275, 0.7058823529411764, 0.7019607843137254, 0.6980392156862745, 0.6941176470588235, 0.6901960784313725, 0.6862745098039216, 0.6823529411764706, 0.6784313725490196, 0.6745098039215687, 0.6705882352941177, 0.6666666666666667, 0.6627450980392157, 0.6588235294117647, 0.6549019607843137, 0.6509803921568628, 0.6470588235294118, 0.6431372549019607, 0.6392156862745098, 0.6352941176470588, 0.6313725490196078, 0.6274509803921569, 0.6235294117647059, 0.6196078431372549, 0.615686274509804, 0.611764705882353, 0.607843137254902, 0.603921568627451, 0.6, 0.596078431372549, 0.592156862745098, 0.5882352941176471, 0.5843137254901961, 0.580392156862745, 0.5764705882352941, 0.5725490196078431, 0.5686274509803921, 0.5647058823529412, 0.5607843137254902, 0.5568627450980392, 0.5529411764705883, 0.5490196078431373, 0.5450980392156863, 0.5411764705882354, 0.5372549019607843, 0.5333333333333333, 0.5294117647058824, 0.5254901960784314, 0.5215686274509804, 0.5176470588235293, 0.5137254901960784, 0.5098039215686274, 0.5058823529411764, 0.5019607843137255, 0.4980392156862745, 0.49411764705882355, 0.4901960784313726, 0.4862745098039216, 0.48235294117647065, 0.4784313725490196, 0.4745098039215686, 0.47058823529411764, 0.4666666666666667, 0.4627450980392157, 0.45882352941176474, 0.4549019607843138, 0.4509803921568627, 0.44705882352941173, 0.44313725490196076, 0.4392156862745098, 0.43529411764705883, 0.43137254901960786, 0.4274509803921569, 0.42352941176470593, 0.41960784313725497, 0.4156862745098039, 0.4117647058823529, 0.40784313725490196, 0.403921568627451, 0.4, 0.39607843137254906, 0.3921568627450981, 0.388235294117647, 0.38431372549019605, 0.3803921568627451, 0.3764705882352941, 0.37254901960784315, 0.3686274509803922, 0.3647058823529412, 0.36078431372549025, 0.3568627450980393, 0.3529411764705882, 0.34901960784313724, 0.34509803921568627, 0.3411764705882353, 0.33725490196078434, 0.33333333333333337, 0.3294117647058824, 0.3254901960784313, 0.32156862745098036, 0.3176470588235294, 0.3137254901960784, 0.30980392156862746, 0.3058823529411765, 0.3019607843137255, 0.29803921568627456, 0.2941176470588236, 0.2901960784313725, 0.28627450980392155, 0.2823529411764706, 0.2784313725490196, 0.27450980392156865, 0.2705882352941177, 0.2666666666666667, 0.26274509803921564, 0.2588235294117647, 0.2549019607843137, 0.25098039215686274, 0.24705882352941178, 0.2431372549019608, 0.23921568627450984, 0.23529411764705888, 0.2313725490196079, 0.22745098039215683, 0.22352941176470587, 0.2196078431372549, 0.21568627450980393, 0.21176470588235297, 0.207843137254902, 0.20392156862745103, 0.19999999999999996, 0.196078431372549, 0.19215686274509802, 0.18823529411764706, 0.1843137254901961, 0.18039215686274512, 0.17647058823529416, 0.1725490196078432, 0.16862745098039222, 0.16470588235294115, 0.16078431372549018, 0.1568627450980392, 0.15294117647058825, 0.14901960784313728, 0.14509803921568631, 0.14117647058823535, 0.13725490196078427, 0.1333333333333333, 0.12941176470588234, 0.12549019607843137, 0.1215686274509804, 0.11764705882352944, 0.11372549019607847, 0.1098039215686275, 0.10588235294117654, 0.10196078431372546, 0.0980392156862745, 0.09411764705882353, 0.09019607843137256, 0.0862745098039216, 0.08235294117647063, 0.07843137254901966, 0.07450980392156858, 0.07058823529411762, 0.06666666666666665, 0.06274509803921569, 0.05882352941176472, 0.05490196078431375, 0.050980392156862786, 0.04705882352941182, 0.04313725490196085, 0.039215686274509776, 0.03529411764705881, 0.03137254901960784, 0.027450980392156876, 0.02352941176470591, 0.019607843137254943, 0.015686274509803977, 0.0117647058823529, 0.007843137254901933, 0.0039215686274509665, 0]

  const valsLineUpFromPoint1 = [0.09123307198859587, 0.0947968638631504, 0.09836065573770492, 0.10192444761225944, 0.10548823948681396, 0.1090520313613685, 0.11261582323592302, 0.11617961511047754, 0.11974340698503207, 0.1233071988595866, 0.12687099073414113, 0.13043478260869565, 0.13399857448325017, 0.1375623663578047, 0.14112615823235922, 0.14468995010691374, 0.1482537419814683, 0.1518175338560228, 0.15538132573057734, 0.15894511760513186, 0.16250890947968638, 0.1660727013542409, 0.16963649322879543, 0.17320028510334995, 0.17676407697790447, 0.18032786885245902, 0.18389166072701355, 0.18745545260156807, 0.1910192444761226, 0.1945830363506771, 0.19814682822523164, 0.20171062009978616, 0.20527441197434068, 0.2088382038488952, 0.21240199572344975, 0.21596578759800428, 0.2195295794725588, 0.22309337134711332, 0.22665716322166785, 0.23022095509622234, 0.23378474697077686, 0.23734853884533139, 0.2409123307198859, 0.24447612259444046, 0.24803991446899498, 0.2516037063435495, 0.255167498218104, 0.25873129009265855, 0.2622950819672131, 0.2658588738417676, 0.2694226657163221, 0.27298645759087664, 0.27655024946543116, 0.2801140413399857, 0.2836778332145402, 0.28724162508909473, 0.29080541696364925, 0.29436920883820383, 0.29793300071275836, 0.3014967925873129, 0.3050605844618674, 0.3086243763364219, 0.31218816821097645, 0.31575196008553097, 0.3193157519600855, 0.32287954383464, 0.32644333570919454, 0.33000712758374906, 0.3335709194583036, 0.3371347113328581, 0.34069850320741263, 0.34426229508196715, 0.3478260869565217, 0.3513898788310762, 0.3549536707056307, 0.3585174625801853, 0.3620812544547398, 0.36564504632929434, 0.36920883820384887, 0.3727726300784034, 0.3763364219529579, 0.37990021382751243, 0.38346400570206696, 0.3870277975766215, 0.390591589451176, 0.3941553813257305, 0.39771917320028505, 0.40128296507483957, 0.4048467569493941, 0.4084105488239486, 0.41197434069850314, 0.41553813257305766, 0.4191019244476122, 0.42266571632216676, 0.4262295081967213, 0.4297933000712758, 0.43335709194583033, 0.43692088382038485, 0.4404846756949394, 0.4440484675694939, 0.4476122594440484, 0.45117605131860294, 0.45473984319315747, 0.458303635067712, 0.4618674269422665, 0.46543121881682104, 0.46899501069137556, 0.4725588025659301, 0.4761225944404846, 0.4796863863150391, 0.48325017818959365, 0.4868139700641482, 0.49037776193870275, 0.4939415538132573, 0.4975053456878118, 0.5010691375623663, 0.5046329294369208, 0.5081967213114753, 0.5117605131860299, 0.5153243050605844, 0.5188880969351389, 0.5224518888096935, 0.526015680684248, 0.5295794725588026, 0.533143264433357, 0.5367070563079116, 0.5402708481824661, 0.5438346400570206, 0.5473984319315751, 0.5509622238061297, 0.5545260156806842, 0.5580898075552387, 0.5616535994297932, 0.5652173913043478, 0.5687811831789022, 0.5723449750534568, 0.5759087669280113, 0.5794725588025659, 0.5830363506771203, 0.5866001425516749, 0.5901639344262295, 0.593727726300784, 0.5972915181753385, 0.600855310049893, 0.6044191019244476, 0.607982893799002, 0.6115466856735566, 0.6151104775481111, 0.6186742694226657, 0.6222380612972201, 0.6258018531717747, 0.6293656450463292, 0.6329294369208838, 0.6364932287954382, 0.6400570206699928, 0.6436208125445473, 0.6471846044191019, 0.6507483962936564, 0.6543121881682109, 0.6578759800427655, 0.66143977191732, 0.6650035637918745, 0.668567355666429, 0.6721311475409836, 0.675694939415538, 0.6792587312900926, 0.6828225231646471, 0.6863863150392017, 0.6899501069137561, 0.6935138987883107, 0.6970776906628652, 0.7006414825374198, 0.7042052744119742, 0.7077690662865288, 0.7113328581610833, 0.7148966500356378, 0.7184604419101924, 0.7220242337847469, 0.7255880256593015, 0.7291518175338559, 0.7327156094084105, 0.736279401282965, 0.7398431931575196, 0.743406985032074, 0.7469707769066286, 0.7505345687811831, 0.7540983606557377, 0.7576621525302921, 0.7612259444048467, 0.7647897362794012, 0.7683535281539557, 0.7719173200285102, 0.7754811119030648, 0.7790449037776193, 0.7826086956521738, 0.7861724875267284, 0.7897362794012829, 0.7933000712758375, 0.7968638631503919, 0.8004276550249465, 0.803991446899501, 0.8075552387740556, 0.81111903064861, 0.8146828225231646, 0.8182466143977191, 0.8218104062722736, 0.8253741981468281, 0.8289379900213827, 0.8325017818959372, 0.8360655737704917, 0.8396293656450462, 0.8431931575196008, 0.8467569493941554, 0.8503207412687098, 0.8538845331432644, 0.8574483250178189, 0.8610121168923734, 0.8645759087669279, 0.8681397006414825, 0.871703492516037, 0.8752672843905915, 0.878831076265146, 0.8823948681397006, 0.885958660014255, 0.8895224518888096, 0.8930862437633641, 0.8966500356379187, 0.9002138275124731, 0.9037776193870277, 0.9073414112615822, 0.9109052031361368, 0.9144689950106913, 0.9180327868852459, 0.9215965787598005, 0.925160370634355, 0.9287241625089095, 0.932287954383464, 0.9358517462580186, 0.9394155381325731, 0.9429793300071276, 0.9465431218816821, 0.9501069137562367, 0.9536707056307911, 0.9572344975053457, 0.9607982893799002, 0.9643620812544548, 0.9679258731290092, 0.9714896650035638, 0.9750534568781183, 0.9786172487526729, 0.9821810406272273, 0.9857448325017819, 0.9893086243763365, 0.992872416250891, 0.9964362081254455, 1]
  const valsLineDownToPoint1 = [1, 0.9964362081254455, 0.992872416250891, 0.9893086243763365, 0.9857448325017819, 0.9821810406272273, 0.9786172487526729, 0.9750534568781183, 0.9714896650035638, 0.9679258731290092, 0.9643620812544548, 0.9607982893799002, 0.9572344975053457, 0.9536707056307911, 0.9501069137562367, 0.9465431218816821, 0.9429793300071276, 0.9394155381325731, 0.9358517462580186, 0.932287954383464, 0.9287241625089095, 0.925160370634355, 0.9215965787598005, 0.9180327868852459, 0.9144689950106913, 0.9109052031361368, 0.9073414112615822, 0.9037776193870277, 0.9002138275124731, 0.8966500356379187, 0.8930862437633641, 0.8895224518888096, 0.885958660014255, 0.8823948681397006, 0.878831076265146, 0.8752672843905915, 0.871703492516037, 0.8681397006414825, 0.8645759087669279, 0.8610121168923734, 0.8574483250178189, 0.8538845331432644, 0.8503207412687098, 0.8467569493941554, 0.8431931575196008, 0.8396293656450462, 0.8360655737704917, 0.8325017818959372, 0.8289379900213827, 0.8253741981468281, 0.8218104062722736, 0.8182466143977191, 0.8146828225231646, 0.81111903064861, 0.8075552387740556, 0.803991446899501, 0.8004276550249465, 0.7968638631503919, 0.7933000712758375, 0.7897362794012829, 0.7861724875267284, 0.7826086956521738, 0.7790449037776193, 0.7754811119030648, 0.7719173200285102, 0.7683535281539557, 0.7647897362794012, 0.7612259444048467, 0.7576621525302921, 0.7540983606557377, 0.7505345687811831, 0.7469707769066286, 0.743406985032074, 0.7398431931575196, 0.736279401282965, 0.7327156094084105, 0.7291518175338559, 0.7255880256593015, 0.7220242337847469, 0.7184604419101924, 0.7148966500356378, 0.7113328581610833, 0.7077690662865288, 0.7042052744119742, 0.7006414825374198, 0.6970776906628652, 0.6935138987883107, 0.6899501069137561, 0.6863863150392017, 0.6828225231646471, 0.6792587312900926, 0.675694939415538, 0.6721311475409836, 0.668567355666429, 0.6650035637918745, 0.66143977191732, 0.6578759800427655, 0.6543121881682109, 0.6507483962936564, 0.6471846044191019, 0.6436208125445473, 0.6400570206699928, 0.6364932287954382, 0.6329294369208838, 0.6293656450463292, 0.6258018531717747, 0.6222380612972201, 0.6186742694226657, 0.6151104775481111, 0.6115466856735566, 0.607982893799002, 0.6044191019244476, 0.600855310049893, 0.5972915181753385, 0.593727726300784, 0.5901639344262295, 0.5866001425516749, 0.5830363506771203, 0.5794725588025659, 0.5759087669280113, 0.5723449750534568, 0.5687811831789022, 0.5652173913043478, 0.5616535994297932, 0.5580898075552387, 0.5545260156806842, 0.5509622238061297, 0.5473984319315751, 0.5438346400570206, 0.5402708481824661, 0.5367070563079116, 0.533143264433357, 0.5295794725588026, 0.526015680684248, 0.5224518888096935, 0.5188880969351389, 0.5153243050605844, 0.5117605131860299, 0.5081967213114753, 0.5046329294369208, 0.5010691375623663, 0.4975053456878118, 0.4939415538132573, 0.49037776193870275, 0.4868139700641482, 0.48325017818959365, 0.4796863863150391, 0.4761225944404846, 0.4725588025659301, 0.46899501069137556, 0.46543121881682104, 0.4618674269422665, 0.458303635067712, 0.45473984319315747, 0.45117605131860294, 0.4476122594440484, 0.4440484675694939, 0.4404846756949394, 0.43692088382038485, 0.43335709194583033, 0.4297933000712758, 0.4262295081967213, 0.42266571632216676, 0.4191019244476122, 0.41553813257305766, 0.41197434069850314, 0.4084105488239486, 0.4048467569493941, 0.40128296507483957, 0.39771917320028505, 0.3941553813257305, 0.390591589451176, 0.3870277975766215, 0.38346400570206696, 0.37990021382751243, 0.3763364219529579, 0.3727726300784034, 0.36920883820384887, 0.36564504632929434, 0.3620812544547398, 0.3585174625801853, 0.3549536707056307, 0.3513898788310762, 0.3478260869565217, 0.34426229508196715, 0.34069850320741263, 0.3371347113328581, 0.3335709194583036, 0.33000712758374906, 0.32644333570919454, 0.32287954383464, 0.3193157519600855, 0.31575196008553097, 0.31218816821097645, 0.3086243763364219, 0.3050605844618674, 0.3014967925873129, 0.29793300071275836, 0.29436920883820383, 0.29080541696364925, 0.28724162508909473, 0.2836778332145402, 0.2801140413399857, 0.27655024946543116, 0.27298645759087664, 0.2694226657163221, 0.2658588738417676, 0.2622950819672131, 0.25873129009265855, 0.255167498218104, 0.2516037063435495, 0.24803991446899498, 0.24447612259444046, 0.2409123307198859, 0.23734853884533139, 0.23378474697077686, 0.23022095509622234, 0.22665716322166785, 0.22309337134711332, 0.2195295794725588, 0.21596578759800428, 0.21240199572344975, 0.2088382038488952, 0.20527441197434068, 0.20171062009978616, 0.19814682822523164, 0.1945830363506771, 0.1910192444761226, 0.18745545260156807, 0.18389166072701355, 0.18032786885245902, 0.17676407697790447, 0.17320028510334995, 0.16963649322879543, 0.1660727013542409, 0.16250890947968638, 0.15894511760513186, 0.15538132573057734, 0.1518175338560228, 0.1482537419814683, 0.14468995010691374, 0.14112615823235922, 0.1375623663578047, 0.13399857448325017, 0.13043478260869565, 0.12687099073414113, 0.1233071988595866, 0.11974340698503207, 0.11617961511047754, 0.11261582323592302, 0.1090520313613685, 0.10548823948681396, 0.10192444761225944, 0.09836065573770492, 0.0947968638631504, 0.09123307198859587]
  
  const valsLineUpFromPoint2 = [0.2, 0.2031372549019608, 0.2062745098039216, 0.20941176470588235, 0.21254901960784314, 0.21568627450980393, 0.21882352941176472, 0.2219607843137255, 0.22509803921568627, 0.22823529411764706, 0.23137254901960785, 0.23450980392156864, 0.23764705882352943, 0.2407843137254902, 0.243921568627451, 0.24705882352941178, 0.2501960784313726, 0.25333333333333335, 0.2564705882352941, 0.25960784313725493, 0.2627450980392157, 0.26588235294117646, 0.2690196078431373, 0.27215686274509804, 0.27529411764705886, 0.2784313725490196, 0.28156862745098044, 0.2847058823529412, 0.28784313725490196, 0.2909803921568628, 0.29411764705882354, 0.2972549019607843, 0.3003921568627451, 0.30352941176470594, 0.3066666666666667, 0.30980392156862746, 0.3129411764705883, 0.31607843137254904, 0.3192156862745098, 0.3223529411764706, 0.3254901960784314, 0.32862745098039214, 0.33176470588235296, 0.3349019607843138, 0.33803921568627454, 0.3411764705882353, 0.3443137254901961, 0.3474509803921569, 0.35058823529411764, 0.35372549019607846, 0.3568627450980393, 0.36, 0.3631372549019608, 0.3662745098039216, 0.3694117647058824, 0.37254901960784315, 0.37568627450980396, 0.3788235294117647, 0.3819607843137255, 0.3850980392156863, 0.3882352941176471, 0.3913725490196079, 0.39450980392156865, 0.39764705882352946, 0.4007843137254902, 0.403921568627451, 0.4070588235294118, 0.41019607843137257, 0.41333333333333333, 0.41647058823529415, 0.41960784313725497, 0.4227450980392157, 0.4258823529411765, 0.4290196078431373, 0.43215686274509807, 0.43529411764705883, 0.43843137254901965, 0.44156862745098047, 0.4447058823529412, 0.447843137254902, 0.45098039215686275, 0.45411764705882357, 0.45725490196078433, 0.46039215686274515, 0.4635294117647059, 0.46666666666666673, 0.4698039215686275, 0.47294117647058825, 0.47607843137254907, 0.47921568627450983, 0.48235294117647065, 0.4854901960784314, 0.4886274509803922, 0.491764705882353, 0.49490196078431375, 0.4980392156862746, 0.5011764705882353, 0.5043137254901962, 0.507450980392157, 0.5105882352941177, 0.5137254901960785, 0.5168627450980392, 0.52, 0.5231372549019608, 0.5262745098039217, 0.5294117647058825, 0.5325490196078432, 0.5356862745098039, 0.5388235294117647, 0.5419607843137255, 0.5450980392156863, 0.5482352941176472, 0.551372549019608, 0.5545098039215687, 0.5576470588235294, 0.5607843137254902, 0.563921568627451, 0.5670588235294118, 0.5701960784313727, 0.5733333333333334, 0.5764705882352942, 0.5796078431372549, 0.5827450980392157, 0.5858823529411765, 0.5890196078431373, 0.5921568627450982, 0.5952941176470589, 0.5984313725490197, 0.6015686274509804, 0.6047058823529412, 0.607843137254902, 0.6109803921568628, 0.6141176470588237, 0.6172549019607844, 0.6203921568627451, 0.6235294117647059, 0.6266666666666667, 0.6298039215686275, 0.6329411764705883, 0.636078431372549, 0.6392156862745099, 0.6423529411764706, 0.6454901960784314, 0.6486274509803922, 0.651764705882353, 0.6549019607843138, 0.6580392156862745, 0.6611764705882354, 0.6643137254901961, 0.6674509803921569, 0.6705882352941177, 0.6737254901960785, 0.6768627450980393, 0.68, 0.6831372549019609, 0.6862745098039216, 0.6894117647058824, 0.6925490196078432, 0.695686274509804, 0.6988235294117648, 0.7019607843137254, 0.7050980392156863, 0.7082352941176471, 0.7113725490196079, 0.7145098039215687, 0.7176470588235295, 0.7207843137254903, 0.7239215686274509, 0.7270588235294118, 0.7301960784313726, 0.7333333333333334, 0.7364705882352942, 0.739607843137255, 0.7427450980392158, 0.7458823529411764, 0.7490196078431373, 0.7521568627450981, 0.7552941176470589, 0.7584313725490197, 0.7615686274509805, 0.7647058823529413, 0.7678431372549019, 0.7709803921568628, 0.7741176470588236, 0.7772549019607844, 0.7803921568627452, 0.783529411764706, 0.7866666666666666, 0.7898039215686274, 0.7929411764705883, 0.7960784313725491, 0.7992156862745099, 0.8023529411764707, 0.8054901960784315, 0.8086274509803921, 0.8117647058823529, 0.8149019607843138, 0.8180392156862746, 0.8211764705882354, 0.8243137254901962, 0.827450980392157, 0.8305882352941176, 0.8337254901960784, 0.8368627450980393, 0.8400000000000001, 0.8431372549019609, 0.8462745098039217, 0.8494117647058825, 0.8525490196078431, 0.855686274509804, 0.8588235294117648, 0.8619607843137256, 0.8650980392156864, 0.8682352941176472, 0.8713725490196078, 0.8745098039215686, 0.8776470588235294, 0.8807843137254903, 0.8839215686274511, 0.8870588235294119, 0.8901960784313727, 0.8933333333333333, 0.8964705882352941, 0.899607843137255, 0.9027450980392158, 0.9058823529411766, 0.9090196078431374, 0.9121568627450982, 0.9152941176470588, 0.9184313725490196, 0.9215686274509804, 0.9247058823529413, 0.9278431372549021, 0.9309803921568629, 0.9341176470588237, 0.9372549019607843, 0.9403921568627451, 0.943529411764706, 0.9466666666666668, 0.9498039215686276, 0.9529411764705884, 0.956078431372549, 0.9592156862745098, 0.9623529411764706, 0.9654901960784315, 0.9686274509803923, 0.9717647058823531, 0.9749019607843139, 0.9780392156862745, 0.9811764705882353, 0.9843137254901961, 0.987450980392157, 0.9905882352941178, 0.9937254901960786, 0.9968627450980394, 1]
  const valsLineDownToPoint2 = [1, 0.9968627450980394, 0.9937254901960786, 0.9905882352941178, 0.987450980392157, 0.9843137254901961, 0.9811764705882353, 0.9780392156862745, 0.9749019607843139, 0.9717647058823531, 0.9686274509803923, 0.9654901960784315, 0.9623529411764706, 0.9592156862745098, 0.956078431372549, 0.9529411764705884, 0.9498039215686276, 0.9466666666666668, 0.943529411764706, 0.9403921568627451, 0.9372549019607843, 0.9341176470588237, 0.9309803921568629, 0.9278431372549021, 0.9247058823529413, 0.9215686274509804, 0.9184313725490196, 0.9152941176470588, 0.9121568627450982, 0.9090196078431374, 0.9058823529411766, 0.9027450980392158, 0.899607843137255, 0.8964705882352941, 0.8933333333333333, 0.8901960784313727, 0.8870588235294119, 0.8839215686274511, 0.8807843137254903, 0.8776470588235294, 0.8745098039215686, 0.8713725490196078, 0.8682352941176472, 0.8650980392156864, 0.8619607843137256, 0.8588235294117648, 0.855686274509804, 0.8525490196078431, 0.8494117647058825, 0.8462745098039217, 0.8431372549019609, 0.8400000000000001, 0.8368627450980393, 0.8337254901960784, 0.8305882352941176, 0.827450980392157, 0.8243137254901962, 0.8211764705882354, 0.8180392156862746, 0.8149019607843138, 0.8117647058823529, 0.8086274509803921, 0.8054901960784315, 0.8023529411764707, 0.7992156862745099, 0.7960784313725491, 0.7929411764705883, 0.7898039215686274, 0.7866666666666666, 0.783529411764706, 0.7803921568627452, 0.7772549019607844, 0.7741176470588236, 0.7709803921568628, 0.7678431372549019, 0.7647058823529413, 0.7615686274509805, 0.7584313725490197, 0.7552941176470589, 0.7521568627450981, 0.7490196078431373, 0.7458823529411764, 0.7427450980392158, 0.739607843137255, 0.7364705882352942, 0.7333333333333334, 0.7301960784313726, 0.7270588235294118, 0.7239215686274509, 0.7207843137254903, 0.7176470588235295, 0.7145098039215687, 0.7113725490196079, 0.7082352941176471, 0.7050980392156863, 0.7019607843137254, 0.6988235294117648, 0.695686274509804, 0.6925490196078432, 0.6894117647058824, 0.6862745098039216, 0.6831372549019609, 0.68, 0.6768627450980393, 0.6737254901960785, 0.6705882352941177, 0.6674509803921569, 0.6643137254901961, 0.6611764705882354, 0.6580392156862745, 0.6549019607843138, 0.651764705882353, 0.6486274509803922, 0.6454901960784314, 0.6423529411764706, 0.6392156862745099, 0.636078431372549, 0.6329411764705883, 0.6298039215686275, 0.6266666666666667, 0.6235294117647059, 0.6203921568627451, 0.6172549019607844, 0.6141176470588237, 0.6109803921568628, 0.607843137254902, 0.6047058823529412, 0.6015686274509804, 0.5984313725490197, 0.5952941176470589, 0.5921568627450982, 0.5890196078431373, 0.5858823529411765, 0.5827450980392157, 0.5796078431372549, 0.5764705882352942, 0.5733333333333334, 0.5701960784313727, 0.5670588235294118, 0.563921568627451, 0.5607843137254902, 0.5576470588235294, 0.5545098039215687, 0.551372549019608, 0.5482352941176472, 0.5450980392156863, 0.5419607843137255, 0.5388235294117647, 0.5356862745098039, 0.5325490196078432, 0.5294117647058825, 0.5262745098039217, 0.5231372549019608, 0.52, 0.5168627450980392, 0.5137254901960785, 0.5105882352941177, 0.507450980392157, 0.5043137254901962, 0.5011764705882353, 0.4980392156862746, 0.49490196078431375, 0.491764705882353, 0.4886274509803922, 0.4854901960784314, 0.48235294117647065, 0.47921568627450983, 0.47607843137254907, 0.47294117647058825, 0.4698039215686275, 0.46666666666666673, 0.4635294117647059, 0.46039215686274515, 0.45725490196078433, 0.45411764705882357, 0.45098039215686275, 0.447843137254902, 0.4447058823529412, 0.44156862745098047, 0.43843137254901965, 0.43529411764705883, 0.43215686274509807, 0.4290196078431373, 0.4258823529411765, 0.4227450980392157, 0.41960784313725497, 0.41647058823529415, 0.41333333333333333, 0.41019607843137257, 0.4070588235294118, 0.403921568627451, 0.4007843137254902, 0.39764705882352946, 0.39450980392156865, 0.3913725490196079, 0.3882352941176471, 0.3850980392156863, 0.3819607843137255, 0.3788235294117647, 0.37568627450980396, 0.37254901960784315, 0.3694117647058824, 0.3662745098039216, 0.3631372549019608, 0.36, 0.3568627450980393, 0.35372549019607846, 0.35058823529411764, 0.3474509803921569, 0.3443137254901961, 0.3411764705882353, 0.33803921568627454, 0.3349019607843138, 0.33176470588235296, 0.32862745098039214, 0.3254901960784314, 0.3223529411764706, 0.3192156862745098, 0.31607843137254904, 0.3129411764705883, 0.30980392156862746, 0.3066666666666667, 0.30352941176470594, 0.3003921568627451, 0.2972549019607843, 0.29411764705882354, 0.2909803921568628, 0.28784313725490196, 0.2847058823529412, 0.28156862745098044, 0.2784313725490196, 0.27529411764705886, 0.27215686274509804, 0.2690196078431373, 0.26588235294117646, 0.2627450980392157, 0.25960784313725493, 0.2564705882352941, 0.25333333333333335, 0.2501960784313726, 0.24705882352941178, 0.243921568627451, 0.2407843137254902, 0.23764705882352943, 0.23450980392156864, 0.23137254901960785, 0.22823529411764706, 0.22509803921568627, 0.2219607843137255, 0.21882352941176472, 0.21568627450980393, 0.21254901960784314, 0.20941176470588235, 0.2062745098039216, 0.2031372549019608, 0.2]
  
  const valsLineDownToPoint75 = [1, 0.9990196078431373, 0.9980392156862745, 0.9970588235294118, 0.996078431372549, 0.9950980392156863, 0.9941176470588236, 0.9931372549019608, 0.9921568627450981, 0.9911764705882353, 0.9901960784313726, 0.9892156862745098, 0.9882352941176471, 0.9872549019607844, 0.9862745098039216, 0.9852941176470589, 0.9843137254901961, 0.9833333333333334, 0.9823529411764707, 0.9813725490196079, 0.9803921568627451, 0.9794117647058823, 0.9784313725490196, 0.9774509803921568, 0.9764705882352941, 0.9754901960784313, 0.9745098039215686, 0.9735294117647059, 0.9725490196078431, 0.9715686274509804, 0.9705882352941176, 0.9696078431372549, 0.9686274509803922, 0.9676470588235294, 0.9666666666666667, 0.9656862745098039, 0.9647058823529412, 0.9637254901960784, 0.9627450980392157, 0.961764705882353, 0.9607843137254902, 0.9598039215686275, 0.9588235294117647, 0.9578431372549019, 0.9568627450980391, 0.9558823529411764, 0.9549019607843137, 0.9539215686274509, 0.9529411764705882, 0.9519607843137254, 0.9509803921568627, 0.95, 0.9490196078431372, 0.9480392156862745, 0.9470588235294117, 0.946078431372549, 0.9450980392156862, 0.9441176470588235, 0.9431372549019608, 0.942156862745098, 0.9411764705882353, 0.9401960784313725, 0.9392156862745098, 0.9382352941176471, 0.9372549019607843, 0.9362745098039216, 0.9352941176470588, 0.9343137254901961, 0.9333333333333333, 0.9323529411764706, 0.9313725490196079, 0.9303921568627451, 0.9294117647058824, 0.9284313725490196, 0.9274509803921569, 0.9264705882352942, 0.9254901960784314, 0.9245098039215687, 0.9235294117647059, 0.9225490196078432, 0.9215686274509804, 0.9205882352941177, 0.919607843137255, 0.9186274509803922, 0.9176470588235294, 0.9166666666666666, 0.9156862745098039, 0.9147058823529411, 0.9137254901960784, 0.9127450980392157, 0.9117647058823529, 0.9107843137254902, 0.9098039215686274, 0.9088235294117647, 0.907843137254902, 0.9068627450980392, 0.9058823529411765, 0.9049019607843137, 0.903921568627451, 0.9029411764705882, 0.9019607843137255, 0.9009803921568628, 0.9, 0.8990196078431373, 0.8980392156862745, 0.8970588235294118, 0.8960784313725491, 0.8950980392156862, 0.8941176470588235, 0.8931372549019607, 0.892156862745098, 0.8911764705882352, 0.8901960784313725, 0.8892156862745098, 0.888235294117647, 0.8872549019607843, 0.8862745098039215, 0.8852941176470588, 0.884313725490196, 0.8833333333333333, 0.8823529411764706, 0.8813725490196078, 0.8803921568627451, 0.8794117647058823, 0.8784313725490196, 0.8774509803921569, 0.8764705882352941, 0.8754901960784314, 0.8745098039215686, 0.8735294117647059, 0.8725490196078431, 0.8715686274509804, 0.8705882352941177, 0.8696078431372549, 0.8686274509803922, 0.8676470588235294, 0.8666666666666667, 0.865686274509804, 0.8647058823529412, 0.8637254901960785, 0.8627450980392157, 0.861764705882353, 0.8607843137254902, 0.8598039215686275, 0.8588235294117648, 0.857843137254902, 0.8568627450980392, 0.8558823529411764, 0.8549019607843137, 0.8539215686274509, 0.8529411764705882, 0.8519607843137255, 0.8509803921568627, 0.85, 0.8490196078431372, 0.8480392156862745, 0.8470588235294118, 0.846078431372549, 0.8450980392156863, 0.8441176470588235, 0.8431372549019608, 0.842156862745098, 0.8411764705882353, 0.8401960784313726, 0.8392156862745098, 0.8382352941176471, 0.8372549019607843, 0.8362745098039216, 0.8352941176470589, 0.8343137254901961, 0.8333333333333334, 0.8323529411764706, 0.8313725490196079, 0.830392156862745, 0.8294117647058823, 0.8284313725490196, 0.8274509803921568, 0.8264705882352941, 0.8254901960784313, 0.8245098039215686, 0.8235294117647058, 0.8225490196078431, 0.8215686274509804, 0.8205882352941176, 0.8196078431372549, 0.8186274509803921, 0.8176470588235294, 0.8166666666666667, 0.8156862745098039, 0.8147058823529412, 0.8137254901960784, 0.8127450980392157, 0.8117647058823529, 0.8107843137254902, 0.8098039215686275, 0.8088235294117647, 0.807843137254902, 0.8068627450980392, 0.8058823529411765, 0.8049019607843138, 0.803921568627451, 0.8029411764705883, 0.8019607843137255, 0.8009803921568628, 0.8, 0.7990196078431373, 0.7980392156862746, 0.7970588235294118, 0.7960784313725491, 0.7950980392156862, 0.7941176470588235, 0.7931372549019607, 0.792156862745098, 0.7911764705882353, 0.7901960784313725, 0.7892156862745098, 0.788235294117647, 0.7872549019607843, 0.7862745098039216, 0.7852941176470588, 0.7843137254901961, 0.7833333333333333, 0.7823529411764706, 0.7813725490196078, 0.7803921568627451, 0.7794117647058824, 0.7784313725490196, 0.7774509803921569, 0.7764705882352941, 0.7754901960784314, 0.7745098039215687, 0.7735294117647059, 0.7725490196078432, 0.7715686274509804, 0.7705882352941177, 0.7696078431372549, 0.7686274509803922, 0.7676470588235295, 0.7666666666666667, 0.7656862745098039, 0.7647058823529411, 0.7637254901960784, 0.7627450980392156, 0.7617647058823529, 0.7607843137254902, 0.7598039215686274, 0.7588235294117647, 0.7578431372549019, 0.7568627450980392, 0.7558823529411764, 0.7549019607843137, 0.753921568627451, 0.7529411764705882, 0.7519607843137255, 0.7509803921568627, 0.75]
  const valsLineDownToPoint5 = [1, 0.9980392156862745, 0.996078431372549, 0.9941176470588236, 0.9921568627450981, 0.9901960784313726, 0.9882352941176471, 0.9862745098039216, 0.9843137254901961, 0.9823529411764707, 0.9803921568627452, 0.9784313725490196, 0.9764705882352941, 0.9745098039215686, 0.9725490196078431, 0.9705882352941176, 0.9686274509803922, 0.9666666666666667, 0.9647058823529412, 0.9627450980392157, 0.9607843137254901, 0.9588235294117646, 0.9568627450980391, 0.9549019607843137, 0.9529411764705882, 0.9509803921568627, 0.9490196078431372, 0.9470588235294117, 0.9450980392156862, 0.9431372549019608, 0.9411764705882353, 0.9392156862745098, 0.9372549019607843, 0.9352941176470588, 0.9333333333333333, 0.9313725490196079, 0.9294117647058824, 0.9274509803921569, 0.9254901960784314, 0.9235294117647059, 0.9215686274509804, 0.919607843137255, 0.9176470588235295, 0.9156862745098039, 0.9137254901960784, 0.9117647058823529, 0.9098039215686274, 0.907843137254902, 0.9058823529411765, 0.903921568627451, 0.9019607843137255, 0.9, 0.8980392156862744, 0.896078431372549, 0.8941176470588235, 0.892156862745098, 0.8901960784313725, 0.888235294117647, 0.8862745098039215, 0.884313725490196, 0.8823529411764706, 0.8803921568627451, 0.8784313725490196, 0.8764705882352941, 0.8745098039215686, 0.8725490196078431, 0.8705882352941177, 0.8686274509803922, 0.8666666666666667, 0.8647058823529412, 0.8627450980392157, 0.8607843137254902, 0.8588235294117648, 0.8568627450980393, 0.8549019607843138, 0.8529411764705882, 0.8509803921568627, 0.8490196078431372, 0.8470588235294118, 0.8450980392156863, 0.8431372549019608, 0.8411764705882353, 0.8392156862745098, 0.8372549019607843, 0.8352941176470587, 0.8333333333333333, 0.8313725490196078, 0.8294117647058823, 0.8274509803921568, 0.8254901960784313, 0.8235294117647058, 0.8215686274509804, 0.8196078431372549, 0.8176470588235294, 0.8156862745098039, 0.8137254901960784, 0.8117647058823529, 0.8098039215686275, 0.807843137254902, 0.8058823529411765, 0.803921568627451, 0.8019607843137255, 0.8, 0.7980392156862746, 0.7960784313725491, 0.7941176470588236, 0.7921568627450981, 0.7901960784313725, 0.788235294117647, 0.7862745098039216, 0.7843137254901961, 0.7823529411764706, 0.7803921568627451, 0.7784313725490196, 0.7764705882352941, 0.7745098039215687, 0.7725490196078431, 0.7705882352941176, 0.7686274509803921, 0.7666666666666666, 0.7647058823529411, 0.7627450980392156, 0.7607843137254902, 0.7588235294117647, 0.7568627450980392, 0.7549019607843137, 0.7529411764705882, 0.7509803921568627, 0.7490196078431373, 0.7470588235294118, 0.7450980392156863, 0.7431372549019608, 0.7411764705882353, 0.7392156862745098, 0.7372549019607844, 0.7352941176470589, 0.7333333333333334, 0.7313725490196079, 0.7294117647058823, 0.7274509803921568, 0.7254901960784313, 0.7235294117647059, 0.7215686274509804, 0.7196078431372549, 0.7176470588235294, 0.7156862745098039, 0.7137254901960784, 0.711764705882353, 0.7098039215686275, 0.7078431372549019, 0.7058823529411764, 0.7039215686274509, 0.7019607843137254, 0.7, 0.6980392156862745, 0.696078431372549, 0.6941176470588235, 0.692156862745098, 0.6901960784313725, 0.6882352941176471, 0.6862745098039216, 0.6843137254901961, 0.6823529411764706, 0.6803921568627451, 0.6784313725490196, 0.6764705882352942, 0.6745098039215687, 0.6725490196078432, 0.6705882352941177, 0.6686274509803922, 0.6666666666666666, 0.6647058823529411, 0.6627450980392157, 0.6607843137254902, 0.6588235294117647, 0.6568627450980392, 0.6549019607843137, 0.6529411764705882, 0.6509803921568628, 0.6490196078431373, 0.6470588235294118, 0.6450980392156862, 0.6431372549019607, 0.6411764705882352, 0.6392156862745098, 0.6372549019607843, 0.6352941176470588, 0.6333333333333333, 0.6313725490196078, 0.6294117647058823, 0.6274509803921569, 0.6254901960784314, 0.6235294117647059, 0.6215686274509804, 0.6196078431372549, 0.6176470588235294, 0.615686274509804, 0.6137254901960785, 0.611764705882353, 0.6098039215686275, 0.607843137254902, 0.6058823529411764, 0.6039215686274509, 0.6019607843137255, 0.6, 0.5980392156862745, 0.596078431372549, 0.5941176470588235, 0.592156862745098, 0.5901960784313726, 0.5882352941176471, 0.5862745098039216, 0.5843137254901961, 0.5823529411764706, 0.580392156862745, 0.5784313725490196, 0.5764705882352941, 0.5745098039215686, 0.5725490196078431, 0.5705882352941176, 0.5686274509803921, 0.5666666666666667, 0.5647058823529412, 0.5627450980392157, 0.5607843137254902, 0.5588235294117647, 0.5568627450980392, 0.5549019607843138, 0.5529411764705883, 0.5509803921568628, 0.5490196078431373, 0.5470588235294118, 0.5450980392156862, 0.5431372549019607, 0.5411764705882353, 0.5392156862745098, 0.5372549019607843, 0.5352941176470588, 0.5333333333333333, 0.5313725490196078, 0.5294117647058824, 0.5274509803921569, 0.5254901960784314, 0.5235294117647059, 0.5215686274509804, 0.5196078431372549, 0.5176470588235295, 0.5156862745098039, 0.5137254901960784, 0.5117647058823529, 0.5098039215686274, 0.5078431372549019, 0.5058823529411764, 0.503921568627451, 0.5019607843137255, 0.5]

  const valscurveExpUp = [0, 0.000007689379813213826, 0.00003075787402306851, 0.00006920654702224915, 0.00012303717307138307, 0.00019225223670882308, 0.00027685493332363365, 0.0003768491698936671, 0.0004922395658889522, 0.0006230314543387294, 0.0007692308830661299, 0.0009308446160880557, 0.001107880135183148, 0.0013003456416276205, 0.001508250058100069, 0.001731603030756479, 0.0019704149314765385, 0.0022246968602822603, 0.0024944606479309073, 0.002779718858682001, 0.0030804847932421886, 0.0033967724918884112, 0.003728596737769929, 0.004075973060393756, 0.004438917739292725, 0.004817447807880737, 0.005211581057494419, 0.005621336041626401, 0.006046732080350448, 0.006487789264942312, 0.006944528462698107, 0.007416971321952959, 0.00790514027730349, 0.008409058555036264, 0.008928750178766265, 0.009464239975287225, 0.01001555358063877, 0.010582717446393497, 0.011165758846166551, 0.0117647058823529, 0.012379587493095756, 0.013010433459490267, 0.013657274413026776, 0.014320141843278122, 0.014999068105835622, 0.0156940864304993, 0.016405230929725456, 0.0171325366073386, 0.01787603936751292, 0.018635776024027995, 0.019411784309804836, 0.020204102886728692, 0.021012771355764848, 0.02183783026737318, 0.022679321132229036, 0.023537286432256166, 0.024411769631980884, 0.025302815190212602, 0.026210468572059997, 0.02713477626129046, 0.028075785773040707, 0.029033545666887872, 0.0300081055602891, 0.03099951614239982, 0.03200782918827927, 0.03303309757349371, 0.03407537528912874, 0.035134717457217635, 0.036211180346602534, 0.03730482138923363, 0.038415699196923114, 0.03954387357856404, 0.040689405557826186, 0.041852357391343964, 0.043032792587409, 0.04423077592518099, 0.04544637347443348, 0.046679652615848055, 0.04793068206187323, 0.04919953187816517, 0.05048627350562718, 0.05179097978306402, 0.05311372497047295, 0.054454584772986814, 0.05581363636549119, 0.05719095841793631, 0.05858663112136431, 0.06000073621467361, 0.06143335701214636, 0.06288457843175832, 0.06435448702430169, 0.06584317100334136, 0.06735072027603661, 0.0688772264748524, 0.07042278299019222, 0.07198748500398144, 0.07357142952423346, 0.07517471542063181, 0.07679744346116169, 0.07843971634982838, 0.08010163876549758, 0.08178331740189904, 0.08348486100883157, 0.08520638043461404, 0.0869479886698239, 0.08870980089237201, 0.09049193451395887, 0.09229450922796456, 0.09411764705882308, 0.09596147241293695, 0.09782611213118841, 0.09971169554310577, 0.10161835452274937, 0.10354622354638077, 0.10549543975198239, 0.10746614300070201, 0.10945847594029179, 0.11147258407062499, 0.1135086158113674, 0.11556672257189271, 0.11764705882352877, 0.11974978217422994, 0.12187505344577387, 0.12402303675358595, 0.1261938995892985, 0.1283878129061613, 0.13060495120741966, 0.13284549263778722, 0.13510961907814534, 0.13739751624360586, 0.1397093737850852, 0.1420453853945418, 0.14440574891403646, 0.1467906664487888, 0.1492003444844061, 0.15163499400847225, 0.1540948306366977, 0.15658007474383817, 0.1590909515996023, 0.16162769150978284, 0.1641905299628572, 0.16677970778231554, 0.16939547128499355, 0.17203807244569957, 0.1747077690684421, 0.17740482496458598, 0.18012951013827838, 0.1828821009795123, 0.18566288046521384, 0.1884721383687621, 0.19131017147838003, 0.194177283824857, 0.19707378691909472, 0.19999999999999873, 0.20295625029327213, 0.20594287328170113, 0.20896021298756384, 0.2120086222678318, 0.21508846312288088, 0.2182001070194739, 0.22134393522883067, 0.22452033918065584, 0.22772972083405452, 0.23097249306633394, 0.23424908008075318, 0.2375599178343678, 0.24090545448719003, 0.24428615087398076, 0.24770248100008452, 0.2511549325628212, 0.2546440075000683, 0.258170222567789, 0.2617341099483942, 0.2653362178919829, 0.2689771113926577, 0.27265737290229586, 0.27637760308434534, 0.28013842161042846, 0.28394046800276895, 0.28778440252570836, 0.2916709071298629, 0.2956006864527758, 0.2995744688802595, 0.30359300767299824, 0.3076570821633897, 0.31176749902806655, 0.3159250936420387, 0.3201307315209597, 0.3243853098586461, 0.3286897591676632, 0.3330450450315682, 0.3374521699782602, 0.34191217548484465, 0.3464261441254983, 0.35099520187502586, 0.35562052058215476, 0.36030332062813675, 0.36504487378794714, 0.36984650631331106, 0.3747096022589854, 0.3796356070762176, 0.3846260315001372, 0.3896824557610623, 0.3948065341533953, 0.3999999999999968, 0.40526467105477704, 0.4106024553918115, 0.41601535783572097, 0.42150548699549373, 0.4270750629725557, 0.4327264258239403, 0.43846204487313356, 0.44428452897490434, 0.4501966378565646, 0.4562012946771501, 0.4623015999685416, 0.46850084714933626, 0.47480253983424814, 0.4812104112001281, 0.4877284457158252, 0.49436090359891205, 0.5011123484301365, 0.5079876784393722, 0.5149921620787308, 0.5221314786244544, 0.5294117647058774, 0.5368396678559104, 0.5444224084248541, 0.5521678515135409, 0.5600845909841463, 0.5681820481265581, 0.5764705882352883, 0.5849616592429661, 0.5936679577415273, 0.6026036293163572, 0.6117845122897319, 0.62122843696667, 0.6309555966739193, 0.6409890128576923, 0.651355125162457, 0.6620845502036374, 0.6732130720627421, 0.6847829574257389, 0.6968447358417524, 0.7094596636550261, 0.7227032230640886, 0.7366702436988197, 0.7514826742312847, 0.7673019027584689, 0.7843493790608879, 0.8029436152721243, 0.8235729901301478, 0.8470588235293918, 0.875000961172452, 0.9115253790377811, 0.9999999211504664]
  const valscurveExpDown = [0.9999999211504664, 0.9115253790377811, 0.875000961172452, 0.8470588235293918, 0.8235729901301478, 0.8029436152721243, 0.7843493790608879, 0.7673019027584689, 0.7514826742312847, 0.7366702436988197, 0.7227032230640886, 0.7094596636550261, 0.6968447358417524, 0.6847829574257389, 0.6732130720627421, 0.6620845502036374, 0.651355125162457, 0.6409890128576923, 0.6309555966739193, 0.62122843696667, 0.6117845122897319, 0.6026036293163572, 0.5936679577415273, 0.5849616592429661, 0.5764705882352883, 0.5681820481265581, 0.5600845909841463, 0.5521678515135409, 0.5444224084248541, 0.5368396678559104, 0.5294117647058774, 0.5221314786244544, 0.5149921620787308, 0.5079876784393722, 0.5011123484301365, 0.49436090359891205, 0.4877284457158252, 0.4812104112001281, 0.47480253983424814, 0.46850084714933626, 0.4623015999685416, 0.4562012946771501, 0.4501966378565646, 0.44428452897490434, 0.43846204487313356, 0.4327264258239403, 0.4270750629725557, 0.42150548699549373, 0.41601535783572097, 0.4106024553918115, 0.40526467105477704, 0.3999999999999968, 0.3948065341533953, 0.3896824557610623, 0.3846260315001372, 0.3796356070762176, 0.3747096022589854, 0.36984650631331106, 0.36504487378794714, 0.36030332062813675, 0.35562052058215476, 0.35099520187502586, 0.3464261441254983, 0.34191217548484465, 0.3374521699782602, 0.3330450450315682, 0.3286897591676632, 0.3243853098586461, 0.3201307315209597, 0.3159250936420387, 0.31176749902806655, 0.3076570821633897, 0.30359300767299824, 0.2995744688802595, 0.2956006864527758, 0.2916709071298629, 0.28778440252570836, 0.28394046800276895, 0.28013842161042846, 0.27637760308434534, 0.27265737290229586, 0.2689771113926577, 0.2653362178919829, 0.2617341099483942, 0.258170222567789, 0.2546440075000683, 0.2511549325628212, 0.24770248100008452, 0.24428615087398076, 0.24090545448719003, 0.2375599178343678, 0.23424908008075318, 0.23097249306633394, 0.22772972083405452, 0.22452033918065584, 0.22134393522883067, 0.2182001070194739, 0.21508846312288088, 0.2120086222678318, 0.20896021298756384, 0.20594287328170113, 0.20295625029327213, 0.19999999999999873, 0.19707378691909472, 0.194177283824857, 0.19131017147838003, 0.1884721383687621, 0.18566288046521384, 0.1828821009795123, 0.18012951013827838, 0.17740482496458598, 0.1747077690684421, 0.17203807244569957, 0.16939547128499355, 0.16677970778231554, 0.1641905299628572, 0.16162769150978284, 0.1590909515996023, 0.15658007474383817, 0.1540948306366977, 0.15163499400847225, 0.1492003444844061, 0.1467906664487888, 0.14440574891403646, 0.1420453853945418, 0.1397093737850852, 0.13739751624360586, 0.13510961907814534, 0.13284549263778722, 0.13060495120741966, 0.1283878129061613, 0.1261938995892985, 0.12402303675358595, 0.12187505344577387, 0.11974978217422994, 0.11764705882352877, 0.11556672257189271, 0.1135086158113674, 0.11147258407062499, 0.10945847594029179, 0.10746614300070201, 0.10549543975198239, 0.10354622354638077, 0.10161835452274937, 0.09971169554310577, 0.09782611213118841, 0.09596147241293695, 0.09411764705882308, 0.09229450922796456, 0.09049193451395887, 0.08870980089237201, 0.0869479886698239, 0.08520638043461404, 0.08348486100883157, 0.08178331740189904, 0.08010163876549758, 0.07843971634982838, 0.07679744346116169, 0.07517471542063181, 0.07357142952423346, 0.07198748500398144, 0.07042278299019222, 0.0688772264748524, 0.06735072027603661, 0.06584317100334136, 0.06435448702430169, 0.06288457843175832, 0.06143335701214636, 0.06000073621467361, 0.05858663112136431, 0.05719095841793631, 0.05581363636549119, 0.054454584772986814, 0.05311372497047295, 0.05179097978306402, 0.05048627350562718, 0.04919953187816517, 0.04793068206187323, 0.046679652615848055, 0.04544637347443348, 0.04423077592518099, 0.043032792587409, 0.041852357391343964, 0.040689405557826186, 0.03954387357856404, 0.038415699196923114, 0.03730482138923363, 0.036211180346602534, 0.035134717457217635, 0.03407537528912874, 0.03303309757349371, 0.03200782918827927, 0.03099951614239982, 0.0300081055602891, 0.029033545666887872, 0.028075785773040707, 0.02713477626129046, 0.026210468572059997, 0.025302815190212602, 0.024411769631980884, 0.023537286432256166, 0.022679321132229036, 0.02183783026737318, 0.021012771355764848, 0.020204102886728692, 0.019411784309804836, 0.018635776024027995, 0.01787603936751292, 0.0171325366073386, 0.016405230929725456, 0.0156940864304993, 0.014999068105835622, 0.014320141843278122, 0.013657274413026776, 0.013010433459490267, 0.012379587493095756, 0.0117647058823529, 0.011165758846166551, 0.010582717446393497, 0.01001555358063877, 0.009464239975287225, 0.008928750178766265, 0.008409058555036264, 0.00790514027730349, 0.007416971321952959, 0.006944528462698107, 0.006487789264942312, 0.006046732080350448, 0.005621336041626401, 0.005211581057494419, 0.004817447807880737, 0.004438917739292725, 0.004075973060393756, 0.003728596737769929, 0.0033967724918884112, 0.0030804847932421886, 0.002779718858682001, 0.0024944606479309073, 0.0022246968602822603, 0.0019704149314765385, 0.001731603030756479, 0.001508250058100069, 0.0013003456416276205, 0.001107880135183148, 0.0009308446160880557, 0.0007692308830661299, 0.0006230314543387294, 0.0004922395658889522, 0.0003768491698936671, 0.00027685493332363365, 0.00019225223670882308, 0.00012303717307138307, 0.00006920654702224915, 0.00003075787402306851, 0.000007689379813213826, 0]

  const valsCurveCircleBigUp = [0, 0.08847462096218382, 0.12499903882752314, 0.1529411764705879, 0.17642700986983487, 0.1970563847278602, 0.215650620939098, 0.23269809724151794, 0.24851732576870328, 0.26332975630116884, 0.27729677693590055, 0.2905403363449635, 0.3031552641582378, 0.31521704257425176, 0.32678692793724906, 0.3379154497963541, 0.34864487483753454, 0.35901098714229973, 0.3690444033260728, 0.3787715630333224, 0.3882154877102607, 0.3973963706836355, 0.4063320422584658, 0.41503834075702717, 0.4235294117647052, 0.4318179518734354, 0.4399154090158473, 0.44783214848645286, 0.45557759157513983, 0.46316033214408353, 0.47058823529411686, 0.4778685213755398, 0.4850078379212637, 0.4920123215606224, 0.49888765156985804, 0.5056390964010825, 0.5122715542841696, 0.5187895887998668, 0.5251974601657468, 0.5314991528506589, 0.5376984000314535, 0.5437987053228451, 0.5498033621434308, 0.555715471025091, 0.5615379551268618, 0.5672735741760553, 0.5729249370274399, 0.5784945130045018, 0.5839846421642746, 0.5893975446081842, 0.5947353289452187, 0.5999999999999991, 0.6051934658466006, 0.6103175442389336, 0.6153739684998588, 0.6203643929237784, 0.6252903977410107, 0.630153493686685, 0.6349551262120491, 0.6396966793718595, 0.6443794794178415, 0.6490047981249704, 0.6535738558744981, 0.6580878245151518, 0.6625478300217362, 0.6669549549684284, 0.6713102408323334, 0.6756146901413504, 0.679869268479037, 0.6840749063579581, 0.6882325009719301, 0.6923429178366071, 0.6964069923269985, 0.7004255311197373, 0.7043993135472212, 0.708329092870134, 0.7122155974742886, 0.7160595319972279, 0.7198615783895685, 0.7236223969156518, 0.7273426270977011, 0.7310228886073393, 0.7346637821080142, 0.7382658900516029, 0.7418297774322081, 0.7453559924999289, 0.748845067437176, 0.7522975189999126, 0.7557138491260165, 0.7590945455128074, 0.7624400821656295, 0.7657509199192442, 0.7690275069336635, 0.7722702791659428, 0.7754796608193417, 0.7786560647711668, 0.7817998929805237, 0.7849115368771167, 0.7879913777321658, 0.7910397870124337, 0.7940571267182965, 0.7970437497067255, 0.7999999999999989, 0.8029262130809031, 0.8058227161751408, 0.8086898285216177, 0.8115278616312358, 0.8143371195347839, 0.8171178990204855, 0.8198704898617195, 0.8225951750354119, 0.8252922309315558, 0.8279619275542984, 0.8306045287150043, 0.8332202922176823, 0.8358094700371407, 0.838372308490215, 0.8409090484003958, 0.8434199252561598, 0.8459051693633003, 0.8483650059915258, 0.850799655515592, 0.8532093335512092, 0.8555942510859617, 0.8579546146054563, 0.8602906262149129, 0.8626024837563924, 0.8648903809218529, 0.867154507362211, 0.8693950487925786, 0.871612187093837, 0.8738061004106998, 0.8759769632464124, 0.8781249465542244, 0.8802502178257684, 0.8823529411764696, 0.8844332774281056, 0.8864913841886309, 0.8885274159293733, 0.8905415240597065, 0.8925338569992964, 0.894504560248016, 0.8964537764536178, 0.8983816454772491, 0.9002883044568927, 0.90217388786881, 0.9040385275870615, 0.9058823529411755, 0.907705490772034, 0.9095080654860397, 0.9112901991076265, 0.9130520113301748, 0.9147936195653846, 0.9165151389911671, 0.9182166825980996, 0.9198983612345011, 0.9215602836501703, 0.923202556538837, 0.924825284579367, 0.9264285704757652, 0.9280125149960173, 0.9295772170098066, 0.9311227735251464, 0.9326492797239622, 0.9341568289966574, 0.9356455129756972, 0.9371154215682405, 0.9385666429878525, 0.9399992637853253, 0.9414133688786346, 0.9428090415820625, 0.9441863636345077, 0.9455454152270122, 0.9468862750295259, 0.948209020216935, 0.9495137264943718, 0.9508004681218337, 0.9520693179381258, 0.953320347384151, 0.9545536265255655, 0.9557692240748181, 0.9569672074125901, 0.958147642608655, 0.9593105944421729, 0.9604561264214351, 0.961584300803076, 0.9626951786107656, 0.9637888196533967, 0.9648652825427815, 0.9659246247108705, 0.9669669024265054, 0.96799217081172, 0.9690004838575994, 0.96999189443971, 0.9709664543331114, 0.9719242142269585, 0.9728652237387088, 0.9737895314279392, 0.9746971848097866, 0.9755882303680183, 0.9764627135677431, 0.9773206788677703, 0.978162169732626, 0.9789872286442345, 0.9797958971132706, 0.9805882156901945, 0.9813642239759713, 0.9821239606324864, 0.9828674633926608, 0.983594769070274, 0.9843059135695001, 0.9850009318941638, 0.9856798581567214, 0.9863427255869727, 0.9869895665405092, 0.9876204125069037, 0.9882352941176467, 0.988834241153833, 0.9894172825536061, 0.9899844464193608, 0.9905357600247123, 0.9910712498212333, 0.9915909414449632, 0.9920948597226961, 0.9925830286780466, 0.9930554715373016, 0.9935122107350574, 0.9939532679196492, 0.9943786639583733, 0.9947884189425052, 0.9951825521921189, 0.9955610822607069, 0.995924026939606, 0.9962714032622298, 0.9966032275081113, 0.9969195152067575, 0.9972202811413178, 0.9975055393520689, 0.9977753031397175, 0.9980295850685234, 0.9982683969692434, 0.9984917499418998, 0.9986996543583723, 0.9988921198648167, 0.9990691553839118, 0.9992307691169338, 0.9993769685456612, 0.9995077604341109, 0.9996231508301062, 0.9997231450666764, 0.9998077477632911, 0.9998769628269285, 0.9999307934529778, 0.9999692421259769, 0.9999923106201868, 1]
  const valsCurveCircleBigDown = [1, 0.9999923106201868, 0.9999692421259769, 0.9999307934529778, 0.9998769628269285, 0.9998077477632911, 0.9997231450666764, 0.9996231508301062, 0.9995077604341109, 0.9993769685456612, 0.9992307691169338, 0.9990691553839118, 0.9988921198648167, 0.9986996543583723, 0.9984917499418998, 0.9982683969692434, 0.9980295850685234, 0.9977753031397175, 0.9975055393520689, 0.9972202811413178, 0.9969195152067575, 0.9966032275081113, 0.9962714032622298, 0.995924026939606, 0.9955610822607069, 0.9951825521921189, 0.9947884189425052, 0.9943786639583733, 0.9939532679196492, 0.9935122107350574, 0.9930554715373016, 0.9925830286780466, 0.9920948597226961, 0.9915909414449632, 0.9910712498212333, 0.9905357600247123, 0.9899844464193608, 0.9894172825536061, 0.988834241153833, 0.9882352941176467, 0.9876204125069037, 0.9869895665405092, 0.9863427255869727, 0.9856798581567214, 0.9850009318941638, 0.9843059135695001, 0.983594769070274, 0.9828674633926608, 0.9821239606324864, 0.9813642239759713, 0.9805882156901945, 0.9797958971132706, 0.9789872286442345, 0.978162169732626, 0.9773206788677703, 0.9764627135677431, 0.9755882303680183, 0.9746971848097866, 0.9737895314279392, 0.9728652237387088, 0.9719242142269585, 0.9709664543331114, 0.96999189443971, 0.9690004838575994, 0.96799217081172, 0.9669669024265054, 0.9659246247108705, 0.9648652825427815, 0.9637888196533967, 0.9626951786107656, 0.961584300803076, 0.9604561264214351, 0.9593105944421729, 0.958147642608655, 0.9569672074125901, 0.9557692240748181, 0.9545536265255655, 0.953320347384151, 0.9520693179381258, 0.9508004681218337, 0.9495137264943718, 0.948209020216935, 0.9468862750295259, 0.9455454152270122, 0.9441863636345077, 0.9428090415820625, 0.9414133688786346, 0.9399992637853253, 0.9385666429878525, 0.9371154215682405, 0.9356455129756972, 0.9341568289966574, 0.9326492797239622, 0.9311227735251464, 0.9295772170098066, 0.9280125149960173, 0.9264285704757652, 0.924825284579367, 0.923202556538837, 0.9215602836501703, 0.9198983612345011, 0.9182166825980996, 0.9165151389911671, 0.9147936195653846, 0.9130520113301748, 0.9112901991076265, 0.9095080654860397, 0.907705490772034, 0.9058823529411755, 0.9040385275870615, 0.90217388786881, 0.9002883044568927, 0.8983816454772491, 0.8964537764536178, 0.894504560248016, 0.8925338569992964, 0.8905415240597065, 0.8885274159293733, 0.8864913841886309, 0.8844332774281056, 0.8823529411764696, 0.8802502178257684, 0.8781249465542244, 0.8759769632464124, 0.8738061004106998, 0.871612187093837, 0.8693950487925786, 0.867154507362211, 0.8648903809218529, 0.8626024837563924, 0.8602906262149129, 0.8579546146054563, 0.8555942510859617, 0.8532093335512092, 0.850799655515592, 0.8483650059915258, 0.8459051693633003, 0.8434199252561598, 0.8409090484003958, 0.838372308490215, 0.8358094700371407, 0.8332202922176823, 0.8306045287150043, 0.8279619275542984, 0.8252922309315558, 0.8225951750354119, 0.8198704898617195, 0.8171178990204855, 0.8143371195347839, 0.8115278616312358, 0.8086898285216177, 0.8058227161751408, 0.8029262130809031, 0.7999999999999989, 0.7970437497067255, 0.7940571267182965, 0.7910397870124337, 0.7879913777321658, 0.7849115368771167, 0.7817998929805237, 0.7786560647711668, 0.7754796608193417, 0.7722702791659428, 0.7690275069336635, 0.7657509199192442, 0.7624400821656295, 0.7590945455128074, 0.7557138491260165, 0.7522975189999126, 0.748845067437176, 0.7453559924999289, 0.7418297774322081, 0.7382658900516029, 0.7346637821080142, 0.7310228886073393, 0.7273426270977011, 0.7236223969156518, 0.7198615783895685, 0.7160595319972279, 0.7122155974742886, 0.708329092870134, 0.7043993135472212, 0.7004255311197373, 0.6964069923269985, 0.6923429178366071, 0.6882325009719301, 0.6840749063579581, 0.679869268479037, 0.6756146901413504, 0.6713102408323334, 0.6669549549684284, 0.6625478300217362, 0.6580878245151518, 0.6535738558744981, 0.6490047981249704, 0.6443794794178415, 0.6396966793718595, 0.6349551262120491, 0.630153493686685, 0.6252903977410107, 0.6203643929237784, 0.6153739684998588, 0.6103175442389336, 0.6051934658466006, 0.5999999999999991, 0.5947353289452187, 0.5893975446081842, 0.5839846421642746, 0.5784945130045018, 0.5729249370274399, 0.5672735741760553, 0.5615379551268618, 0.555715471025091, 0.5498033621434308, 0.5437987053228451, 0.5376984000314535, 0.5314991528506589, 0.5251974601657468, 0.5187895887998668, 0.5122715542841696, 0.5056390964010825, 0.49888765156985804, 0.4920123215606224, 0.4850078379212637, 0.4778685213755398, 0.47058823529411686, 0.46316033214408353, 0.45557759157513983, 0.44783214848645286, 0.4399154090158473, 0.4318179518734354, 0.4235294117647052, 0.41503834075702717, 0.4063320422584658, 0.3973963706836355, 0.3882154877102607, 0.3787715630333224, 0.3690444033260728, 0.35901098714229973, 0.34864487483753454, 0.3379154497963541, 0.32678692793724906, 0.31521704257425176, 0.3031552641582378, 0.2905403363449635, 0.27729677693590055, 0.26332975630116884, 0.24851732576870328, 0.23269809724151794, 0.215650620939098, 0.1970563847278602, 0.17642700986983487, 0.1529411764705879, 0.12499903882752314, 0.08847462096218382, 0]

  const valsCurveRootMidUp = [0.5, 0.5442373104810919, 0.5624995194137615, 0.576470588235294, 0.5882135049349174, 0.5985281923639301, 0.607825310469549, 0.616349048620759, 0.6242586628843516, 0.6316648781505845, 0.6386483884679502, 0.6452701681724817, 0.6515776320791189, 0.6576085212871259, 0.6633934639686245, 0.6689577248981771, 0.6743224374187673, 0.6795054935711499, 0.6845222016630363, 0.6893857815166612, 0.6941077438551304, 0.6986981853418177, 0.7031660211292329, 0.7075191703785135, 0.7117647058823526, 0.7159089759367177, 0.7199577045079236, 0.7239160742432265, 0.7277887957875699, 0.7315801660720418, 0.7352941176470584, 0.7389342606877699, 0.7425039189606318, 0.7460061607803112, 0.749443825784929, 0.7528195482005413, 0.7561357771420848, 0.7593947943999334, 0.7625987300828734, 0.7657495764253295, 0.7688492000157268, 0.7718993526614226, 0.7749016810717154, 0.7778577355125456, 0.7807689775634309, 0.7836367870880276, 0.7864624685137199, 0.7892472565022509, 0.7919923210821374, 0.7946987723040921, 0.7973676644726093, 0.7999999999999996, 0.8025967329233004, 0.8051587721194668, 0.8076869842499295, 0.8101821964618892, 0.8126451988705053, 0.8150767468433425, 0.8174775631060245, 0.8198483396859297, 0.8221897397089207, 0.8245023990624851, 0.8267869279372491, 0.8290439122575759, 0.8312739150108681, 0.8334774774842142, 0.8356551204161666, 0.8378073450706752, 0.8399346342395184, 0.842037453178979, 0.8441162504859651, 0.8461714589183036, 0.8482034961634992, 0.8502127655598686, 0.8521996567736105, 0.854164546435067, 0.8561077987371444, 0.858029765998614, 0.8599307891947843, 0.8618111984578258, 0.8636713135488505, 0.8655114443036697, 0.8673318910540071, 0.8691329450258014, 0.870914888716104, 0.8726779962499644, 0.874422533718588, 0.8761487594999563, 0.8778569245630082, 0.8795472727564038, 0.8812200410828148, 0.882875459959622, 0.8845137534668317, 0.8861351395829714, 0.8877398304096709, 0.8893280323855834, 0.8908999464902618, 0.8924557684385583, 0.8939956888660829, 0.8955198935062169, 0.8970285633591483, 0.8985218748533628, 0.8999999999999995, 0.9014631065404515, 0.9029113580875704, 0.9043449142608089, 0.9057639308156179, 0.907168559767392, 0.9085589495102427, 0.9099352449308598, 0.911297587517706, 0.9126461154657779, 0.9139809637771492, 0.9153022643575022, 0.9166101461088412, 0.9179047350185703, 0.9191861542451075, 0.9204545242001979, 0.9217099626280799, 0.9229525846816502, 0.9241825029957629, 0.925399827757796, 0.9266046667756046, 0.9277971255429809, 0.9289773073027281, 0.9301453131074564, 0.9313012418781962, 0.9324451904609264, 0.9335772536811056, 0.9346975243962893, 0.9358060935469186, 0.9369030502053499, 0.9379884816232062, 0.9390624732771122, 0.9401251089128841, 0.9411764705882348, 0.9422166387140528, 0.9432456920943155, 0.9442637079646867, 0.9452707620298533, 0.9462669284996482, 0.947252280124008, 0.9482268882268089, 0.9491908227386245, 0.9501441522284464, 0.951086943934405, 0.9520192637935307, 0.9529411764705877, 0.953852745386017, 0.9547540327430198, 0.9556450995538133, 0.9565260056650874, 0.9573968097826924, 0.9582575694955835, 0.9591083412990498, 0.9599491806172505, 0.9607801418250852, 0.9616012782694185, 0.9624126422896835, 0.9632142852378827, 0.9640062574980086, 0.9647886085049033, 0.9655613867625732, 0.9663246398619811, 0.9670784144983287, 0.9678227564878485, 0.9685577107841202, 0.9692833214939263, 0.9699996318926627, 0.9707066844393173, 0.9714045207910312, 0.9720931818172538, 0.9727727076135061, 0.973443137514763, 0.9741045101084675, 0.9747568632471859, 0.9754002340609169, 0.9760346589690629, 0.9766601736920755, 0.9772768132627827, 0.9778846120374091, 0.9784836037062951, 0.9790738213043275, 0.9796552972210865, 0.9802280632107175, 0.980792150401538, 0.9813475893053828, 0.9818944098266984, 0.9824326412713907, 0.9829623123554352, 0.9834834512132526, 0.98399608540586, 0.9845002419287997, 0.9849959472198551, 0.9854832271665557, 0.9859621071134792, 0.9864326118693544, 0.9868947657139696, 0.9873485924048933, 0.9877941151840092, 0.9882313567838715, 0.9886603394338851, 0.989081084866313, 0.9894936143221172, 0.9898979485566353, 0.9902941078450973, 0.9906821119879856, 0.9910619803162433, 0.9914337316963304, 0.991797384535137, 0.99215295678475, 0.992500465947082, 0.9928399290783607, 0.9931713627934864, 0.9934947832702545, 0.9938102062534518, 0.9941176470588233, 0.9944171205769166, 0.994708641276803, 0.9949922232096804, 0.9952678800123562, 0.9955356249106166, 0.9957954707224816, 0.996047429861348, 0.9962915143390233, 0.9965277357686508, 0.9967561053675287, 0.9969766339598246, 0.9971893319791867, 0.9973942094712527, 0.9975912760960595, 0.9977805411303535, 0.9979620134698031, 0.998135701631115, 0.9983016137540557, 0.9984597576033787, 0.9986101405706589, 0.9987527696760344, 0.9988876515698588, 0.9990147925342616, 0.9991341984846217, 0.9992458749709499, 0.9993498271791861, 0.9994460599324084, 0.999534577691956, 0.9996153845584669, 0.9996884842728306, 0.9997538802170555, 0.9998115754150532, 0.9998615725333382, 0.9999038738816455, 0.9999384814134642, 0.9999653967264889, 0.9999846210629885, 0.9999961553100933, 1]
  const valsCurveRootMidDown = [1, 0.9999961553100933, 0.9999846210629885, 0.9999653967264889, 0.9999384814134642, 0.9999038738816455, 0.9998615725333382, 0.9998115754150532, 0.9997538802170555, 0.9996884842728306, 0.9996153845584669, 0.999534577691956, 0.9994460599324084, 0.9993498271791861, 0.9992458749709499, 0.9991341984846217, 0.9990147925342616, 0.9988876515698588, 0.9987527696760344, 0.9986101405706589, 0.9984597576033787, 0.9983016137540557, 0.998135701631115, 0.9979620134698031, 0.9977805411303535, 0.9975912760960595, 0.9973942094712527, 0.9971893319791867, 0.9969766339598246, 0.9967561053675287, 0.9965277357686508, 0.9962915143390233, 0.996047429861348, 0.9957954707224816, 0.9955356249106166, 0.9952678800123562, 0.9949922232096804, 0.994708641276803, 0.9944171205769166, 0.9941176470588233, 0.9938102062534518, 0.9934947832702545, 0.9931713627934864, 0.9928399290783607, 0.992500465947082, 0.99215295678475, 0.991797384535137, 0.9914337316963304, 0.9910619803162433, 0.9906821119879856, 0.9902941078450973, 0.9898979485566353, 0.9894936143221172, 0.989081084866313, 0.9886603394338851, 0.9882313567838715, 0.9877941151840092, 0.9873485924048933, 0.9868947657139696, 0.9864326118693544, 0.9859621071134792, 0.9854832271665557, 0.9849959472198551, 0.9845002419287997, 0.98399608540586, 0.9834834512132526, 0.9829623123554352, 0.9824326412713907, 0.9818944098266984, 0.9813475893053828, 0.980792150401538, 0.9802280632107175, 0.9796552972210865, 0.9790738213043275, 0.9784836037062951, 0.9778846120374091, 0.9772768132627827, 0.9766601736920755, 0.9760346589690629, 0.9754002340609169, 0.9747568632471859, 0.9741045101084675, 0.973443137514763, 0.9727727076135061, 0.9720931818172538, 0.9714045207910312, 0.9707066844393173, 0.9699996318926627, 0.9692833214939263, 0.9685577107841202, 0.9678227564878485, 0.9670784144983287, 0.9663246398619811, 0.9655613867625732, 0.9647886085049033, 0.9640062574980086, 0.9632142852378827, 0.9624126422896835, 0.9616012782694185, 0.9607801418250852, 0.9599491806172505, 0.9591083412990498, 0.9582575694955835, 0.9573968097826924, 0.9565260056650874, 0.9556450995538133, 0.9547540327430198, 0.953852745386017, 0.9529411764705877, 0.9520192637935307, 0.951086943934405, 0.9501441522284464, 0.9491908227386245, 0.9482268882268089, 0.947252280124008, 0.9462669284996482, 0.9452707620298533, 0.9442637079646867, 0.9432456920943155, 0.9422166387140528, 0.9411764705882348, 0.9401251089128841, 0.9390624732771122, 0.9379884816232062, 0.9369030502053499, 0.9358060935469186, 0.9346975243962893, 0.9335772536811056, 0.9324451904609264, 0.9313012418781962, 0.9301453131074564, 0.9289773073027281, 0.9277971255429809, 0.9266046667756046, 0.925399827757796, 0.9241825029957629, 0.9229525846816502, 0.9217099626280799, 0.9204545242001979, 0.9191861542451075, 0.9179047350185703, 0.9166101461088412, 0.9153022643575022, 0.9139809637771492, 0.9126461154657779, 0.911297587517706, 0.9099352449308598, 0.9085589495102427, 0.907168559767392, 0.9057639308156179, 0.9043449142608089, 0.9029113580875704, 0.9014631065404515, 0.8999999999999995, 0.8985218748533628, 0.8970285633591483, 0.8955198935062169, 0.8939956888660829, 0.8924557684385583, 0.8908999464902618, 0.8893280323855834, 0.8877398304096709, 0.8861351395829714, 0.8845137534668317, 0.882875459959622, 0.8812200410828148, 0.8795472727564038, 0.8778569245630082, 0.8761487594999563, 0.874422533718588, 0.8726779962499644, 0.870914888716104, 0.8691329450258014, 0.8673318910540071, 0.8655114443036697, 0.8636713135488505, 0.8618111984578258, 0.8599307891947843, 0.858029765998614, 0.8561077987371444, 0.854164546435067, 0.8521996567736105, 0.8502127655598686, 0.8482034961634992, 0.8461714589183036, 0.8441162504859651, 0.842037453178979, 0.8399346342395184, 0.8378073450706752, 0.8356551204161666, 0.8334774774842142, 0.8312739150108681, 0.8290439122575759, 0.8267869279372491, 0.8245023990624851, 0.8221897397089207, 0.8198483396859297, 0.8174775631060245, 0.8150767468433425, 0.8126451988705053, 0.8101821964618892, 0.8076869842499295, 0.8051587721194668, 0.8025967329233004, 0.7999999999999996, 0.7973676644726093, 0.7946987723040921, 0.7919923210821374, 0.7892472565022509, 0.7864624685137199, 0.7836367870880276, 0.7807689775634309, 0.7778577355125456, 0.7749016810717154, 0.7718993526614226, 0.7688492000157268, 0.7657495764253295, 0.7625987300828734, 0.7593947943999334, 0.7561357771420848, 0.7528195482005413, 0.749443825784929, 0.7460061607803112, 0.7425039189606318, 0.7389342606877699, 0.7352941176470584, 0.7315801660720418, 0.7277887957875699, 0.7239160742432265, 0.7199577045079236, 0.7159089759367177, 0.7117647058823526, 0.7075191703785135, 0.7031660211292329, 0.6986981853418177, 0.6941077438551304, 0.6893857815166612, 0.6845222016630363, 0.6795054935711499, 0.6743224374187673, 0.6689577248981771, 0.6633934639686245, 0.6576085212871259, 0.6515776320791189, 0.6452701681724817, 0.6386483884679502, 0.6316648781505845, 0.6242586628843516, 0.616349048620759, 0.607825310469549, 0.5985281923639301, 0.5882135049349174, 0.576470588235294, 0.5624995194137615, 0.5442373104810919, 0.5]

  const valsCurveGrayUp = [0, 0.049067674327418015, 0.0980171403295606, 0.14673047445536175, 0.19509032201612825, 0.24298017990326387, 0.29028467725446233, 0.33688985339222005, 0.3826834323650898, 0.4275550934302821, 0.47139673682599764, 0.5141027441932218, 0.5555702330196022, 0.5956993044924334, 0.6343932841636455, 0.6715589548470184, 0.7071067811865475, 0.7409511253549591, 0.7730104533627369, 0.8032075314806449, 0.8314696123025452, 0.8577286100002721, 0.881921264348355, 0.9039892931234433, 0.9238795325112867, 0.9415440651830208, 0.9569403357322089, 0.970031253194544, 0.9807852804032304, 0.989176509964781, 0.9951847266721969, 0.9987954562051724, 1, 0.9999751916296507, 0.9999007677495129, 0.999776732052257, 0.9996030906921302, 0.9993798522846508, 0.9991070279061809, 0.9987846310933769, 0.998412677842518, 0.9979911866087121, 0.9975201783049804, 0.99699967630122, 0.9964297064230436, 0.995810296950499, 0.9951414786166655, 0.9944232846061286, 0.9936557505533347, 0.9928389145408214, 0.9919728170973298, 0.9910575011957918, 0.9900930122511994, 0.9890793981183503, 0.9880167090894743, 0.9869049978917371, 0.9857443196846253, 0.9845347320572082, 0.9832762950252816, 0.9819690710283894, 0.9806131249267257, 0.9792085239979166, 0.9777553379336822, 0.9762536388363786, 0.9747035012154205, 0.9731050019835844, 0.9714582204531921, 0.9697632383321757, 0.9680201397200238, 0.966229011103608, 0.9643899413528927, 0.9625030217165246, 0.9605683458173062, 0.9585860096475498, 0.9565561115643152, 0.9544787522845292, 0.9523540348799885, 0.9501820647722455, 0.9479629497273782, 0.9456967998506421, 0.943383727581008, 0.941023847685583, 0.9386172772539161, 0.936164135692188, 0.9336645447172878, 0.9311186283507725, 0.9285265129127147, 0.9258883270154336, 0.9232042015571147, 0.9204742697153152, 0.9176986669403552, 0.9148775309485979, 0.9120110017156163, 0.9090992214692483, 0.9061423346825389, 0.9031404880665733, 0.9000938305631968, 0.8970025133376245, 0.8938666897709417, 0.8906865154524932, 0.8874621481721635, 0.884193747912548, 0.8808814768410147, 0.8775254993016587, 0.8741259818071471, 0.870683093030458, 0.8671970037965111, 0.863667887073692, 0.8600959179652701, 0.8564812737007104, 0.85282413362688, 0.8491246791991497, 0.8453830939723906, 0.8415995635918666, 0.8377742757840237, 0.833907420347175, 0.8299991891420841, 0.8260497760824452, 0.8220593771252621, 0.8180281902611252, 0.8139564155043877, 0.8098442548832419, 0.8056919124296951, 0.8014995941694462, 0.797267508111663, 0.7929958642386623, 0.7886848744954904, 0.7843347527794076, 0.7799457149292749, 0.7755179787148454, 0.7710517638259587, 0.7665472918616408, 0.7620047863191094, 0.7574244725826837, 0.7528065779126031, 0.7481513314337497, 0.743458964124281, 0.7387297088041691, 0.7339638001236489, 0.7291614745515758, 0.7243229703636922, 0.7194485276308057, 0.7145383882068777, 0.7095927957170226, 0.7046119955454205, 0.6995962348231424, 0.694545762415887, 0.6894608289116343, 0.6843416866082115, 0.6791885895007749, 0.6740017932692074, 0.6687815552654326, 0.6635281345006462, 0.6582417916324638, 0.6529227889519886, 0.6475713903707978, 0.642187861407847, 0.6367724691762967, 0.6313254823702592, 0.6258471712514663, 0.6203378076358603, 0.614797664880107, 0.6092270178680332, 0.6036261429969871, 0.5979953181641249, 0.5923348227526222, 0.5866449376178121, 0.5809259450732498, 0.5751781288767056, 0.5694017742160854, 0.5635971676952802, 0.5577645973199471, 0.5519043524832177, 0.5460167239513406, 0.5401020038492539, 0.5341604856460913, 0.5281924641406208, 0.5221982354466179, 0.5161780969781734, 0.5101323474349367, 0.5040612867872953, 0.497965216261491, 0.4918444383246744, 0.48569925666989733, 0.4795299762010444, 0.4733369030177049, 0.46712034439998523, 0.46088060879326226, 0.45461800579287975, 0.4483328461287867, 0.44202544165012053, 0.4356961053097337, 0.4293451511486662, 0.42297289428056384, 0.4165796508760433, 0.41016573814700485, 0.4037314743308933, 0.39727717867490775, 0.39080317142016235, 0.3843097737857964, 0.3777973079530364, 0.37126609704921093, 0.3647164651317179, 0.3581487371719459, 0.35156323903915, 0.34496029748428336, 0.3383402401237851, 0.33170339542332467, 0.32505009268150453, 0.31838066201352166, 0.3116954343347882, 0.30499474134451227, 0.29827891550924057, 0.29154829004636207, 0.2848031989075752, 0.2780439767623179, 0.27127095898116266, 0.2644844816191766, 0.25768488139924717, 0.25087249569537534, 0.24404766251593607, 0.2372107204869076, 0.23036200883506977, 0.2235018673711727, 0.21663063647307654, 0.20974865706886306, 0.2028562706199199, 0.19595381910399823, 0.1890416449982451, 0.18212009126221085, 0.17518950132083239, 0.16825021904739368, 0.161302588746464, 0.15434695513681446, 0.14738366333431419, 0.14041305883480704, 0.13343548749696893, 0.12645129552514767, 0.11946082945218531, 0.11246443612222433, 0.10546246267349844, 0.09845525652110863, 0.09144316533978557, 0.08442653704663915, 0.07740571978389599, 0.0703810619016257, 0.06335291194045693, 0.05632161861428389, 0.04928753079296433, 0.042250997485009725, 0.03521236782026864, 0.028171991032604017, 0.02113021644256536, 0.014087393440056564, 0.007043871467000329, 0]
  const valsCurveGrayDown = [0, 0.049067674327418015, 0.0980171403295606, 0.14673047445536175, 0.19509032201612825, 0.24298017990326387, 0.29028467725446233, 0.33688985339222005, 0.3826834323650898, 0.4275550934302821, 0.47139673682599764, 0.5141027441932218, 0.5555702330196022, 0.5956993044924334, 0.6343932841636455, 0.6715589548470184, 0.7071067811865475, 0.7409511253549591, 0.7730104533627369, 0.8032075314806449, 0.8314696123025452, 0.8577286100002721, 0.881921264348355, 0.9039892931234433, 0.9238795325112867, 0.9415440651830208, 0.9569403357322089, 0.970031253194544, 0.9807852804032304, 0.989176509964781, 0.9951847266721969, 0.9987954562051724, 1, 0.9999751916296507, 0.9999007677495129, 0.999776732052257, 0.9996030906921302, 0.9993798522846508, 0.9991070279061809, 0.9987846310933769, 0.998412677842518, 0.9979911866087121, 0.9975201783049804, 0.99699967630122, 0.9964297064230436, 0.995810296950499, 0.9951414786166655, 0.9944232846061286, 0.9936557505533347, 0.9928389145408214, 0.9919728170973298, 0.9910575011957918, 0.9900930122511994, 0.9890793981183503, 0.9880167090894743, 0.9869049978917371, 0.9857443196846253, 0.9845347320572082, 0.9832762950252816, 0.9819690710283894, 0.9806131249267257, 0.9792085239979166, 0.9777553379336822, 0.9762536388363786, 0.9747035012154205, 0.9731050019835844, 0.9714582204531921, 0.9697632383321757, 0.9680201397200238, 0.966229011103608, 0.9643899413528927, 0.9625030217165246, 0.9605683458173062, 0.9585860096475498, 0.9565561115643152, 0.9544787522845292, 0.9523540348799885, 0.9501820647722455, 0.9479629497273782, 0.9456967998506421, 0.943383727581008, 0.941023847685583, 0.9386172772539161, 0.936164135692188, 0.9336645447172878, 0.9311186283507725, 0.9285265129127147, 0.9258883270154336, 0.9232042015571147, 0.9204742697153152, 0.9176986669403552, 0.9148775309485979, 0.9120110017156163, 0.9090992214692483, 0.9061423346825389, 0.9031404880665733, 0.9000938305631968, 0.8970025133376245, 0.8938666897709417, 0.8906865154524932, 0.8874621481721635, 0.884193747912548, 0.8808814768410147, 0.8775254993016587, 0.8741259818071471, 0.870683093030458, 0.8671970037965111, 0.863667887073692, 0.8600959179652701, 0.8564812737007104, 0.85282413362688, 0.8491246791991497, 0.8453830939723906, 0.8415995635918666, 0.8377742757840237, 0.833907420347175, 0.8299991891420841, 0.8260497760824452, 0.8220593771252621, 0.8180281902611252, 0.8139564155043877, 0.8098442548832419, 0.8056919124296951, 0.8014995941694462, 0.797267508111663, 0.7929958642386623, 0.7886848744954904, 0.7843347527794076, 0.7799457149292749, 0.7755179787148454, 0.7710517638259587, 0.7665472918616408, 0.7620047863191094, 0.7574244725826837, 0.7528065779126031, 0.7481513314337497, 0.743458964124281, 0.7387297088041691, 0.7339638001236489, 0.7291614745515758, 0.7243229703636922, 0.7194485276308057, 0.7145383882068777, 0.7095927957170226, 0.7046119955454205, 0.6995962348231424, 0.694545762415887, 0.6894608289116343, 0.6843416866082115, 0.6791885895007749, 0.6740017932692074, 0.6687815552654326, 0.6635281345006462, 0.6582417916324638, 0.6529227889519886, 0.6475713903707978, 0.642187861407847, 0.6367724691762967, 0.6313254823702592, 0.6258471712514663, 0.6203378076358603, 0.614797664880107, 0.6092270178680332, 0.6036261429969871, 0.5979953181641249, 0.5923348227526222, 0.5866449376178121, 0.5809259450732498, 0.5751781288767056, 0.5694017742160854, 0.5635971676952802, 0.5577645973199471, 0.5519043524832177, 0.5460167239513406, 0.5401020038492539, 0.5341604856460913, 0.5281924641406208, 0.5221982354466179, 0.5161780969781734, 0.5101323474349367, 0.5040612867872953, 0.497965216261491, 0.4918444383246744, 0.48569925666989733, 0.4795299762010444, 0.4733369030177049, 0.46712034439998523, 0.46088060879326226, 0.45461800579287975, 0.4483328461287867, 0.44202544165012053, 0.4356961053097337, 0.4293451511486662, 0.42297289428056384, 0.4165796508760433, 0.41016573814700485, 0.4037314743308933, 0.39727717867490775, 0.39080317142016235, 0.3843097737857964, 0.3777973079530364, 0.37126609704921093, 0.3647164651317179, 0.3581487371719459, 0.35156323903915, 0.34496029748428336, 0.3383402401237851, 0.33170339542332467, 0.32505009268150453, 0.31838066201352166, 0.3116954343347882, 0.30499474134451227, 0.29827891550924057, 0.29154829004636207, 0.2848031989075752, 0.2780439767623179, 0.27127095898116266, 0.2644844816191766, 0.25768488139924717, 0.25087249569537534, 0.24404766251593607, 0.2372107204869076, 0.23036200883506977, 0.2235018673711727, 0.21663063647307654, 0.20974865706886306, 0.2028562706199199, 0.19595381910399823, 0.1890416449982451, 0.18212009126221085, 0.17518950132083239, 0.16825021904739368, 0.161302588746464, 0.15434695513681446, 0.14738366333431419, 0.14041305883480704, 0.13343548749696893, 0.12645129552514767, 0.11946082945218531, 0.11246443612222433, 0.10546246267349844, 0.09845525652110863, 0.09144316533978557, 0.08442653704663915, 0.07740571978389599, 0.0703810619016257, 0.06335291194045693, 0.05632161861428389, 0.04928753079296433, 0.042250997485009725, 0.03521236782026864, 0.028171991032604017, 0.02113021644256536, 0.014087393440056564, 0.007043871467000329, 0]

  const valsCurveSinFull = [0, 0.012271538285719925, 0.024541228522912288, 0.03680722294135883, 0.049067674327418015, 0.06132073630220858, 0.07356456359966743, 0.0857973123444399, 0.0980171403295606, 0.11022220729388306, 0.1224106751992162, 0.1345807085071262, 0.14673047445536175, 0.15885814333386145, 0.17096188876030122, 0.18303988795514098, 0.19509032201612825, 0.20711137619221856, 0.2191012401568698, 0.23105810828067114, 0.24298017990326387, 0.25486565960451457, 0.2667127574748984, 0.27851968938505306, 0.29028467725446233, 0.3020059493192281, 0.3136817403988915, 0.3253102921622629, 0.33688985339222005, 0.34841868024943456, 0.35989503653498817, 0.3713171939518375, 0.3826834323650898, 0.3939920400610481, 0.40524131400498986, 0.41642956009763715, 0.4275550934302821, 0.43861623853852766, 0.4496113296546066, 0.46053871095824, 0.47139673682599764, 0.4821837720791227, 0.49289819222978404, 0.5035383837257176, 0.5141027441932218, 0.524589682678469, 0.5349976198870972, 0.5453249884220465, 0.5555702330196022, 0.5657318107836131, 0.5758081914178453, 0.5857978574564389, 0.5956993044924334, 0.6055110414043255, 0.6152315905806268, 0.6248594881423863, 0.6343932841636455, 0.6438315428897915, 0.6531728429537768, 0.6624157775901718, 0.6715589548470184, 0.680600997795453, 0.6895405447370668, 0.6983762494089729, 0.7071067811865475, 0.7157308252838187, 0.7242470829514669, 0.7326542716724128, 0.7409511253549591, 0.7491363945234593, 0.7572088465064846, 0.765167265622459, 0.7730104533627369, 0.7807372285720945, 0.7883464276266062, 0.7958369046088836, 0.8032075314806449, 0.8104571982525948, 0.8175848131515837, 0.8245893027850253, 0.8314696123025452, 0.8382247055548381, 0.844853565249707, 0.8513551931052652, 0.8577286100002721, 0.8639728561215867, 0.8700869911087113, 0.8760700941954066, 0.881921264348355, 0.8876396204028539, 0.8932243011955153, 0.8986744656939538, 0.9039892931234433, 0.9091679830905224, 0.9142097557035307, 0.9191138516900578, 0.9238795325112867, 0.9285060804732156, 0.9329927988347388, 0.937339011912575, 0.9415440651830208, 0.9456073253805213, 0.9495281805930367, 0.9533060403541938, 0.9569403357322089, 0.9604305194155658, 0.9637760657954398, 0.9669764710448521, 0.970031253194544, 0.9729399522055602, 0.9757021300385286, 0.9783173707196277, 0.9807852804032304, 0.9831054874312163, 0.9852776423889412, 0.9873014181578584, 0.989176509964781, 0.99090263542778, 0.99247953459871, 0.9939069700023561, 0.9951847266721969, 0.996312612182778, 0.9972904566786902, 0.9981181129001492, 0.9987954562051724, 0.9993223845883495, 0.9996988186962042, 0.9999247018391445, 1, 0.9999235113880168, 0.9996940572530831, 0.9993116726964553, 0.9987764162142612, 0.9980883696885519, 0.9972476383747746, 0.9962543508856719, 0.9951086591716065, 0.9938107384973163, 0.9923607874151029, 0.9907590277344579, 0.9890057044881306, 0.987101085894644, 0.9850454633172632, 0.9828391512194237, 0.9804824871166252, 0.9779758315248003, 0.9753195679051626, 0.9725141026055468, 0.9695598647982466, 0.9664573064143603, 0.9632069020746571, 0.9598091490169693, 0.9562645670201276, 0.9525736983244458, 0.9487371075487713, 0.9447553816041101, 0.9406291296038441, 0.9363589827705495, 0.9319455943394349, 0.9273896394584106, 0.922691815084807, 0.9178528398787554, 0.9128734540932497, 0.9077544194609043, 0.9024965190774269, 0.8971005572818217, 0.891567359533345, 0.8858977722852279, 0.880092662855189, 0.8741529192927533, 0.8680794502434023, 0.861873184809571, 0.8555350724085166, 0.8490660826270794, 0.842467205073358, 0.835739449225322, 0.8288838442763844, 0.821901438977959, 0.8147933014790248, 0.8075605191627243, 0.8002041984800174, 0.7927254647804212, 0.7851254621398553, 0.7774053531856262, 0.7695663189185703, 0.7616095585323882, 0.7535362892301958, 0.7453477460383191, 0.7370451816173642, 0.7286298660705877, 0.7201030867496008, 0.7114661480574334, 0.7027203712489903, 0.6938670942289291, 0.6849076713469913, 0.6758434731908176, 0.6666758863762795, 0.6574063133353583, 0.6480361721016052, 0.6385668960932144, 0.6289999338937424, 0.6193367490305086, 0.6095788197507078, 0.5997276387952729, 0.5897847131705194, 0.5797515639176072, 0.5696297258798569, 0.5594207474679529, 0.5491261904230721, 0.5387476295779733, 0.5282866526160832, 0.5177448598286177, 0.5071238638697727, 0.49642528951002607, 0.4856507733875834, 0.4748019637580109, 0.46388052024208903, 0.45288811357192854, 0.4418264253353865, 0.4306971477188217, 0.41950198324822885, 0.4082426445287903, 0.396920853982887, 0.3855383435866072, 0.374096854604793, 0.3625981373246669, 0.35104395078807754, 0.3394360625224065, 0.3277762482701767, 0.3160662917174045, 0.3043079842207361, 0.2925031245334109, 0.2806535185300931, 0.2687609789306142, 0.256827325022668, 0.24485438238350124, 0.23284398260064146, 0.2207979629917062, 0.2087181663233351, 0.19660644052928852, 0.18446463842775587, 0.17229461743791663, 0.16009823929579745, 0.1478773697694689, 0.13563387837362562, 0.12336963808359294, 0.11108652504880454, 0.09878641830579413, 0.0864711994907457, 0.0741427525516462, 0.061802963460084105, 0.049453719922738996, 0.03709691109260531, 0.024734427279994954, 0.012368159663362913, 0]
  const valsCurveSinFull32 = [0, 0.049067674327418015, 0.0980171403295606, 0.14673047445536175, 0.19509032201612825, 0.24298017990326387, 0.29028467725446233, 0.33688985339222005, 0.3826834323650898, 0.4275550934302821, 0.47139673682599764, 0.5141027441932218, 0.5555702330196022, 0.5956993044924334, 0.6343932841636455, 0.6715589548470184, 0.7071067811865475, 0.7409511253549591, 0.7730104533627369, 0.8032075314806449, 0.8314696123025452, 0.8577286100002721, 0.881921264348355, 0.9039892931234433, 0.9238795325112867, 0.9415440651830208, 0.9569403357322089, 0.970031253194544, 0.9807852804032304, 0.989176509964781, 0.9951847266721969, 0.9987954562051724, 1, 0.9999751916296507, 0.9999007677495129, 0.999776732052257, 0.9996030906921302, 0.9993798522846508, 0.9991070279061809, 0.9987846310933769, 0.998412677842518, 0.9979911866087121, 0.9975201783049804, 0.99699967630122, 0.9964297064230436, 0.995810296950499, 0.9951414786166655, 0.9944232846061286, 0.9936557505533347, 0.9928389145408214, 0.9919728170973298, 0.9910575011957918, 0.9900930122511994, 0.9890793981183503, 0.9880167090894743, 0.9869049978917371, 0.9857443196846253, 0.9845347320572082, 0.9832762950252816, 0.9819690710283894, 0.9806131249267257, 0.9792085239979166, 0.9777553379336822, 0.9762536388363786, 0.9747035012154205, 0.9731050019835844, 0.9714582204531921, 0.9697632383321757, 0.9680201397200238, 0.966229011103608, 0.9643899413528927, 0.9625030217165246, 0.9605683458173062, 0.9585860096475498, 0.9565561115643152, 0.9544787522845292, 0.9523540348799885, 0.9501820647722455, 0.9479629497273782, 0.9456967998506421, 0.943383727581008, 0.941023847685583, 0.9386172772539161, 0.936164135692188, 0.9336645447172878, 0.9311186283507725, 0.9285265129127147, 0.9258883270154336, 0.9232042015571147, 0.9204742697153152, 0.9176986669403552, 0.9148775309485979, 0.9120110017156163, 0.9090992214692483, 0.9061423346825389, 0.9031404880665733, 0.9000938305631968, 0.8970025133376245, 0.8938666897709417, 0.8906865154524932, 0.8874621481721635, 0.884193747912548, 0.8808814768410147, 0.8775254993016587, 0.8741259818071471, 0.870683093030458, 0.8671970037965111, 0.863667887073692, 0.8600959179652701, 0.8564812737007104, 0.85282413362688, 0.8491246791991497, 0.8453830939723906, 0.8415995635918666, 0.8377742757840237, 0.833907420347175, 0.8299991891420841, 0.8260497760824452, 0.8220593771252621, 0.8180281902611252, 0.8139564155043877, 0.8098442548832419, 0.8056919124296951, 0.8014995941694462, 0.797267508111663, 0.7929958642386623, 0.7886848744954904, 0.7843347527794076, 0.7799457149292749, 0.7755179787148454, 0.7710517638259587, 0.7665472918616408, 0.7620047863191094, 0.7574244725826837, 0.7528065779126031, 0.7481513314337497, 0.743458964124281, 0.7387297088041691, 0.7339638001236489, 0.7291614745515758, 0.7243229703636922, 0.7194485276308057, 0.7145383882068777, 0.7095927957170226, 0.7046119955454205, 0.6995962348231424, 0.694545762415887, 0.6894608289116343, 0.6843416866082115, 0.6791885895007749, 0.6740017932692074, 0.6687815552654326, 0.6635281345006462, 0.6582417916324638, 0.6529227889519886, 0.6475713903707978, 0.642187861407847, 0.6367724691762967, 0.6313254823702592, 0.6258471712514663, 0.6203378076358603, 0.614797664880107, 0.6092270178680332, 0.6036261429969871, 0.5979953181641249, 0.5923348227526222, 0.5866449376178121, 0.5809259450732498, 0.5751781288767056, 0.5694017742160854, 0.5635971676952802, 0.5577645973199471, 0.5519043524832177, 0.5460167239513406, 0.5401020038492539, 0.5341604856460913, 0.5281924641406208, 0.5221982354466179, 0.5161780969781734, 0.5101323474349367, 0.5040612867872953, 0.497965216261491, 0.4918444383246744, 0.48569925666989733, 0.4795299762010444, 0.4733369030177049, 0.46712034439998523, 0.46088060879326226, 0.45461800579287975, 0.4483328461287867, 0.44202544165012053, 0.4356961053097337, 0.4293451511486662, 0.42297289428056384, 0.4165796508760433, 0.41016573814700485, 0.4037314743308933, 0.39727717867490775, 0.39080317142016235, 0.3843097737857964, 0.3777973079530364, 0.37126609704921093, 0.3647164651317179, 0.3581487371719459, 0.35156323903915, 0.34496029748428336, 0.3383402401237851, 0.33170339542332467, 0.32505009268150453, 0.31838066201352166, 0.3116954343347882, 0.30499474134451227, 0.29827891550924057, 0.29154829004636207, 0.2848031989075752, 0.2780439767623179, 0.27127095898116266, 0.2644844816191766, 0.25768488139924717, 0.25087249569537534, 0.24404766251593607, 0.2372107204869076, 0.23036200883506977, 0.2235018673711727, 0.21663063647307654, 0.20974865706886306, 0.2028562706199199, 0.19595381910399823, 0.1890416449982451, 0.18212009126221085, 0.17518950132083239, 0.16825021904739368, 0.161302588746464, 0.15434695513681446, 0.14738366333431419, 0.14041305883480704, 0.13343548749696893, 0.12645129552514767, 0.11946082945218531, 0.11246443612222433, 0.10546246267349844, 0.09845525652110863, 0.09144316533978557, 0.08442653704663915, 0.07740571978389599, 0.0703810619016257, 0.06335291194045693, 0.05632161861428389, 0.04928753079296433, 0.042250997485009725, 0.03521236782026864, 0.028171991032604017, 0.02113021644256536, 0.014087393440056564, 0.007043871467000329, 0]
  const valsCurveSinFull224 = [0, 0.007012426128843567, 0.014024507423562413, 0.02103589906698894, 0.028046256275868958, 0.035055234317816326, 0.04206248852826503, 0.04906767432741802, 0.0560704472371918, 0.06307046289815603, 0.07006737708646732, 0.07706084573079638, 0.08405052492924756, 0.09103607096627017, 0.09801714032956062, 0.10499338972695449, 0.11196447610330788, 0.11893005665736701, 0.1258897888586254, 0.13284333046416774, 0.1397903395354995, 0.14673047445536175, 0.1536633939445301, 0.16058875707859693, 0.16750622330473638, 0.17441545245845072, 0.18131610478029814, 0.18820784093260004, 0.1950903220161282, 0.20196320958676958, 0.20882616567216977, 0.21567885278835222, 0.22252093395631425, 0.22935207271859764, 0.2361719331558341, 0.2429801799032637, 0.24977647816722667, 0.2565604937416265, 0.2633318930243646, 0.2700903430337452, 0.2768355114248492, 0.2835670665058776, 0.2902846772544622, 0.29698801333394337, 0.30367674510961457, 0.31035054366493176, 0.31700908081768797, 0.3236520291361514, 0.33027906195516704, 0.33688985339222, 0.343484078363461, 0.3500614125996923, 0.356621532662313, 0.3631641159592248, 0.36968884076069497, 0.37619538621517723, 0.38268343236508984, 0.3891526601625491, 0.39560275148505886, 0.4020333891511536, 0.4084442569359963, 0.41483503958692797, 0.42120542283897094, 0.4275550934302823, 0.4338837391175583, 0.44019104869138936, 0.4464767119915632, 0.4527404199223172, 0.4589818644675379, 0.4652007387059078, 0.4713967368259979, 0.47756955414130614, 0.4837188871052401, 0.4898444333260438, 0.495945891581668, 0.5020229618345823, 0.5080753452465299, 0.5141027441932221, 0.520104862278975, 0.5260814043512838, 0.5320320765153369, 0.5379565861484689, 0.543854641914549, 0.5497259537783086, 0.5555702330196026, 0.5613871922476081, 0.5671765454149563, 0.5729380078317985, 0.5786712961798062, 0.5843761285261031, 0.5900522243371287, 0.5956993044924338, 0.6013170912984063, 0.6069053085019263, 0.6124636813039506, 0.6179919363730271, 0.6234898018587341, 0.6289570074050497, 0.634393284163646, 0.6397983648071098, 0.6451719835420882, 0.6505138761223589, 0.6558237798618246, 0.6611014336474306, 0.6663465779520046, 0.671558954847019, 0.6767383080152749, 0.6818843827635057, 0.6869969260349023, 0.6920756864215564, 0.6971204141768239, 0.702130861227606, 0.7071067811865482, 0.7120479293641562, 0.716954062780828, 0.7218249401788037, 0.7266603220340278, 0.7314599705679284, 0.7362236497591101, 0.7409511253549599, 0.7456421648831664, 0.7502965376631521, 0.7549140148174168, 0.7594943692827921, 0.7640373758216082, 0.7685428110327689, 0.7730104533627378, 0.777440083116433, 0.7818314824680306, 0.7861844354716763, 0.7904987280721043, 0.7947741481151634, 0.7990104853582498, 0.8032075314806457, 0.8073650800937632, 0.8114829267512936, 0.8155608689592609, 0.8195987061859797, 0.8235962398719155, 0.8275532734394498, 0.8314696123025461, 0.8353450638763186, 0.8391794375865029, 0.8429725448788274, 0.846724199228285, 0.8504342161483055, 0.8541024131998284, 0.8577286100002729, 0.8613126282324097, 0.8648542916531289, 0.8683534261021063, 0.8718098595103686, 0.8752234219087546, 0.8785939454362724, 0.8819212643483558, 0.8852052150250129, 0.888445635978873, 0.8916423678631279, 0.8947952534793668, 0.8979041377853075, 0.9009688679024199, 0.903989293123444, 0.9069652649198011, 0.9098966369488972, 0.9127832650613195, 0.9156250073079252, 0.9184217239468215, 0.9211732774502376, 0.9238795325112872, 0.9265403560506225, 0.9291556172229785, 0.9317251874236068, 0.9342489402946, 0.9367267517311055, 0.9391584998874279, 0.9415440651830208, 0.9438833303083676, 0.9461761802307496, 0.9484225021999027, 0.9506221857535627, 0.9527751227228962, 0.9548812072378203, 0.9569403357322087, 0.9589524069489844, 0.9609173219450994, 0.9628349840963992, 0.9647052991023756, 0.9665281749908029, 0.9683035221222611, 0.9700312531945436, 0.9717112832469507, 0.9733435296644666, 0.9749279121818233, 0.9764643528874465, 0.9779527762272874, 0.9793931090085378, 0.9807852804032301, 0.9821292219517187, 0.9834248675660481, 0.9846721535332017, 0.9858710185182354, 0.9870214035672937, 0.9881232521105084, 0.9891765099647806, 0.9901811253364452, 0.9911370488238179, 0.9920442334196242, 0.9929026345133115, 0.9937122098932422, 0.9944729197487698, 0.9951847266721966, 0.9958475956606129, 0.9964614941176189, 0.9970263918549267, 0.9975422610938457, 0.998009076466648, 0.9984268150178164, 0.9987954562051722, 0.9991149819008868, 0.9993853763923718, 0.9996066263830528, 0.9997787209930221, 0.9999016517595749, 0.9999754126376246, 1, 0.9987165071710529, 0.9948693233918952, 0.9884683243281115, 0.9795299412524946, 0.9680771188662044, 0.9541392564000489, 0.9377521321470806, 0.9189578116202307, 0.8978045395707419, 0.8743466161445823, 0.8486442574947511, 0.8207634412072765, 0.7907757369376988, 0.758758122692791, 0.7247927872291201, 0.6889669190756866, 0.6513724827222223, 0.6121059825476628, 0.5712682150947922, 0.5289640103269624, 0.48530196253108093, 0.44039415155763423, 0.3943558551133185, 0.3473052528448202, 0.2993631229733579, 0.25065253225872053, 0.20129852008866006, 0.1514277775045767, 0.10116832198743217, 0.05064916883871271, 0]

  for (let i = 0; i < 256; i++) {
    pyramidRoof[i] = f32(valsPyramidRoof[i])
    
    lineUp[i] = <f32> valsLineUp[i]
    lineDown[i] = <f32> valsLineDown[i]

    lineUpFromPoint1[i] = <f32> valsLineUpFromPoint1[i]
    lineDownToPoint1[i] = <f32> valsLineDownToPoint1[i]
    
    lineUpFromPoint2[i] = <f32> valsLineUpFromPoint2[i]
    lineDownToPoint2[i] = <f32> valsLineDownToPoint2[i]
    lineDownToPoint5[i] = <f32> valsLineDownToPoint5[i]
    lineDownToPoint75[i] = <f32> valsLineDownToPoint75[i]

    curveExpUp[i] = <f32> valscurveExpUp[i]
    curveExpDown[i] = <f32> valscurveExpDown[i]
    
    curveCircleBigUp[i] = <f32> valsCurveCircleBigUp[i]
    curveCircleBigDown[i] = <f32> valsCurveCircleBigDown[i]

    curveRootMidUp[i] = <f32> valsCurveRootMidUp[i]
    curveRootMidDown[i] = <f32> valsCurveRootMidDown[i]

    curveGrayUp[i] = <f32> valsCurveGrayUp[i]
    curveGrayDown[i] = <f32> valsCurveGrayDown[i]

    curveSinFull[i] = <f32> valsCurveSinFull[i]
    curveSinFull32[i] = <f32> valsCurveSinFull32[i]
    curveSinFull224[i] = <f32> valsCurveSinFull224[i]
  }
}

export function process (runPercentileStretch: bool, runColorBalance: bool, runLight: bool, 
   keepBalance: bool, limit: i32, limitValue: i32, 
   balanceR: i32, balanceG: i32,
   midAmount: i32, shadowAmount: i32, highlightAmount: i32
   ): void {
  // Run percentile stretch
  if (runPercentileStretch) {
    percentileStretch(keepBalance, limit, limitValue)
    calculateCounts(1)
    calculateDisplayCounts(1)
    if (!runColorBalance) {
      copyData(1, 2)
    }
  }
  // End percentile stretch

  // Run gray world
  if (runColorBalance) {
    colorBalance(balanceR, balanceG)
    calculateCounts(2)
    calculateDisplayCounts(2)
  }
  // End gray world

  // Center Shift
  if (runLight) {
    // centerShift(newCenter)
    lightAdjustment(midAmount, shadowAmount, highlightAmount)
    calculateCounts(3)
    calculateDisplayCounts(3)
  }
  // End center shift

  // Run Levels
  // if (runLevels) {
  //   levels(levels0, levels1, levels2, levels3, levels4)
  //   calculateCounts(3)
  //   calculateDisplayCounts(3)
  // }
  // End Levels
}
export function calculateClips (limit: i32, limitValue: i32):void {
  
}

export function percentileStretch (keepBalance: bool, limit: i32, limitValue: i32): void {
  const clips = new Uint8ClampedArray(6)
  clips[1] = 255
  clips[3] = 255
  clips[5] = 255
  
  if (limitValue >= 0) {
    let countOffset = countOffsets[0]
    for (let chan = 0; chan < 3; chan++) {
      const limitL: u32 = limit + load<u32>(countOffset)
      const limitR: u32 = limit + load<u32>(countOffset + 255 * 4)
      let sumL: u32 = 0
      let sumR: u32 = 0
      let clipL: u8 = 0
      let clipR: u8 = 255
      for (let i: i32 = 0; i <= 255; i++) {
        sumL += load<u32>(countOffset + i * 4)
        if (sumL <= limitL) {
          clipL = i as u8
        } else {
          break
        }
      }
      for (let i: i32 = 255; i >= 0; i--) {
        sumR += load<u32>(countOffset + i * 4)
        if (sumR <= limitR) {
          clipR = i as u8
        } else {
          break
        }
      }
      clips[0 + chan * 2] = clipL
      clips[1 + chan * 2] = clipR
      countOffset += 256 * 4
    }
  }

  if (keepBalance) {
    let minL = clips[0]
    minL = clips[2] < minL ? clips[2] : minL
    minL = clips[4] < minL ? clips[4] : minL

    clips[0] = minL
    clips[2] = minL
    clips[4] = minL

    let maxR = clips[1]
    maxR = clips[3] > maxR ? clips[3] : maxR
    maxR = clips[5] > maxR ? clips[5] : maxR

    clips[1] = maxR
    clips[3] = maxR
    clips[5] = maxR
  }
  // 

  const rfactor: f32 = 1.0 / (unchecked(clips[1]) - unchecked(clips[0])) * 255
  const gfactor: f32 = 1.0 / (unchecked(clips[3]) - unchecked(clips[2])) * 255
  const bfactor: f32 = 1.0 / (unchecked(clips[5]) - unchecked(clips[4])) * 255

  const resultOffset = viewOffsets[1]

  let r: i32 = 0
  let g: i32 = 0
  let b: i32 = 0
  let rCurve: f32 = 1
  let gCurve: f32 = 1
  let bCurve: f32 = 1
  const rclipL = unchecked(clips[0])
  const gclipL = unchecked(clips[2])
  const bclipL = unchecked(clips[4])
  let dstR: f32 = 0
  let dstG: f32 = 0
  let dstB: f32 = 0

  let avg: i32 = 0
  const divider: f32 = 1 / 3

  for (let i = 0; i < viewLength; i += 4) {
    r = load<u8>(i)
    g = load<u8>(i + 1) 
    b = load<u8>(i + 2)

    // avg = <i32> (divider * <f32>  (r + g + b))

    // rCurve = unchecked(pyramidRoof[(r)])
    // gCurve = unchecked(pyramidRoof[(g)])
    // bCurve = unchecked(pyramidRoof[(b)])

    dstR = <f32> (r - rclipL) * rfactor
    dstG = <f32> (g - gclipL) * gfactor
    dstB = <f32> (b - bclipL) * bfactor

    if (dstR > 255) {
      dstR = 255
    } else if (dstR < 0) {
      dstR = 0
    }
    if (dstG > 255) {
      dstG = 255
    } else if (dstG < 0) {
      dstG = 0
    }
    if (dstB > 255) {
      dstB = 255
    } else if (dstB < 0) {
      dstB = 0
    }

    // dstR = lerp(<f32> r, dstR, unchecked(curveSinFull[avg]))
    // dstG = lerp(<f32> g, dstG, unchecked(curveSinFull[avg]))
    // dstB = lerp(<f32> b, dstB, unchecked(curveSinFull[avg]))

    // r = <i16>((r * (1.0 - rCurve)) + (r - rclipL) * rfactor * rCurve)
    // g = <i16>((g * (1.0 - gCurve)) + (g - gclipL) * gfactor * gCurve)
    // b = <i16>((b * (1.0 - bCurve)) + (b - bclipL) * bfactor * bCurve)

    // r = (r > 255) ? 255 : (r < 0) ? 0 : r
    // g = (g > 255) ? 255 : (g < 0) ? 0 : g
    // b = (b > 255) ? 255 : (b < 0) ? 0 : b

    // r = r < 0 ? 0 : r
    // r = r > 255 ? 255 : r
    // g = g < 0 ? 0 : g
    // g = g > 255 ? 255 : g
    // b = b < 0 ? 0 : b
    // b = b > 255 ? 255 : b

    // r = <i16>Math.min(Math.max(r, 0), 255)
    // if (r > 255) {
    //   r = 255
    // } else if (r < 0) {
    //   r = 0
    // }
    // if (g > 255) {
    //   g = 255
    // } else if (g < 0) {
    //   g = 0
    // }
    // if (b > 255) {
    //   b = 255
    // } else if (b < 0) {
    //   b = 0
    // }
    // store<u32>(i, 0b11111111000000000000000000000000 | 
    //   (u32(b) << 16) | 
    //   (u32(g) << 8) | 
    //   u32(r))
    store<u8>(resultOffset + i, <u8> dstR)
    store<u8>(resultOffset + i + 1, <u8> dstG)
    store<u8>(resultOffset + i + 2, <u8> dstB)
  }
}

export function colorBalance (balanceR: i32, balanceG: i32): void {
  const originStartOffset = viewOffsets[1]
  const targetOffset = viewOffsets[2]

  let r: i32 = 0
  let g: i32 = 0
  let b: i32 = 0
  let dstR: f32 = 0
  let dstG: f32 = 0
  let dstB: f32 = 0

  let avg: i32 = 0
  const divider: f32 = 1 / 3

  for (let i = 0; i < viewLength; i += 4) {
    r = load<u8>(originStartOffset + i)
    g = load<u8>(originStartOffset + i + 1)
    b = load<u8>(originStartOffset + i + 2)

    avg = <i32> (divider * <f32> (r + g + b))

    dstR = <f32> (r + balanceR)
    dstG = <f32> (g + balanceG)
    dstB = <f32> (b - balanceR)

    dstR = lerp(<f32> r, dstR, unchecked(curveSinFull[avg]))
    dstG = lerp(<f32> g, dstG, unchecked(curveSinFull[avg]))
    dstB = lerp(<f32> b, dstB, unchecked(curveSinFull[avg]))

    if (dstR > 255) {
      dstR = 255
    } else if (dstR < 0) {
      dstR = 0
    }
    if (dstG > 255) {
      dstG = 255
    } else if (dstG < 0) {
      dstG = 0
    }
    if (dstB > 255) {
      dstB = 255
    } else if (dstB < 0) {
      dstB = 0
    }

    store<u8>(targetOffset + i, <u8> dstR)
    store<u8>(targetOffset + i + 1, <u8> dstG)
    store<u8>(targetOffset + i + 2, <u8> dstB)
  }
}

export function lightAdjustment (midAmount: i32, shadowAmount: i32, highlightAmount: i32): void {
  const originStartOffset = viewOffsets[2]
  const targetOffset = viewOffsets[3]

  let r: i32 = 0
  let g: i32 = 0
  let b: i32 = 0
  let dstR: f32 = 0
  let dstG: f32 = 0
  let dstB: f32 = 0
  let curveR: f32 = 0
  let curveG: f32 = 0
  let curveB: f32 = 0

  let avg: i32 = 0
  const divider: f32 = 1 / 3

  let lowest: i32 = 0
  let highest: i32 = 0

  // const expPower: f32 = 1.0 / (64 * <f32> midAmount)
  const amountFactor: f32 = 1 / 64
  let clipL: i32 = 0
  let clipR: i32 = 255

  if (midAmount > 0) {
    clipR = 255 - midAmount
    clipL = <i32> -(midAmount * 0.1)
  } else {
    clipR = 255 - midAmount * 10
    // clipR = 255 - <i32> (midAmount * 0.1)
  }

  const rfactor: f32 = 1 / <f32> (clipR - clipL) * 255
  const gfactor: f32 = 1 / <f32> (clipR - clipL) * 255
  const bfactor: f32 = 1 / <f32> (clipR - clipL) * 255

  for (let i = 0; i < viewLength; i += 4) {
    r = load<u8>(originStartOffset + i)
    g = load<u8>(originStartOffset + i + 1)
    b = load<u8>(originStartOffset + i + 2)

    lowest = r
    if (g < r) {
      lowest = g
      if (b < g) {
        lowest = b
      }
    } else if (b < r) {
      lowest = b
    }
    highest = b
    if (r > b) {
      highest = r
      if (g > r) {
        highest = g
      }
    } else if (g > b) {
      highest = g
    }

    avg = <i32> (<f32> (r + g + b) * divider)

    if (midAmount > 0) {
      curveR = unchecked(lineDown[highest])
      curveG = unchecked(lineDown[highest])
      curveB = unchecked(lineDown[highest])
      dstR = <f32> (<f32> (r - clipL) * rfactor)
      dstG = <f32> (<f32> (g - clipL) * gfactor)
      dstB = <f32> (<f32> (b - clipL) * bfactor)
    } else {
      curveR = unchecked(lineUp[r])
      curveG = unchecked(lineUp[g])
      curveB = unchecked(lineUp[b])
      dstR = <f32> (r * Math.pow(2, midAmount / 128))
      dstG = <f32> (g * Math.pow(2, midAmount / 128))
      dstB = <f32> (b * Math.pow(2, midAmount / 128))
    }

    // dstR = <f32> (r + midAmount)
    // dstG = <f32> (g + midAmount)
    // dstB = <f32> (b + midAmount)
    
    // dstR = <f32> (<f32> (r - clipL) * rfactor + (<f32> midAmount * curveR * 0.2))
    // dstG = <f32> (<f32> (g - clipL) * gfactor + (<f32> midAmount * curveG * 0.2))
    // dstB = <f32> (<f32> (b - clipL) * bfactor + (<f32> midAmount * curveB * 0.2))

    // curveR = (1 - (1 / 255) * <f32> avg) * 0.5 + 0.5
    // curveG = (1 - (1 / 255) * <f32> avg) * 0.5 + 0.5
    // curveB = (1 - (1 / 255) * <f32> avg) * 0.5 + 0.5
    
    // const poto: f32 = 1.1 - (<f32> avg * 1 / 255)

    dstR = lerp(<f32> r, dstR, curveR)
    dstG = lerp(<f32> g, dstG, curveG)
    dstB = lerp(<f32> b, dstB, curveB)
    
    if (dstR > 255) {
      dstR = 255
    } else if (dstR < 0) {
      dstR = 0
    }
    if (dstG > 255) {
      dstG = 255
    } else if (dstG < 0) {
      dstG = 0
    }
    if (dstB > 255) {
      dstB = 255
    } else if (dstB < 0) {
      dstB = 0
    }

    store<u8>(targetOffset + i, <u8> dstR)
    store<u8>(targetOffset + i + 1, <u8> dstG)
    store<u8>(targetOffset + i + 2, <u8> dstB)
  }
}

export function grayWorld (strength: i32): void {
  let sumR: f32 = 0
  let sumG: f32 = 0
  let sumB: f32 = 0

  const originStartOffset = viewOffsets[1]
  const originEndOffset = originStartOffset + viewLength

  for (let i = originStartOffset; i < originEndOffset; i += 4) {
    sumR += load<u8>(i)
    sumG += load<u8>(i + 1)
    sumB += load<u8>(i + 2)
  }
  const meanR: u32 = u32(sumR / f32(channelLength))
  const meanG: u32 = u32(sumG / f32(channelLength))
  const meanB: u32 = u32(sumB / f32(channelLength))

  const factorR: f32 = 128.0 / f32(meanR)
  const factorG: f32 = 128.0 / f32(meanG)
  const factorB: f32 = 128.0 / f32(meanB)

  let r: i32 = 0
  let g: i32 = 0
  let b: i32 = 0
  let dstR: f32 = 0
  let dstG: f32 = 0
  let dstB: f32 = 0

  const f: f32 = f32(strength) * 0.1

  let curveR: f32 = 0
  let curveG: f32 = 0
  let curveB: f32 = 0

  const targetOffset = viewOffsets[2]
  // (a * (1.0 - f)) + (b * f)
  for (let i = 0; i < viewLength; i += 4) {
    r = load<u8>(originStartOffset + i)
    g = load<u8>(originStartOffset + i + 1)
    b = load<u8>(originStartOffset + i + 2)

    if (factorR > 1) {
      curveR = unchecked(curveExpDown[r])
    } else {
      curveR = unchecked(curveGrayDown[r])
    }
    if (factorG > 1) {
      curveG = unchecked(curveExpDown[g])
    } else {
      curveG = unchecked(curveGrayDown[g])
    }
    if (factorB > 1) {
      curveB = unchecked(curveExpDown[b])
    } else {
      curveB = unchecked(curveGrayDown[b])
    }
    // newR = (<f32>r * (1.0 - (f * curveR))) + (<f32>r * factorR * curveR * f)
    // newG = (<f32>g * (1.0 - (f * curveG))) + (<f32>g * factorG * curveG * f)
    // newB = (<f32>b * (1.0 - (f * curveB))) + (<f32>b * factorB * curveB * f)
    
    dstR = factorR * <f32> r
    dstG = factorG * <f32> g
    dstB = factorB * <f32> b

    if (dstR > 255) {
      dstR = 255
    } else if (dstR < 0) {
      dstR = 0
    }
    if (dstG > 255) {
      dstG = 255
    } else if (dstG < 0) {
      dstG = 0
    }
    if (dstB > 255) {
      dstB = 255
    } else if (dstB < 0) {
      dstB = 0
    }

    dstR = lerp(<f32> r, dstR, f * curveR)
    dstG = lerp(<f32> g, dstG, f * curveG)
    dstB = lerp(<f32> b, dstB, f * curveB)

    store<u8>(targetOffset + i, u8(dstR))
    store<u8>(targetOffset + i + 1, u8(dstG))
    store<u8>(targetOffset + i + 2, u8(dstB))
  }
}

export function centerShift (newCenter: i32): void {
  if (newCenter == 0) {
    copyData(2, 3)
    return
  }

  const viewStart = viewOffsets[2]
  const viewEnd = viewStart + viewLength

  let r: i16 = 0
  let g: i16 = 0
  let b: i16 = 0

  const influenceCenter: i32 = 127 - newCenter

  const factorToCenter: f32 = 127.0 / (127.0 - <f32> newCenter)

  const influences = new Float32Array(256)

  for (let i = 0; i <= influenceCenter; i++) {
    influences[i] = findPercentage(<f32> i, 0.0 - <f32> (influenceCenter * 0), <f32> influenceCenter)
  }

  for (let i = influenceCenter + 1; i < 256; i++) {
    influences[i] = findPercentage(<f32> i, 255.0 + <f32> (influenceCenter * 0), <f32> influenceCenter + 1.0)
  }

  for (let i = 0; i < 256; i++) {
    // consoleFloat(influences[i])
  }

  let avg: i16 = 0
  let highest: i16 = 0
  let lowest: i16 = 0
  let localCurve: i16
  const divisorThree: f32 = 1.0 / 3.0

  for (let i = 0; i < viewLength; i += 4) {
    r = load<u8>(viewStart + i)
    g = load<u8>(viewStart + i + 1)
    b = load<u8>(viewStart + i + 2)

    avg = <i16> ((r + g + b) * divisorThree)

    highest = r
    if (r < g) {
      highest = g
      if (g < b) {
        highest = b
      }
    } else if (r < b) {
      highest = b
    }
    lowest = r
    if (r > g) {
      lowest = g
      if (g > b) {
        lowest = b
      }
    } else if (r > b) {
      lowest = b
    }

    let dstR: f32 = <f32> (r  + newCenter)
    let dstG: f32 = <f32> (g  + newCenter)
    let dstB: f32 = <f32> (b  + newCenter)


    if (dstR > 255) {
      dstR = 255
    } else if (dstR < 0) {
      dstR = 0
    }
    if (dstG > 255) {
      dstG = 255
    } else if (dstG < 0) {
      dstG = 0
    }
    if (dstB > 255) {
      dstB = 255
    } else if (dstB < 0) {
      dstB = 0
    }

    localCurve = highest

    if (newCenter < 0) {
      localCurve = lowest
    }

    dstR = lerp(r, dstR, unchecked(influences[localCurve]))
    dstG = lerp(g, dstG, unchecked(influences[localCurve]))
    dstB = lerp(b, dstB, unchecked(influences[localCurve]))

    store<u8>(viewEnd + i, <u8> dstR)
    store<u8>(viewEnd + i + 1, <u8> dstG)
    store<u8>(viewEnd + i + 2, <u8> dstB)
  }
}

export function levels (levels0: i8, levels1: i8, levels2: i8, levels3: i8, levels4: i8): void{  
  const viewStart = viewOffsets[2]
  const viewEnd = viewStart + viewLength

  const expFactor: f32 = 0.01 * <f32> levels2
  const blackFactor: f32 = 0.01 * <f32> levels0
  
  // const medianer: f32 = 1.0 / 3.0
  // let avg: f32 = 0
  const expCompensation: f32 = <f32> Math.pow(2, levels2 * 0.02)

  let r: i16 = 0
  let g: i16 = 0
  let b: i16 = 0

  let blackDstR: f32 = 0
  let blackDstG: f32 = 0
  let blackDstB: f32 = 0
  let shadowDstR: f32 = 0
  let shadowDstG: f32 = 0
  let shadowDstB: f32 = 0
  let midDstR: f32 = 0
  let midDstG: f32 = 0
  let midDstB: f32 = 0
  let highlightDstR: f32 = 0
  let highlightDstG: f32 = 0
  let highlightDstB: f32 = 0
  let whiteDstR: f32 = 0
  let whiteDstG: f32 = 0
  let whiteDstB: f32 = 0
  
  let blackCurveR: f32 = 0
  let blackCurveG: f32 = 0
  let blackCurveB: f32 = 0
  let shadowCurveR: f32 = 0
  let shadowCurveG: f32 = 0
  let shadowCurveB: f32 = 0
  let midCurveR: f32 = 0
  let midCurveG: f32 = 0
  let midCurveB: f32 = 0
  let highlightCurveR: f32 = 0
  let highlightCurveG: f32 = 0
  let highlightCurveB: f32 = 0
  let whiteCurveR: f32 = 0
  let whiteCurveG: f32 = 0
  let whiteCurveB: f32 = 0

  for (let i = 0; i < viewLength; i += 4) {
    r = load<u8>(viewStart + i)
    g = load<u8>(viewStart + i + 1)
    b = load<u8>(viewStart + i + 2)
    // avg = <f32> (r + g + b) * medianer

    if (levels0 > 0) { // Blacks
      blackCurveR = unchecked(curveExpDown[r])
      blackCurveG = unchecked(curveExpDown[g])
      blackCurveB = unchecked(curveExpDown[b])
    } else {
      blackCurveR = unchecked(curveExpDown[r])
      blackCurveG = unchecked(curveExpDown[g])
      blackCurveB = unchecked(curveExpDown[b])
    }

    if (levels2 > 0) { // Mids
      midCurveR = unchecked(curveRootMidDown[r])
      midCurveG = unchecked(curveRootMidDown[g])
      midCurveB = unchecked(curveRootMidDown[b])
    } else {
      midCurveR = unchecked(curveRootMidUp[r])
      midCurveG = unchecked(curveRootMidUp[g])
      midCurveB = unchecked(curveRootMidUp[b])
    }

    if (levels4 > 0) { // White
      whiteCurveR = unchecked(curveExpUp[r])
      whiteCurveG = unchecked(curveExpUp[g])
      whiteCurveB = unchecked(curveExpUp[b])
    } else {
      whiteCurveR = unchecked(curveExpUp[r])
      whiteCurveG = unchecked(curveExpUp[g])
      whiteCurveB = unchecked(curveExpUp[b])
    }
    // midCurveR = 1
    // midCurveG = 1
    // midCurveB = 1

    midDstR = r * expCompensation
    midDstG = g * expCompensation
    midDstB = b * expCompensation

    if (midDstR > 255) {
      midDstR = 255
    } else if (midDstR < 0) {
      midDstR = 0
    }
    if (midDstG > 255) {
      midDstG = 255
    } else if (midDstG < 0) {
      midDstG = 0
    }
    if (midDstB > 255) {
      midDstB = 255
    } else if (midDstB < 0) {
      midDstB = 0
    }

    midDstR = <i16> lerp(r, midDstR, midCurveR)
    midDstG = <i16> lerp(g, midDstG, midCurveG)
    midDstB = <i16> lerp(b, midDstB, midCurveB)

    // Blacks
    blackDstR = midDstR + levels0
    blackDstG = midDstG + levels0
    blackDstB = midDstB + levels0

    if (blackDstR > 255) {
      blackDstR = 255
    } else if (blackDstR < 0) {
      blackDstR = 0
    }
    if (blackDstG > 255) {
      blackDstG = 255
    } else if (blackDstG < 0) {
      blackDstG = 0
    }
    if (blackDstB > 255) {
      blackDstB = 255
    } else if (blackDstB < 0) {
      blackDstB = 0
    }

    blackDstR = <i16> lerp(midDstR, blackDstR, blackCurveR)
    blackDstG = <i16> lerp(midDstG, blackDstG, blackCurveG)
    blackDstB = <i16> lerp(midDstB, blackDstB, blackCurveB)

    // White
    whiteDstR = blackDstR + levels4
    whiteDstG = blackDstG + levels4
    whiteDstB = blackDstB + levels4

    if (whiteDstR > 255) {
      whiteDstR = 255
    } else if (whiteDstR < 0) {
      whiteDstR = 0
    }
    if (whiteDstG > 255) {
      whiteDstG = 255
    } else if (whiteDstG < 0) {
      whiteDstG = 0
    }
    if (whiteDstB > 255) {
      whiteDstB = 255
    } else if (whiteDstB < 0) {
      whiteDstB = 0
    }

    whiteDstR = <i16> lerp(blackDstR, whiteDstR, whiteCurveR)
    whiteDstG = <i16> lerp(blackDstG, whiteDstG, whiteCurveG)
    whiteDstB = <i16> lerp(blackDstB, whiteDstB, whiteCurveB)

    shadowDstR = whiteDstR + levels1
    shadowDstG = whiteDstG + levels1
    shadowDstB = whiteDstB + levels1

    if (shadowDstR > 255) {
      shadowDstR = 255
    } else if (shadowDstR < 0) {
      shadowDstR = 0
    }
    if (shadowDstG > 255) {
      shadowDstG = 255
    } else if (shadowDstG < 0) {
      shadowDstG = 0
    }
    if (shadowDstB > 255) {
      shadowDstB = 255
    } else if (shadowDstB < 0) {
      shadowDstB = 0
    }

    shadowCurveR = unchecked(lineUp[r])
    shadowCurveG = unchecked(lineUp[g])
    shadowCurveB = unchecked(lineUp[b])

    shadowDstR = <i16> lerp(whiteDstR, shadowDstR, shadowCurveR)
    shadowDstG = <i16> lerp(whiteDstG, shadowDstG, shadowCurveG)
    shadowDstB = <i16> lerp(whiteDstB, shadowDstB, shadowCurveB)

    store<u8>(viewEnd + i, <i8> shadowDstR)
    store<u8>(viewEnd + i + 1, <i8> shadowDstG)
    store<u8>(viewEnd + i + 2, <i8> shadowDstB)
  }
}

export function lerp (a: f32, b: f32, f: f32): f32 {
  return  (a * (1.0 - f)) + (b * f)
}

function findPercentage (number: f32, a: f32, b: f32): f32 {
  return (number - a) / (b - a)
}

export function calculateCounts (index: u32): void {
  clearCounts(index)
  const _viewOffset = viewOffsets[index]
  const _countOffset = countOffsets[index]
  const viewEnd = _viewOffset  + viewLength
  let countIndexR: u32 = 0
  let countIndexG: u32 = 0
  let countIndexB: u32 = 0
  for (let i = _viewOffset; i < viewEnd; i += 4) {
    countIndexR = _countOffset + 4 * load<u8>(i)
    countIndexG = _countOffset + 4 * load<u8>(i + 1) + 1024
    countIndexB = _countOffset + 4 * load<u8>(i + 2) + 2048

    store<u32>(countIndexR, load<u32>(countIndexR) + 1)
    store<u32>(countIndexG, load<u32>(countIndexG) + 1)
    store<u32>(countIndexB, load<u32>(countIndexB) + 1)
  }
}

export function calculateDisplayCounts (index: u32): void {
  clearDisplayCounts(index)
  const _countOffset = countOffsets[index]
  const _displayCountOffset = displayCountOffsets[index]
  let maxR: i32 = 0
  let maxG: i32 = 0
  let maxB: i32 = 0
  const endCount = _countOffset + 256 * 4
  for (let i = _countOffset; i < endCount; i += 4) {
    const r = load<i32>(i)
    const g = load<i32>(i + 256 * 4)
    const b = load<i32>(i + 512 * 4)
    if (r > maxR) {
      maxR = r
    }
    if (g > maxG) {
      maxG = g
    }
    if (b > maxB) {
      maxB = b
    }
  }
  const factorR: f32 = 100.0 / <f32>maxR
  const factorG: f32 = 100.0 / <f32>maxG
  const factorB: f32 = 100.0 / <f32>maxB

  for (let i = _countOffset, d = _displayCountOffset; i < endCount; i += 4, d++) {
    const r: f32 = <f32>load<i32>(i)
    const g: f32 = <f32>load<i32>(i + 256 * 4)
    const b: f32 = <f32>load<i32>(i + 512 * 4)

    let newR: i32 = 0
    let newG: i32 = 0
    let newB: i32 = 0

    if (g > 0) {
      newR = <i32>(factorR * r)
      if (newR < 1) {
        newR = 1
      } else if (newR > 100) {
        newR = 100
      }
    }
    if (g > 0) {
      newG = <i32>(factorG * g)
      if (newG < 1) {
        newG = 1
      } else if (newG > 100) {
        newG = 100
      }
    }
    if (b > 0) {
      newB = <i32>(factorB * b)
      if (newB < 1) {
        newB = 1
      } else if (newB > 100) {
        newB = 100
      }
    }

    store<u8>(d, <u8>newR)
    store<u8>(d + 256, <u8>(newG))
    store<u8>(d + 512, <u8>(newB))
  }

  // consoleLog(maxR)
  // consoleLog(maxG)
  // consoleLog(maxB)
  // const leftR: i32 = load<i32>(_countOffset)
  // const rightR: i32 = load<i32>(_countOffset + 255 * 4)
  // consoleLog(leftR)
  // consoleLog(rightR)
}

function clearCounts (index: u32): void {
  const countOffset = countOffsets[index]
  const endCountCache: u32 = countOffset + (256 * 4 * 3)
  for (let i: u32 = countOffset; i < endCountCache; i += 4) {
    store<u32>(i, 0)
  }
}

function clearDisplayCounts (index: u32): void {
  const displayCountOffset = displayCountOffsets[index]
  const endDisplayCount: u32 = displayCountOffset + (256 * 3)
  for (let i: u32 = displayCountOffset; i < endDisplayCount; i++) {
    store<u8>(i, 0)
  }
}

function copyData(from: u32, to: u32): void {
  const viewOrigin = viewOffsets[from]
  const countOrigin = countOffsets[from]
  const displayCountOrigin = displayCountOffsets[from]
  
  const viewDest = viewOffsets[to]
  const countDest = countOffsets[to]
  const displayCountDest = displayCountOffsets[to]
  
  for (let i: i32 = 0; i < viewLength; i++) {
    store<u8>(viewDest + i, load<u8>(viewOrigin + i))
  }
}
// [view8]  [view8original] [view8cache]  [counts]      [countsOriginal]
// [Full]   [Full]          [full]        [256 * 4 * 3] [256 * 4 * 3]
