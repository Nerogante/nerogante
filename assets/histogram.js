import util from 'assets/util'

const histogram = {
  interpolation: {
    LINEAR: 0,
    SPHERICAL: 1
  },
  range: {
    BLACK: 0,
    DARK: 1,
    MID: 2,
    LIGHT: 3,
    WHITE: 4
  },
  factors: [
    // Linear
    [
      // Mid
      [0, 0.007874015748031496, 0.015748031496062992, 0.023622047244094488, 0.031496062992125984, 0.03937007874015748, 0.047244094488188976, 0.05511811023622047, 0.06299212598425197, 0.07086614173228346, 0.07874015748031496, 0.08661417322834646, 0.09448818897637795, 0.10236220472440945, 0.11023622047244094, 0.11811023622047244, 0.12598425196850394, 0.13385826771653545, 0.14173228346456693, 0.14960629921259844, 0.15748031496062992, 0.16535433070866143, 0.1732283464566929, 0.18110236220472442, 0.1889763779527559, 0.1968503937007874, 0.2047244094488189, 0.2125984251968504, 0.2204724409448819, 0.2283464566929134, 0.23622047244094488, 0.2440944881889764, 0.25196850393700787, 0.25984251968503935, 0.2677165354330709, 0.2755905511811024, 0.28346456692913385, 0.29133858267716534, 0.2992125984251969, 0.30708661417322836, 0.31496062992125984, 0.3228346456692913, 0.33070866141732286, 0.33858267716535434, 0.3464566929133858, 0.3543307086614173, 0.36220472440944884, 0.3700787401574803, 0.3779527559055118, 0.3858267716535433, 0.3937007874015748, 0.4015748031496063, 0.4094488188976378, 0.41732283464566927, 0.4251968503937008, 0.4330708661417323, 0.4409448818897638, 0.44881889763779526, 0.4566929133858268, 0.4645669291338583, 0.47244094488188976, 0.48031496062992124, 0.4881889763779528, 0.49606299212598426, 0.5039370078740157, 0.5118110236220472, 0.5196850393700787, 0.5275590551181102, 0.5354330708661418, 0.5433070866141733, 0.5511811023622047, 0.5590551181102362, 0.5669291338582677, 0.5748031496062992, 0.5826771653543307, 0.5905511811023622, 0.5984251968503937, 0.6062992125984252, 0.6141732283464567, 0.6220472440944882, 0.6299212598425197, 0.6377952755905512, 0.6456692913385826, 0.6535433070866141, 0.6614173228346457, 0.6692913385826772, 0.6771653543307087, 0.6850393700787402, 0.6929133858267716, 0.7007874015748031, 0.7086614173228346, 0.7165354330708661, 0.7244094488188977, 0.7322834645669292, 0.7401574803149606, 0.7480314960629921, 0.7559055118110236, 0.7637795275590551, 0.7716535433070866, 0.7795275590551181, 0.7874015748031497, 0.7952755905511811, 0.8031496062992126, 0.8110236220472441, 0.8188976377952756, 0.8267716535433071, 0.8346456692913385, 0.84251968503937, 0.8503937007874016, 0.8582677165354331, 0.8661417322834646, 0.8740157480314961, 0.8818897637795275, 0.889763779527559, 0.8976377952755905, 0.905511811023622, 0.9133858267716536, 0.9212598425196851, 0.9291338582677166, 0.937007874015748, 0.9448818897637795, 0.952755905511811, 0.9606299212598425, 0.968503937007874, 0.9763779527559056, 0.984251968503937, 0.9921259842519685, 1, 1, 0.9921259842519685, 0.984251968503937, 0.9763779527559056, 0.968503937007874, 0.9606299212598425, 0.952755905511811, 0.9448818897637795, 0.937007874015748, 0.9291338582677166, 0.9212598425196851, 0.9133858267716536, 0.905511811023622, 0.8976377952755905, 0.889763779527559, 0.8818897637795275, 0.8740157480314961, 0.8661417322834646, 0.8582677165354331, 0.8503937007874016, 0.84251968503937, 0.8346456692913385, 0.8267716535433071, 0.8188976377952756, 0.8110236220472441, 0.8031496062992126, 0.7952755905511811, 0.7874015748031497, 0.7795275590551181, 0.7716535433070866, 0.7637795275590551, 0.7559055118110236, 0.7480314960629921, 0.7401574803149606, 0.7322834645669292, 0.7244094488188977, 0.7165354330708661, 0.7086614173228346, 0.7007874015748031, 0.6929133858267716, 0.6850393700787402, 0.6771653543307087, 0.6692913385826772, 0.6614173228346457, 0.6535433070866141, 0.6456692913385826, 0.6377952755905512, 0.6299212598425197, 0.6220472440944882, 0.6141732283464567, 0.6062992125984252, 0.5984251968503937, 0.5905511811023622, 0.5826771653543307, 0.5748031496062992, 0.5669291338582677, 0.5590551181102362, 0.5511811023622047, 0.5433070866141733, 0.5354330708661418, 0.5275590551181102, 0.5196850393700787, 0.5118110236220472, 0.5039370078740157, 0.49606299212598426, 0.4881889763779528, 0.48031496062992124, 0.47244094488188976, 0.4645669291338583, 0.4566929133858268, 0.44881889763779526, 0.4409448818897638, 0.4330708661417323, 0.4251968503937008, 0.41732283464566927, 0.4094488188976378, 0.4015748031496063, 0.3937007874015748, 0.3858267716535433, 0.3779527559055118, 0.3700787401574803, 0.36220472440944884, 0.3543307086614173, 0.3464566929133858, 0.33858267716535434, 0.33070866141732286, 0.3228346456692913, 0.31496062992125984, 0.30708661417322836, 0.2992125984251969, 0.29133858267716534, 0.28346456692913385, 0.2755905511811024, 0.2677165354330709, 0.25984251968503935, 0.25196850393700787, 0.2440944881889764, 0.23622047244094488, 0.2283464566929134, 0.2204724409448819, 0.2125984251968504, 0.2047244094488189, 0.1968503937007874, 0.1889763779527559, 0.18110236220472442, 0.1732283464566929, 0.16535433070866143, 0.15748031496062992, 0.14960629921259844, 0.14173228346456693, 0.13385826771653545, 0.12598425196850394, 0.11811023622047244, 0.11023622047244094, 0.10236220472440945, 0.09448818897637795, 0.08661417322834646, 0.07874015748031496, 0.07086614173228346, 0.06299212598425197, 0.05511811023622047, 0.047244094488188976, 0.03937007874015748, 0.031496062992125984, 0.023622047244094488, 0.015748031496062992, 0.007874015748031496, 0],
      [0, 0.007874015748031496, 0.015748031496062992, 0.023622047244094488, 0.031496062992125984, 0.03937007874015748, 0.047244094488188976, 0.05511811023622047, 0.06299212598425197, 0.07086614173228346, 0.07874015748031496, 0.08661417322834646, 0.09448818897637795, 0.10236220472440945, 0.11023622047244094, 0.11811023622047244, 0.12598425196850394, 0.13385826771653545, 0.14173228346456693, 0.14960629921259844, 0.15748031496062992, 0.16535433070866143, 0.1732283464566929, 0.18110236220472442, 0.1889763779527559, 0.1968503937007874, 0.2047244094488189, 0.2125984251968504, 0.2204724409448819, 0.2283464566929134, 0.23622047244094488, 0.2440944881889764, 0.25196850393700787, 0.25984251968503935, 0.2677165354330709, 0.2755905511811024, 0.28346456692913385, 0.29133858267716534, 0.2992125984251969, 0.30708661417322836, 0.31496062992125984, 0.3228346456692913, 0.33070866141732286, 0.33858267716535434, 0.3464566929133858, 0.3543307086614173, 0.36220472440944884, 0.3700787401574803, 0.3779527559055118, 0.3858267716535433, 0.3937007874015748, 0.4015748031496063, 0.4094488188976378, 0.41732283464566927, 0.4251968503937008, 0.4330708661417323, 0.4409448818897638, 0.44881889763779526, 0.4566929133858268, 0.4645669291338583, 0.47244094488188976, 0.48031496062992124, 0.4881889763779528, 0.49606299212598426, 0.5039370078740157, 0.5118110236220472, 0.5196850393700787, 0.5275590551181102, 0.5354330708661418, 0.5433070866141733, 0.5511811023622047, 0.5590551181102362, 0.5669291338582677, 0.5748031496062992, 0.5826771653543307, 0.5905511811023622, 0.5984251968503937, 0.6062992125984252, 0.6141732283464567, 0.6220472440944882, 0.6299212598425197, 0.6377952755905512, 0.6456692913385826, 0.6535433070866141, 0.6614173228346457, 0.6692913385826772, 0.6771653543307087, 0.6850393700787402, 0.6929133858267716, 0.7007874015748031, 0.7086614173228346, 0.7165354330708661, 0.7244094488188977, 0.7322834645669292, 0.7401574803149606, 0.7480314960629921, 0.7559055118110236, 0.7637795275590551, 0.7716535433070866, 0.7795275590551181, 0.7874015748031497, 0.7952755905511811, 0.8031496062992126, 0.8110236220472441, 0.8188976377952756, 0.8267716535433071, 0.8346456692913385, 0.84251968503937, 0.8503937007874016, 0.8582677165354331, 0.8661417322834646, 0.8740157480314961, 0.8818897637795275, 0.889763779527559, 0.8976377952755905, 0.905511811023622, 0.9133858267716536, 0.9212598425196851, 0.9291338582677166, 0.937007874015748, 0.9448818897637795, 0.952755905511811, 0.9606299212598425, 0.968503937007874, 0.9763779527559056, 0.984251968503937, 0.9921259842519685, 1, 1, 0.9921259842519685, 0.984251968503937, 0.9763779527559056, 0.968503937007874, 0.9606299212598425, 0.952755905511811, 0.9448818897637795, 0.937007874015748, 0.9291338582677166, 0.9212598425196851, 0.9133858267716536, 0.905511811023622, 0.8976377952755905, 0.889763779527559, 0.8818897637795275, 0.8740157480314961, 0.8661417322834646, 0.8582677165354331, 0.8503937007874016, 0.84251968503937, 0.8346456692913385, 0.8267716535433071, 0.8188976377952756, 0.8110236220472441, 0.8031496062992126, 0.7952755905511811, 0.7874015748031497, 0.7795275590551181, 0.7716535433070866, 0.7637795275590551, 0.7559055118110236, 0.7480314960629921, 0.7401574803149606, 0.7322834645669292, 0.7244094488188977, 0.7165354330708661, 0.7086614173228346, 0.7007874015748031, 0.6929133858267716, 0.6850393700787402, 0.6771653543307087, 0.6692913385826772, 0.6614173228346457, 0.6535433070866141, 0.6456692913385826, 0.6377952755905512, 0.6299212598425197, 0.6220472440944882, 0.6141732283464567, 0.6062992125984252, 0.5984251968503937, 0.5905511811023622, 0.5826771653543307, 0.5748031496062992, 0.5669291338582677, 0.5590551181102362, 0.5511811023622047, 0.5433070866141733, 0.5354330708661418, 0.5275590551181102, 0.5196850393700787, 0.5118110236220472, 0.5039370078740157, 0.49606299212598426, 0.4881889763779528, 0.48031496062992124, 0.47244094488188976, 0.4645669291338583, 0.4566929133858268, 0.44881889763779526, 0.4409448818897638, 0.4330708661417323, 0.4251968503937008, 0.41732283464566927, 0.4094488188976378, 0.4015748031496063, 0.3937007874015748, 0.3858267716535433, 0.3779527559055118, 0.3700787401574803, 0.36220472440944884, 0.3543307086614173, 0.3464566929133858, 0.33858267716535434, 0.33070866141732286, 0.3228346456692913, 0.31496062992125984, 0.30708661417322836, 0.2992125984251969, 0.29133858267716534, 0.28346456692913385, 0.2755905511811024, 0.2677165354330709, 0.25984251968503935, 0.25196850393700787, 0.2440944881889764, 0.23622047244094488, 0.2283464566929134, 0.2204724409448819, 0.2125984251968504, 0.2047244094488189, 0.1968503937007874, 0.1889763779527559, 0.18110236220472442, 0.1732283464566929, 0.16535433070866143, 0.15748031496062992, 0.14960629921259844, 0.14173228346456693, 0.13385826771653545, 0.12598425196850394, 0.11811023622047244, 0.11023622047244094, 0.10236220472440945, 0.09448818897637795, 0.08661417322834646, 0.07874015748031496, 0.07086614173228346, 0.06299212598425197, 0.05511811023622047, 0.047244094488188976, 0.03937007874015748, 0.031496062992125984, 0.023622047244094488, 0.015748031496062992, 0.007874015748031496, 0],
      [0, 0.007874015748031496, 0.015748031496062992, 0.023622047244094488, 0.031496062992125984, 0.03937007874015748, 0.047244094488188976, 0.05511811023622047, 0.06299212598425197, 0.07086614173228346, 0.07874015748031496, 0.08661417322834646, 0.09448818897637795, 0.10236220472440945, 0.11023622047244094, 0.11811023622047244, 0.12598425196850394, 0.13385826771653545, 0.14173228346456693, 0.14960629921259844, 0.15748031496062992, 0.16535433070866143, 0.1732283464566929, 0.18110236220472442, 0.1889763779527559, 0.1968503937007874, 0.2047244094488189, 0.2125984251968504, 0.2204724409448819, 0.2283464566929134, 0.23622047244094488, 0.2440944881889764, 0.25196850393700787, 0.25984251968503935, 0.2677165354330709, 0.2755905511811024, 0.28346456692913385, 0.29133858267716534, 0.2992125984251969, 0.30708661417322836, 0.31496062992125984, 0.3228346456692913, 0.33070866141732286, 0.33858267716535434, 0.3464566929133858, 0.3543307086614173, 0.36220472440944884, 0.3700787401574803, 0.3779527559055118, 0.3858267716535433, 0.3937007874015748, 0.4015748031496063, 0.4094488188976378, 0.41732283464566927, 0.4251968503937008, 0.4330708661417323, 0.4409448818897638, 0.44881889763779526, 0.4566929133858268, 0.4645669291338583, 0.47244094488188976, 0.48031496062992124, 0.4881889763779528, 0.49606299212598426, 0.5039370078740157, 0.5118110236220472, 0.5196850393700787, 0.5275590551181102, 0.5354330708661418, 0.5433070866141733, 0.5511811023622047, 0.5590551181102362, 0.5669291338582677, 0.5748031496062992, 0.5826771653543307, 0.5905511811023622, 0.5984251968503937, 0.6062992125984252, 0.6141732283464567, 0.6220472440944882, 0.6299212598425197, 0.6377952755905512, 0.6456692913385826, 0.6535433070866141, 0.6614173228346457, 0.6692913385826772, 0.6771653543307087, 0.6850393700787402, 0.6929133858267716, 0.7007874015748031, 0.7086614173228346, 0.7165354330708661, 0.7244094488188977, 0.7322834645669292, 0.7401574803149606, 0.7480314960629921, 0.7559055118110236, 0.7637795275590551, 0.7716535433070866, 0.7795275590551181, 0.7874015748031497, 0.7952755905511811, 0.8031496062992126, 0.8110236220472441, 0.8188976377952756, 0.8267716535433071, 0.8346456692913385, 0.84251968503937, 0.8503937007874016, 0.8582677165354331, 0.8661417322834646, 0.8740157480314961, 0.8818897637795275, 0.889763779527559, 0.8976377952755905, 0.905511811023622, 0.9133858267716536, 0.9212598425196851, 0.9291338582677166, 0.937007874015748, 0.9448818897637795, 0.952755905511811, 0.9606299212598425, 0.968503937007874, 0.9763779527559056, 0.984251968503937, 0.9921259842519685, 1, 1, 0.9921259842519685, 0.984251968503937, 0.9763779527559056, 0.968503937007874, 0.9606299212598425, 0.952755905511811, 0.9448818897637795, 0.937007874015748, 0.9291338582677166, 0.9212598425196851, 0.9133858267716536, 0.905511811023622, 0.8976377952755905, 0.889763779527559, 0.8818897637795275, 0.8740157480314961, 0.8661417322834646, 0.8582677165354331, 0.8503937007874016, 0.84251968503937, 0.8346456692913385, 0.8267716535433071, 0.8188976377952756, 0.8110236220472441, 0.8031496062992126, 0.7952755905511811, 0.7874015748031497, 0.7795275590551181, 0.7716535433070866, 0.7637795275590551, 0.7559055118110236, 0.7480314960629921, 0.7401574803149606, 0.7322834645669292, 0.7244094488188977, 0.7165354330708661, 0.7086614173228346, 0.7007874015748031, 0.6929133858267716, 0.6850393700787402, 0.6771653543307087, 0.6692913385826772, 0.6614173228346457, 0.6535433070866141, 0.6456692913385826, 0.6377952755905512, 0.6299212598425197, 0.6220472440944882, 0.6141732283464567, 0.6062992125984252, 0.5984251968503937, 0.5905511811023622, 0.5826771653543307, 0.5748031496062992, 0.5669291338582677, 0.5590551181102362, 0.5511811023622047, 0.5433070866141733, 0.5354330708661418, 0.5275590551181102, 0.5196850393700787, 0.5118110236220472, 0.5039370078740157, 0.49606299212598426, 0.4881889763779528, 0.48031496062992124, 0.47244094488188976, 0.4645669291338583, 0.4566929133858268, 0.44881889763779526, 0.4409448818897638, 0.4330708661417323, 0.4251968503937008, 0.41732283464566927, 0.4094488188976378, 0.4015748031496063, 0.3937007874015748, 0.3858267716535433, 0.3779527559055118, 0.3700787401574803, 0.36220472440944884, 0.3543307086614173, 0.3464566929133858, 0.33858267716535434, 0.33070866141732286, 0.3228346456692913, 0.31496062992125984, 0.30708661417322836, 0.2992125984251969, 0.29133858267716534, 0.28346456692913385, 0.2755905511811024, 0.2677165354330709, 0.25984251968503935, 0.25196850393700787, 0.2440944881889764, 0.23622047244094488, 0.2283464566929134, 0.2204724409448819, 0.2125984251968504, 0.2047244094488189, 0.1968503937007874, 0.1889763779527559, 0.18110236220472442, 0.1732283464566929, 0.16535433070866143, 0.15748031496062992, 0.14960629921259844, 0.14173228346456693, 0.13385826771653545, 0.12598425196850394, 0.11811023622047244, 0.11023622047244094, 0.10236220472440945, 0.09448818897637795, 0.08661417322834646, 0.07874015748031496, 0.07086614173228346, 0.06299212598425197, 0.05511811023622047, 0.047244094488188976, 0.03937007874015748, 0.031496062992125984, 0.023622047244094488, 0.015748031496062992, 0.007874015748031496, 0],
      [0, 0.007874015748031496, 0.015748031496062992, 0.023622047244094488, 0.031496062992125984, 0.03937007874015748, 0.047244094488188976, 0.05511811023622047, 0.06299212598425197, 0.07086614173228346, 0.07874015748031496, 0.08661417322834646, 0.09448818897637795, 0.10236220472440945, 0.11023622047244094, 0.11811023622047244, 0.12598425196850394, 0.13385826771653545, 0.14173228346456693, 0.14960629921259844, 0.15748031496062992, 0.16535433070866143, 0.1732283464566929, 0.18110236220472442, 0.1889763779527559, 0.1968503937007874, 0.2047244094488189, 0.2125984251968504, 0.2204724409448819, 0.2283464566929134, 0.23622047244094488, 0.2440944881889764, 0.25196850393700787, 0.25984251968503935, 0.2677165354330709, 0.2755905511811024, 0.28346456692913385, 0.29133858267716534, 0.2992125984251969, 0.30708661417322836, 0.31496062992125984, 0.3228346456692913, 0.33070866141732286, 0.33858267716535434, 0.3464566929133858, 0.3543307086614173, 0.36220472440944884, 0.3700787401574803, 0.3779527559055118, 0.3858267716535433, 0.3937007874015748, 0.4015748031496063, 0.4094488188976378, 0.41732283464566927, 0.4251968503937008, 0.4330708661417323, 0.4409448818897638, 0.44881889763779526, 0.4566929133858268, 0.4645669291338583, 0.47244094488188976, 0.48031496062992124, 0.4881889763779528, 0.49606299212598426, 0.5039370078740157, 0.5118110236220472, 0.5196850393700787, 0.5275590551181102, 0.5354330708661418, 0.5433070866141733, 0.5511811023622047, 0.5590551181102362, 0.5669291338582677, 0.5748031496062992, 0.5826771653543307, 0.5905511811023622, 0.5984251968503937, 0.6062992125984252, 0.6141732283464567, 0.6220472440944882, 0.6299212598425197, 0.6377952755905512, 0.6456692913385826, 0.6535433070866141, 0.6614173228346457, 0.6692913385826772, 0.6771653543307087, 0.6850393700787402, 0.6929133858267716, 0.7007874015748031, 0.7086614173228346, 0.7165354330708661, 0.7244094488188977, 0.7322834645669292, 0.7401574803149606, 0.7480314960629921, 0.7559055118110236, 0.7637795275590551, 0.7716535433070866, 0.7795275590551181, 0.7874015748031497, 0.7952755905511811, 0.8031496062992126, 0.8110236220472441, 0.8188976377952756, 0.8267716535433071, 0.8346456692913385, 0.84251968503937, 0.8503937007874016, 0.8582677165354331, 0.8661417322834646, 0.8740157480314961, 0.8818897637795275, 0.889763779527559, 0.8976377952755905, 0.905511811023622, 0.9133858267716536, 0.9212598425196851, 0.9291338582677166, 0.937007874015748, 0.9448818897637795, 0.952755905511811, 0.9606299212598425, 0.968503937007874, 0.9763779527559056, 0.984251968503937, 0.9921259842519685, 1, 1, 0.9921259842519685, 0.984251968503937, 0.9763779527559056, 0.968503937007874, 0.9606299212598425, 0.952755905511811, 0.9448818897637795, 0.937007874015748, 0.9291338582677166, 0.9212598425196851, 0.9133858267716536, 0.905511811023622, 0.8976377952755905, 0.889763779527559, 0.8818897637795275, 0.8740157480314961, 0.8661417322834646, 0.8582677165354331, 0.8503937007874016, 0.84251968503937, 0.8346456692913385, 0.8267716535433071, 0.8188976377952756, 0.8110236220472441, 0.8031496062992126, 0.7952755905511811, 0.7874015748031497, 0.7795275590551181, 0.7716535433070866, 0.7637795275590551, 0.7559055118110236, 0.7480314960629921, 0.7401574803149606, 0.7322834645669292, 0.7244094488188977, 0.7165354330708661, 0.7086614173228346, 0.7007874015748031, 0.6929133858267716, 0.6850393700787402, 0.6771653543307087, 0.6692913385826772, 0.6614173228346457, 0.6535433070866141, 0.6456692913385826, 0.6377952755905512, 0.6299212598425197, 0.6220472440944882, 0.6141732283464567, 0.6062992125984252, 0.5984251968503937, 0.5905511811023622, 0.5826771653543307, 0.5748031496062992, 0.5669291338582677, 0.5590551181102362, 0.5511811023622047, 0.5433070866141733, 0.5354330708661418, 0.5275590551181102, 0.5196850393700787, 0.5118110236220472, 0.5039370078740157, 0.49606299212598426, 0.4881889763779528, 0.48031496062992124, 0.47244094488188976, 0.4645669291338583, 0.4566929133858268, 0.44881889763779526, 0.4409448818897638, 0.4330708661417323, 0.4251968503937008, 0.41732283464566927, 0.4094488188976378, 0.4015748031496063, 0.3937007874015748, 0.3858267716535433, 0.3779527559055118, 0.3700787401574803, 0.36220472440944884, 0.3543307086614173, 0.3464566929133858, 0.33858267716535434, 0.33070866141732286, 0.3228346456692913, 0.31496062992125984, 0.30708661417322836, 0.2992125984251969, 0.29133858267716534, 0.28346456692913385, 0.2755905511811024, 0.2677165354330709, 0.25984251968503935, 0.25196850393700787, 0.2440944881889764, 0.23622047244094488, 0.2283464566929134, 0.2204724409448819, 0.2125984251968504, 0.2047244094488189, 0.1968503937007874, 0.1889763779527559, 0.18110236220472442, 0.1732283464566929, 0.16535433070866143, 0.15748031496062992, 0.14960629921259844, 0.14173228346456693, 0.13385826771653545, 0.12598425196850394, 0.11811023622047244, 0.11023622047244094, 0.10236220472440945, 0.09448818897637795, 0.08661417322834646, 0.07874015748031496, 0.07086614173228346, 0.06299212598425197, 0.05511811023622047, 0.047244094488188976, 0.03937007874015748, 0.031496062992125984, 0.023622047244094488, 0.015748031496062992, 0.007874015748031496, 0],
      [0, 0.007874015748031496, 0.015748031496062992, 0.023622047244094488, 0.031496062992125984, 0.03937007874015748, 0.047244094488188976, 0.05511811023622047, 0.06299212598425197, 0.07086614173228346, 0.07874015748031496, 0.08661417322834646, 0.09448818897637795, 0.10236220472440945, 0.11023622047244094, 0.11811023622047244, 0.12598425196850394, 0.13385826771653545, 0.14173228346456693, 0.14960629921259844, 0.15748031496062992, 0.16535433070866143, 0.1732283464566929, 0.18110236220472442, 0.1889763779527559, 0.1968503937007874, 0.2047244094488189, 0.2125984251968504, 0.2204724409448819, 0.2283464566929134, 0.23622047244094488, 0.2440944881889764, 0.25196850393700787, 0.25984251968503935, 0.2677165354330709, 0.2755905511811024, 0.28346456692913385, 0.29133858267716534, 0.2992125984251969, 0.30708661417322836, 0.31496062992125984, 0.3228346456692913, 0.33070866141732286, 0.33858267716535434, 0.3464566929133858, 0.3543307086614173, 0.36220472440944884, 0.3700787401574803, 0.3779527559055118, 0.3858267716535433, 0.3937007874015748, 0.4015748031496063, 0.4094488188976378, 0.41732283464566927, 0.4251968503937008, 0.4330708661417323, 0.4409448818897638, 0.44881889763779526, 0.4566929133858268, 0.4645669291338583, 0.47244094488188976, 0.48031496062992124, 0.4881889763779528, 0.49606299212598426, 0.5039370078740157, 0.5118110236220472, 0.5196850393700787, 0.5275590551181102, 0.5354330708661418, 0.5433070866141733, 0.5511811023622047, 0.5590551181102362, 0.5669291338582677, 0.5748031496062992, 0.5826771653543307, 0.5905511811023622, 0.5984251968503937, 0.6062992125984252, 0.6141732283464567, 0.6220472440944882, 0.6299212598425197, 0.6377952755905512, 0.6456692913385826, 0.6535433070866141, 0.6614173228346457, 0.6692913385826772, 0.6771653543307087, 0.6850393700787402, 0.6929133858267716, 0.7007874015748031, 0.7086614173228346, 0.7165354330708661, 0.7244094488188977, 0.7322834645669292, 0.7401574803149606, 0.7480314960629921, 0.7559055118110236, 0.7637795275590551, 0.7716535433070866, 0.7795275590551181, 0.7874015748031497, 0.7952755905511811, 0.8031496062992126, 0.8110236220472441, 0.8188976377952756, 0.8267716535433071, 0.8346456692913385, 0.84251968503937, 0.8503937007874016, 0.8582677165354331, 0.8661417322834646, 0.8740157480314961, 0.8818897637795275, 0.889763779527559, 0.8976377952755905, 0.905511811023622, 0.9133858267716536, 0.9212598425196851, 0.9291338582677166, 0.937007874015748, 0.9448818897637795, 0.952755905511811, 0.9606299212598425, 0.968503937007874, 0.9763779527559056, 0.984251968503937, 0.9921259842519685, 1, 1, 0.9921259842519685, 0.984251968503937, 0.9763779527559056, 0.968503937007874, 0.9606299212598425, 0.952755905511811, 0.9448818897637795, 0.937007874015748, 0.9291338582677166, 0.9212598425196851, 0.9133858267716536, 0.905511811023622, 0.8976377952755905, 0.889763779527559, 0.8818897637795275, 0.8740157480314961, 0.8661417322834646, 0.8582677165354331, 0.8503937007874016, 0.84251968503937, 0.8346456692913385, 0.8267716535433071, 0.8188976377952756, 0.8110236220472441, 0.8031496062992126, 0.7952755905511811, 0.7874015748031497, 0.7795275590551181, 0.7716535433070866, 0.7637795275590551, 0.7559055118110236, 0.7480314960629921, 0.7401574803149606, 0.7322834645669292, 0.7244094488188977, 0.7165354330708661, 0.7086614173228346, 0.7007874015748031, 0.6929133858267716, 0.6850393700787402, 0.6771653543307087, 0.6692913385826772, 0.6614173228346457, 0.6535433070866141, 0.6456692913385826, 0.6377952755905512, 0.6299212598425197, 0.6220472440944882, 0.6141732283464567, 0.6062992125984252, 0.5984251968503937, 0.5905511811023622, 0.5826771653543307, 0.5748031496062992, 0.5669291338582677, 0.5590551181102362, 0.5511811023622047, 0.5433070866141733, 0.5354330708661418, 0.5275590551181102, 0.5196850393700787, 0.5118110236220472, 0.5039370078740157, 0.49606299212598426, 0.4881889763779528, 0.48031496062992124, 0.47244094488188976, 0.4645669291338583, 0.4566929133858268, 0.44881889763779526, 0.4409448818897638, 0.4330708661417323, 0.4251968503937008, 0.41732283464566927, 0.4094488188976378, 0.4015748031496063, 0.3937007874015748, 0.3858267716535433, 0.3779527559055118, 0.3700787401574803, 0.36220472440944884, 0.3543307086614173, 0.3464566929133858, 0.33858267716535434, 0.33070866141732286, 0.3228346456692913, 0.31496062992125984, 0.30708661417322836, 0.2992125984251969, 0.29133858267716534, 0.28346456692913385, 0.2755905511811024, 0.2677165354330709, 0.25984251968503935, 0.25196850393700787, 0.2440944881889764, 0.23622047244094488, 0.2283464566929134, 0.2204724409448819, 0.2125984251968504, 0.2047244094488189, 0.1968503937007874, 0.1889763779527559, 0.18110236220472442, 0.1732283464566929, 0.16535433070866143, 0.15748031496062992, 0.14960629921259844, 0.14173228346456693, 0.13385826771653545, 0.12598425196850394, 0.11811023622047244, 0.11023622047244094, 0.10236220472440945, 0.09448818897637795, 0.08661417322834646, 0.07874015748031496, 0.07086614173228346, 0.06299212598425197, 0.05511811023622047, 0.047244094488188976, 0.03937007874015748, 0.031496062992125984, 0.023622047244094488, 0.015748031496062992, 0.007874015748031496, 0]
    ],
    // Spherical
    [
      // Mid
      [0.00015059065189787502, 0.0006022718974137975, 0.0013547716606548965, 0.0024076366639015356, 0.0037602327006450165, 0.005411745017609493, 0.007361178805529389, 0.009607359798384785, 0.012148934980735715, 0.014984373402728013, 0.01811196710228008, 0.021529832133895588, 0.025235909703481663, 0.029227967408489597, 0.03350360058263058, 0.03806023374435663, 0.042895122148234655, 0.04800535343827833, 0.05338784940224234, 0.059039367825822475, 0.06495650444564427, 0.071135694999864, 0.07757321737514644, 0.08426519384872738, 0.09120759342420814, 0.09839623425967753, 0.10582678618669683, 0.1134947733186315, 0.12139557674675772, 0.12952443732252045, 0.1378764585242665, 0.1464466094067262, 0.15522972763146653, 0.16422052257649078, 0.17341357852311157, 0.18280335791817726, 0.1923842047096866, 0.20215034775378332, 0.21209590429107733, 0.22221488349019886, 0.23250119005645137, 0.24294862790338917, 0.2535509038851079, 0.2643016315870012, 0.2751943351726967, 0.2862224532848589, 0.29737934299750507, 0.3086582838174551, 0.3200524817325059, 0.33155507330389, 0.3431591298005542, 0.35485766137276886, 0.3666436212625508, 0.378509910048368, 0.39044937992156514, 0.40245483899193585, 0.4145190556198494, 0.42663476277231915, 0.4387946624003919, 0.4509914298352197, 0.4632177182001663, 0.47546616283629095, 0.48772938573854385, 0.49999999999999994, 0.5122706142614561, 0.524533837163709, 0.5367822817998337, 0.5490085701647803, 0.5612053375996081, 0.5733652372276808, 0.5854809443801506, 0.5975451610080641, 0.609550620078435, 0.6214900899516319, 0.6333563787374492, 0.6451423386272312, 0.6568408701994457, 0.66844492669611, 0.6799475182674941, 0.6913417161825448, 0.702620657002495, 0.7137775467151409, 0.7248056648273034, 0.7356983684129988, 0.746449096114892, 0.7570513720966108, 0.7674988099435485, 0.7777851165098011, 0.7879040957089227, 0.7978496522462166, 0.8076157952903134, 0.8171966420818226, 0.8265864214768884, 0.8357794774235092, 0.8447702723685335, 0.8535533905932737, 0.8621235414757333, 0.8704755626774794, 0.8786044232532424, 0.8865052266813684, 0.8941732138133032, 0.9016037657403224, 0.9087924065757917, 0.9157348061512727, 0.9224267826248536, 0.928864305000136, 0.9350434955543556, 0.9409606321741775, 0.9466121505977577, 0.9519946465617217, 0.9571048778517653, 0.9619397662556434, 0.9664963994173694, 0.9707720325915103, 0.9747640902965183, 0.9784701678661044, 0.98188803289772, 0.985015626597272, 0.9878510650192642, 0.9903926402016152, 0.9926388211944706, 0.9945882549823906, 0.996239767299355, 0.9975923633360984, 0.9986452283393451, 0.9993977281025862, 0.9998494093481021, 1, 1, 0.9998494093481021, 0.9993977281025862, 0.9986452283393451, 0.9975923633360984, 0.996239767299355, 0.9945882549823906, 0.9926388211944706, 0.9903926402016152, 0.9878510650192642, 0.985015626597272, 0.98188803289772, 0.9784701678661044, 0.9747640902965183, 0.9707720325915103, 0.9664963994173694, 0.9619397662556434, 0.9571048778517653, 0.9519946465617217, 0.9466121505977577, 0.9409606321741775, 0.9350434955543556, 0.928864305000136, 0.9224267826248536, 0.9157348061512727, 0.9087924065757917, 0.9016037657403224, 0.8941732138133032, 0.8865052266813684, 0.8786044232532424, 0.8704755626774794, 0.8621235414757333, 0.8535533905932737, 0.8447702723685335, 0.8357794774235092, 0.8265864214768884, 0.8171966420818226, 0.8076157952903134, 0.7978496522462166, 0.7879040957089227, 0.7777851165098011, 0.7674988099435485, 0.7570513720966108, 0.746449096114892, 0.7356983684129988, 0.7248056648273034, 0.7137775467151409, 0.702620657002495, 0.6913417161825448, 0.6799475182674941, 0.66844492669611, 0.6568408701994457, 0.6451423386272312, 0.6333563787374492, 0.6214900899516319, 0.609550620078435, 0.5975451610080641, 0.5854809443801506, 0.5733652372276808, 0.5612053375996081, 0.5490085701647803, 0.5367822817998337, 0.524533837163709, 0.5122706142614561, 0.49999999999999994, 0.48772938573854385, 0.47546616283629095, 0.4632177182001663, 0.4509914298352197, 0.4387946624003919, 0.42663476277231915, 0.4145190556198494, 0.40245483899193585, 0.39044937992156514, 0.378509910048368, 0.3666436212625508, 0.35485766137276886, 0.3431591298005542, 0.33155507330389, 0.3200524817325059, 0.3086582838174551, 0.29737934299750507, 0.2862224532848589, 0.2751943351726967, 0.2643016315870012, 0.2535509038851079, 0.24294862790338917, 0.23250119005645137, 0.22221488349019886, 0.21209590429107733, 0.20215034775378332, 0.1923842047096866, 0.18280335791817726, 0.17341357852311157, 0.16422052257649078, 0.15522972763146653, 0.1464466094067262, 0.1378764585242665, 0.12952443732252045, 0.12139557674675772, 0.1134947733186315, 0.10582678618669683, 0.09839623425967753, 0.09120759342420814, 0.08426519384872738, 0.07757321737514644, 0.071135694999864, 0.06495650444564427, 0.059039367825822475, 0.05338784940224234, 0.04800535343827833, 0.042895122148234655, 0.03806023374435663, 0.03350360058263058, 0.029227967408489597, 0.025235909703481663, 0.021529832133895588, 0.01811196710228008, 0.014984373402728013, 0.012148934980735715, 0.009607359798384785, 0.007361178805529389, 0.005411745017609493, 0.0037602327006450165, 0.0024076366639015356, 0.0013547716606548965, 0.0006022718974137975, 0.00015059065189787502],
      [0.00015059065189787502, 0.0006022718974137975, 0.0013547716606548965, 0.0024076366639015356, 0.0037602327006450165, 0.005411745017609493, 0.007361178805529389, 0.009607359798384785, 0.012148934980735715, 0.014984373402728013, 0.01811196710228008, 0.021529832133895588, 0.025235909703481663, 0.029227967408489597, 0.03350360058263058, 0.03806023374435663, 0.042895122148234655, 0.04800535343827833, 0.05338784940224234, 0.059039367825822475, 0.06495650444564427, 0.071135694999864, 0.07757321737514644, 0.08426519384872738, 0.09120759342420814, 0.09839623425967753, 0.10582678618669683, 0.1134947733186315, 0.12139557674675772, 0.12952443732252045, 0.1378764585242665, 0.1464466094067262, 0.15522972763146653, 0.16422052257649078, 0.17341357852311157, 0.18280335791817726, 0.1923842047096866, 0.20215034775378332, 0.21209590429107733, 0.22221488349019886, 0.23250119005645137, 0.24294862790338917, 0.2535509038851079, 0.2643016315870012, 0.2751943351726967, 0.2862224532848589, 0.29737934299750507, 0.3086582838174551, 0.3200524817325059, 0.33155507330389, 0.3431591298005542, 0.35485766137276886, 0.3666436212625508, 0.378509910048368, 0.39044937992156514, 0.40245483899193585, 0.4145190556198494, 0.42663476277231915, 0.4387946624003919, 0.4509914298352197, 0.4632177182001663, 0.47546616283629095, 0.48772938573854385, 0.49999999999999994, 0.5122706142614561, 0.524533837163709, 0.5367822817998337, 0.5490085701647803, 0.5612053375996081, 0.5733652372276808, 0.5854809443801506, 0.5975451610080641, 0.609550620078435, 0.6214900899516319, 0.6333563787374492, 0.6451423386272312, 0.6568408701994457, 0.66844492669611, 0.6799475182674941, 0.6913417161825448, 0.702620657002495, 0.7137775467151409, 0.7248056648273034, 0.7356983684129988, 0.746449096114892, 0.7570513720966108, 0.7674988099435485, 0.7777851165098011, 0.7879040957089227, 0.7978496522462166, 0.8076157952903134, 0.8171966420818226, 0.8265864214768884, 0.8357794774235092, 0.8447702723685335, 0.8535533905932737, 0.8621235414757333, 0.8704755626774794, 0.8786044232532424, 0.8865052266813684, 0.8941732138133032, 0.9016037657403224, 0.9087924065757917, 0.9157348061512727, 0.9224267826248536, 0.928864305000136, 0.9350434955543556, 0.9409606321741775, 0.9466121505977577, 0.9519946465617217, 0.9571048778517653, 0.9619397662556434, 0.9664963994173694, 0.9707720325915103, 0.9747640902965183, 0.9784701678661044, 0.98188803289772, 0.985015626597272, 0.9878510650192642, 0.9903926402016152, 0.9926388211944706, 0.9945882549823906, 0.996239767299355, 0.9975923633360984, 0.9986452283393451, 0.9993977281025862, 0.9998494093481021, 1, 1, 0.9998494093481021, 0.9993977281025862, 0.9986452283393451, 0.9975923633360984, 0.996239767299355, 0.9945882549823906, 0.9926388211944706, 0.9903926402016152, 0.9878510650192642, 0.985015626597272, 0.98188803289772, 0.9784701678661044, 0.9747640902965183, 0.9707720325915103, 0.9664963994173694, 0.9619397662556434, 0.9571048778517653, 0.9519946465617217, 0.9466121505977577, 0.9409606321741775, 0.9350434955543556, 0.928864305000136, 0.9224267826248536, 0.9157348061512727, 0.9087924065757917, 0.9016037657403224, 0.8941732138133032, 0.8865052266813684, 0.8786044232532424, 0.8704755626774794, 0.8621235414757333, 0.8535533905932737, 0.8447702723685335, 0.8357794774235092, 0.8265864214768884, 0.8171966420818226, 0.8076157952903134, 0.7978496522462166, 0.7879040957089227, 0.7777851165098011, 0.7674988099435485, 0.7570513720966108, 0.746449096114892, 0.7356983684129988, 0.7248056648273034, 0.7137775467151409, 0.702620657002495, 0.6913417161825448, 0.6799475182674941, 0.66844492669611, 0.6568408701994457, 0.6451423386272312, 0.6333563787374492, 0.6214900899516319, 0.609550620078435, 0.5975451610080641, 0.5854809443801506, 0.5733652372276808, 0.5612053375996081, 0.5490085701647803, 0.5367822817998337, 0.524533837163709, 0.5122706142614561, 0.49999999999999994, 0.48772938573854385, 0.47546616283629095, 0.4632177182001663, 0.4509914298352197, 0.4387946624003919, 0.42663476277231915, 0.4145190556198494, 0.40245483899193585, 0.39044937992156514, 0.378509910048368, 0.3666436212625508, 0.35485766137276886, 0.3431591298005542, 0.33155507330389, 0.3200524817325059, 0.3086582838174551, 0.29737934299750507, 0.2862224532848589, 0.2751943351726967, 0.2643016315870012, 0.2535509038851079, 0.24294862790338917, 0.23250119005645137, 0.22221488349019886, 0.21209590429107733, 0.20215034775378332, 0.1923842047096866, 0.18280335791817726, 0.17341357852311157, 0.16422052257649078, 0.15522972763146653, 0.1464466094067262, 0.1378764585242665, 0.12952443732252045, 0.12139557674675772, 0.1134947733186315, 0.10582678618669683, 0.09839623425967753, 0.09120759342420814, 0.08426519384872738, 0.07757321737514644, 0.071135694999864, 0.06495650444564427, 0.059039367825822475, 0.05338784940224234, 0.04800535343827833, 0.042895122148234655, 0.03806023374435663, 0.03350360058263058, 0.029227967408489597, 0.025235909703481663, 0.021529832133895588, 0.01811196710228008, 0.014984373402728013, 0.012148934980735715, 0.009607359798384785, 0.007361178805529389, 0.005411745017609493, 0.0037602327006450165, 0.0024076366639015356, 0.0013547716606548965, 0.0006022718974137975, 0.00015059065189787502],
      [0.00015059065189787502, 0.0006022718974137975, 0.0013547716606548965, 0.0024076366639015356, 0.0037602327006450165, 0.005411745017609493, 0.007361178805529389, 0.009607359798384785, 0.012148934980735715, 0.014984373402728013, 0.01811196710228008, 0.021529832133895588, 0.025235909703481663, 0.029227967408489597, 0.03350360058263058, 0.03806023374435663, 0.042895122148234655, 0.04800535343827833, 0.05338784940224234, 0.059039367825822475, 0.06495650444564427, 0.071135694999864, 0.07757321737514644, 0.08426519384872738, 0.09120759342420814, 0.09839623425967753, 0.10582678618669683, 0.1134947733186315, 0.12139557674675772, 0.12952443732252045, 0.1378764585242665, 0.1464466094067262, 0.15522972763146653, 0.16422052257649078, 0.17341357852311157, 0.18280335791817726, 0.1923842047096866, 0.20215034775378332, 0.21209590429107733, 0.22221488349019886, 0.23250119005645137, 0.24294862790338917, 0.2535509038851079, 0.2643016315870012, 0.2751943351726967, 0.2862224532848589, 0.29737934299750507, 0.3086582838174551, 0.3200524817325059, 0.33155507330389, 0.3431591298005542, 0.35485766137276886, 0.3666436212625508, 0.378509910048368, 0.39044937992156514, 0.40245483899193585, 0.4145190556198494, 0.42663476277231915, 0.4387946624003919, 0.4509914298352197, 0.4632177182001663, 0.47546616283629095, 0.48772938573854385, 0.49999999999999994, 0.5122706142614561, 0.524533837163709, 0.5367822817998337, 0.5490085701647803, 0.5612053375996081, 0.5733652372276808, 0.5854809443801506, 0.5975451610080641, 0.609550620078435, 0.6214900899516319, 0.6333563787374492, 0.6451423386272312, 0.6568408701994457, 0.66844492669611, 0.6799475182674941, 0.6913417161825448, 0.702620657002495, 0.7137775467151409, 0.7248056648273034, 0.7356983684129988, 0.746449096114892, 0.7570513720966108, 0.7674988099435485, 0.7777851165098011, 0.7879040957089227, 0.7978496522462166, 0.8076157952903134, 0.8171966420818226, 0.8265864214768884, 0.8357794774235092, 0.8447702723685335, 0.8535533905932737, 0.8621235414757333, 0.8704755626774794, 0.8786044232532424, 0.8865052266813684, 0.8941732138133032, 0.9016037657403224, 0.9087924065757917, 0.9157348061512727, 0.9224267826248536, 0.928864305000136, 0.9350434955543556, 0.9409606321741775, 0.9466121505977577, 0.9519946465617217, 0.9571048778517653, 0.9619397662556434, 0.9664963994173694, 0.9707720325915103, 0.9747640902965183, 0.9784701678661044, 0.98188803289772, 0.985015626597272, 0.9878510650192642, 0.9903926402016152, 0.9926388211944706, 0.9945882549823906, 0.996239767299355, 0.9975923633360984, 0.9986452283393451, 0.9993977281025862, 0.9998494093481021, 1, 1, 0.9998494093481021, 0.9993977281025862, 0.9986452283393451, 0.9975923633360984, 0.996239767299355, 0.9945882549823906, 0.9926388211944706, 0.9903926402016152, 0.9878510650192642, 0.985015626597272, 0.98188803289772, 0.9784701678661044, 0.9747640902965183, 0.9707720325915103, 0.9664963994173694, 0.9619397662556434, 0.9571048778517653, 0.9519946465617217, 0.9466121505977577, 0.9409606321741775, 0.9350434955543556, 0.928864305000136, 0.9224267826248536, 0.9157348061512727, 0.9087924065757917, 0.9016037657403224, 0.8941732138133032, 0.8865052266813684, 0.8786044232532424, 0.8704755626774794, 0.8621235414757333, 0.8535533905932737, 0.8447702723685335, 0.8357794774235092, 0.8265864214768884, 0.8171966420818226, 0.8076157952903134, 0.7978496522462166, 0.7879040957089227, 0.7777851165098011, 0.7674988099435485, 0.7570513720966108, 0.746449096114892, 0.7356983684129988, 0.7248056648273034, 0.7137775467151409, 0.702620657002495, 0.6913417161825448, 0.6799475182674941, 0.66844492669611, 0.6568408701994457, 0.6451423386272312, 0.6333563787374492, 0.6214900899516319, 0.609550620078435, 0.5975451610080641, 0.5854809443801506, 0.5733652372276808, 0.5612053375996081, 0.5490085701647803, 0.5367822817998337, 0.524533837163709, 0.5122706142614561, 0.49999999999999994, 0.48772938573854385, 0.47546616283629095, 0.4632177182001663, 0.4509914298352197, 0.4387946624003919, 0.42663476277231915, 0.4145190556198494, 0.40245483899193585, 0.39044937992156514, 0.378509910048368, 0.3666436212625508, 0.35485766137276886, 0.3431591298005542, 0.33155507330389, 0.3200524817325059, 0.3086582838174551, 0.29737934299750507, 0.2862224532848589, 0.2751943351726967, 0.2643016315870012, 0.2535509038851079, 0.24294862790338917, 0.23250119005645137, 0.22221488349019886, 0.21209590429107733, 0.20215034775378332, 0.1923842047096866, 0.18280335791817726, 0.17341357852311157, 0.16422052257649078, 0.15522972763146653, 0.1464466094067262, 0.1378764585242665, 0.12952443732252045, 0.12139557674675772, 0.1134947733186315, 0.10582678618669683, 0.09839623425967753, 0.09120759342420814, 0.08426519384872738, 0.07757321737514644, 0.071135694999864, 0.06495650444564427, 0.059039367825822475, 0.05338784940224234, 0.04800535343827833, 0.042895122148234655, 0.03806023374435663, 0.03350360058263058, 0.029227967408489597, 0.025235909703481663, 0.021529832133895588, 0.01811196710228008, 0.014984373402728013, 0.012148934980735715, 0.009607359798384785, 0.007361178805529389, 0.005411745017609493, 0.0037602327006450165, 0.0024076366639015356, 0.0013547716606548965, 0.0006022718974137975, 0.00015059065189787502],
      [0.00015059065189787502, 0.0006022718974137975, 0.0013547716606548965, 0.0024076366639015356, 0.0037602327006450165, 0.005411745017609493, 0.007361178805529389, 0.009607359798384785, 0.012148934980735715, 0.014984373402728013, 0.01811196710228008, 0.021529832133895588, 0.025235909703481663, 0.029227967408489597, 0.03350360058263058, 0.03806023374435663, 0.042895122148234655, 0.04800535343827833, 0.05338784940224234, 0.059039367825822475, 0.06495650444564427, 0.071135694999864, 0.07757321737514644, 0.08426519384872738, 0.09120759342420814, 0.09839623425967753, 0.10582678618669683, 0.1134947733186315, 0.12139557674675772, 0.12952443732252045, 0.1378764585242665, 0.1464466094067262, 0.15522972763146653, 0.16422052257649078, 0.17341357852311157, 0.18280335791817726, 0.1923842047096866, 0.20215034775378332, 0.21209590429107733, 0.22221488349019886, 0.23250119005645137, 0.24294862790338917, 0.2535509038851079, 0.2643016315870012, 0.2751943351726967, 0.2862224532848589, 0.29737934299750507, 0.3086582838174551, 0.3200524817325059, 0.33155507330389, 0.3431591298005542, 0.35485766137276886, 0.3666436212625508, 0.378509910048368, 0.39044937992156514, 0.40245483899193585, 0.4145190556198494, 0.42663476277231915, 0.4387946624003919, 0.4509914298352197, 0.4632177182001663, 0.47546616283629095, 0.48772938573854385, 0.49999999999999994, 0.5122706142614561, 0.524533837163709, 0.5367822817998337, 0.5490085701647803, 0.5612053375996081, 0.5733652372276808, 0.5854809443801506, 0.5975451610080641, 0.609550620078435, 0.6214900899516319, 0.6333563787374492, 0.6451423386272312, 0.6568408701994457, 0.66844492669611, 0.6799475182674941, 0.6913417161825448, 0.702620657002495, 0.7137775467151409, 0.7248056648273034, 0.7356983684129988, 0.746449096114892, 0.7570513720966108, 0.7674988099435485, 0.7777851165098011, 0.7879040957089227, 0.7978496522462166, 0.8076157952903134, 0.8171966420818226, 0.8265864214768884, 0.8357794774235092, 0.8447702723685335, 0.8535533905932737, 0.8621235414757333, 0.8704755626774794, 0.8786044232532424, 0.8865052266813684, 0.8941732138133032, 0.9016037657403224, 0.9087924065757917, 0.9157348061512727, 0.9224267826248536, 0.928864305000136, 0.9350434955543556, 0.9409606321741775, 0.9466121505977577, 0.9519946465617217, 0.9571048778517653, 0.9619397662556434, 0.9664963994173694, 0.9707720325915103, 0.9747640902965183, 0.9784701678661044, 0.98188803289772, 0.985015626597272, 0.9878510650192642, 0.9903926402016152, 0.9926388211944706, 0.9945882549823906, 0.996239767299355, 0.9975923633360984, 0.9986452283393451, 0.9993977281025862, 0.9998494093481021, 1, 1, 0.9998494093481021, 0.9993977281025862, 0.9986452283393451, 0.9975923633360984, 0.996239767299355, 0.9945882549823906, 0.9926388211944706, 0.9903926402016152, 0.9878510650192642, 0.985015626597272, 0.98188803289772, 0.9784701678661044, 0.9747640902965183, 0.9707720325915103, 0.9664963994173694, 0.9619397662556434, 0.9571048778517653, 0.9519946465617217, 0.9466121505977577, 0.9409606321741775, 0.9350434955543556, 0.928864305000136, 0.9224267826248536, 0.9157348061512727, 0.9087924065757917, 0.9016037657403224, 0.8941732138133032, 0.8865052266813684, 0.8786044232532424, 0.8704755626774794, 0.8621235414757333, 0.8535533905932737, 0.8447702723685335, 0.8357794774235092, 0.8265864214768884, 0.8171966420818226, 0.8076157952903134, 0.7978496522462166, 0.7879040957089227, 0.7777851165098011, 0.7674988099435485, 0.7570513720966108, 0.746449096114892, 0.7356983684129988, 0.7248056648273034, 0.7137775467151409, 0.702620657002495, 0.6913417161825448, 0.6799475182674941, 0.66844492669611, 0.6568408701994457, 0.6451423386272312, 0.6333563787374492, 0.6214900899516319, 0.609550620078435, 0.5975451610080641, 0.5854809443801506, 0.5733652372276808, 0.5612053375996081, 0.5490085701647803, 0.5367822817998337, 0.524533837163709, 0.5122706142614561, 0.49999999999999994, 0.48772938573854385, 0.47546616283629095, 0.4632177182001663, 0.4509914298352197, 0.4387946624003919, 0.42663476277231915, 0.4145190556198494, 0.40245483899193585, 0.39044937992156514, 0.378509910048368, 0.3666436212625508, 0.35485766137276886, 0.3431591298005542, 0.33155507330389, 0.3200524817325059, 0.3086582838174551, 0.29737934299750507, 0.2862224532848589, 0.2751943351726967, 0.2643016315870012, 0.2535509038851079, 0.24294862790338917, 0.23250119005645137, 0.22221488349019886, 0.21209590429107733, 0.20215034775378332, 0.1923842047096866, 0.18280335791817726, 0.17341357852311157, 0.16422052257649078, 0.15522972763146653, 0.1464466094067262, 0.1378764585242665, 0.12952443732252045, 0.12139557674675772, 0.1134947733186315, 0.10582678618669683, 0.09839623425967753, 0.09120759342420814, 0.08426519384872738, 0.07757321737514644, 0.071135694999864, 0.06495650444564427, 0.059039367825822475, 0.05338784940224234, 0.04800535343827833, 0.042895122148234655, 0.03806023374435663, 0.03350360058263058, 0.029227967408489597, 0.025235909703481663, 0.021529832133895588, 0.01811196710228008, 0.014984373402728013, 0.012148934980735715, 0.009607359798384785, 0.007361178805529389, 0.005411745017609493, 0.0037602327006450165, 0.0024076366639015356, 0.0013547716606548965, 0.0006022718974137975, 0.00015059065189787502],
      [0.00015059065189787502, 0.0006022718974137975, 0.0013547716606548965, 0.0024076366639015356, 0.0037602327006450165, 0.005411745017609493, 0.007361178805529389, 0.009607359798384785, 0.012148934980735715, 0.014984373402728013, 0.01811196710228008, 0.021529832133895588, 0.025235909703481663, 0.029227967408489597, 0.03350360058263058, 0.03806023374435663, 0.042895122148234655, 0.04800535343827833, 0.05338784940224234, 0.059039367825822475, 0.06495650444564427, 0.071135694999864, 0.07757321737514644, 0.08426519384872738, 0.09120759342420814, 0.09839623425967753, 0.10582678618669683, 0.1134947733186315, 0.12139557674675772, 0.12952443732252045, 0.1378764585242665, 0.1464466094067262, 0.15522972763146653, 0.16422052257649078, 0.17341357852311157, 0.18280335791817726, 0.1923842047096866, 0.20215034775378332, 0.21209590429107733, 0.22221488349019886, 0.23250119005645137, 0.24294862790338917, 0.2535509038851079, 0.2643016315870012, 0.2751943351726967, 0.2862224532848589, 0.29737934299750507, 0.3086582838174551, 0.3200524817325059, 0.33155507330389, 0.3431591298005542, 0.35485766137276886, 0.3666436212625508, 0.378509910048368, 0.39044937992156514, 0.40245483899193585, 0.4145190556198494, 0.42663476277231915, 0.4387946624003919, 0.4509914298352197, 0.4632177182001663, 0.47546616283629095, 0.48772938573854385, 0.49999999999999994, 0.5122706142614561, 0.524533837163709, 0.5367822817998337, 0.5490085701647803, 0.5612053375996081, 0.5733652372276808, 0.5854809443801506, 0.5975451610080641, 0.609550620078435, 0.6214900899516319, 0.6333563787374492, 0.6451423386272312, 0.6568408701994457, 0.66844492669611, 0.6799475182674941, 0.6913417161825448, 0.702620657002495, 0.7137775467151409, 0.7248056648273034, 0.7356983684129988, 0.746449096114892, 0.7570513720966108, 0.7674988099435485, 0.7777851165098011, 0.7879040957089227, 0.7978496522462166, 0.8076157952903134, 0.8171966420818226, 0.8265864214768884, 0.8357794774235092, 0.8447702723685335, 0.8535533905932737, 0.8621235414757333, 0.8704755626774794, 0.8786044232532424, 0.8865052266813684, 0.8941732138133032, 0.9016037657403224, 0.9087924065757917, 0.9157348061512727, 0.9224267826248536, 0.928864305000136, 0.9350434955543556, 0.9409606321741775, 0.9466121505977577, 0.9519946465617217, 0.9571048778517653, 0.9619397662556434, 0.9664963994173694, 0.9707720325915103, 0.9747640902965183, 0.9784701678661044, 0.98188803289772, 0.985015626597272, 0.9878510650192642, 0.9903926402016152, 0.9926388211944706, 0.9945882549823906, 0.996239767299355, 0.9975923633360984, 0.9986452283393451, 0.9993977281025862, 0.9998494093481021, 1, 1, 0.9998494093481021, 0.9993977281025862, 0.9986452283393451, 0.9975923633360984, 0.996239767299355, 0.9945882549823906, 0.9926388211944706, 0.9903926402016152, 0.9878510650192642, 0.985015626597272, 0.98188803289772, 0.9784701678661044, 0.9747640902965183, 0.9707720325915103, 0.9664963994173694, 0.9619397662556434, 0.9571048778517653, 0.9519946465617217, 0.9466121505977577, 0.9409606321741775, 0.9350434955543556, 0.928864305000136, 0.9224267826248536, 0.9157348061512727, 0.9087924065757917, 0.9016037657403224, 0.8941732138133032, 0.8865052266813684, 0.8786044232532424, 0.8704755626774794, 0.8621235414757333, 0.8535533905932737, 0.8447702723685335, 0.8357794774235092, 0.8265864214768884, 0.8171966420818226, 0.8076157952903134, 0.7978496522462166, 0.7879040957089227, 0.7777851165098011, 0.7674988099435485, 0.7570513720966108, 0.746449096114892, 0.7356983684129988, 0.7248056648273034, 0.7137775467151409, 0.702620657002495, 0.6913417161825448, 0.6799475182674941, 0.66844492669611, 0.6568408701994457, 0.6451423386272312, 0.6333563787374492, 0.6214900899516319, 0.609550620078435, 0.5975451610080641, 0.5854809443801506, 0.5733652372276808, 0.5612053375996081, 0.5490085701647803, 0.5367822817998337, 0.524533837163709, 0.5122706142614561, 0.49999999999999994, 0.48772938573854385, 0.47546616283629095, 0.4632177182001663, 0.4509914298352197, 0.4387946624003919, 0.42663476277231915, 0.4145190556198494, 0.40245483899193585, 0.39044937992156514, 0.378509910048368, 0.3666436212625508, 0.35485766137276886, 0.3431591298005542, 0.33155507330389, 0.3200524817325059, 0.3086582838174551, 0.29737934299750507, 0.2862224532848589, 0.2751943351726967, 0.2643016315870012, 0.2535509038851079, 0.24294862790338917, 0.23250119005645137, 0.22221488349019886, 0.21209590429107733, 0.20215034775378332, 0.1923842047096866, 0.18280335791817726, 0.17341357852311157, 0.16422052257649078, 0.15522972763146653, 0.1464466094067262, 0.1378764585242665, 0.12952443732252045, 0.12139557674675772, 0.1134947733186315, 0.10582678618669683, 0.09839623425967753, 0.09120759342420814, 0.08426519384872738, 0.07757321737514644, 0.071135694999864, 0.06495650444564427, 0.059039367825822475, 0.05338784940224234, 0.04800535343827833, 0.042895122148234655, 0.03806023374435663, 0.03350360058263058, 0.029227967408489597, 0.025235909703481663, 0.021529832133895588, 0.01811196710228008, 0.014984373402728013, 0.012148934980735715, 0.009607359798384785, 0.007361178805529389, 0.005411745017609493, 0.0037602327006450165, 0.0024076366639015356, 0.0013547716606548965, 0.0006022718974137975, 0.00015059065189787502]
    ]
  ],
  // [0, 0.007874015748031496, 0.015748031496062992, 0.023622047244094488, 0.031496062992125984, 0.03937007874015748, 0.047244094488188976, 0.05511811023622047, 0.06299212598425197, 0.07086614173228346, 0.07874015748031496, 0.08661417322834646, 0.09448818897637795, 0.10236220472440945, 0.11023622047244094, 0.11811023622047244, 0.12598425196850394, 0.13385826771653545, 0.14173228346456693, 0.14960629921259844, 0.15748031496062992, 0.16535433070866143, 0.1732283464566929, 0.18110236220472442, 0.1889763779527559, 0.1968503937007874, 0.2047244094488189, 0.2125984251968504, 0.2204724409448819, 0.2283464566929134, 0.23622047244094488, 0.2440944881889764, 0.25196850393700787, 0.25984251968503935, 0.2677165354330709, 0.2755905511811024, 0.28346456692913385, 0.29133858267716534, 0.2992125984251969, 0.30708661417322836, 0.31496062992125984, 0.3228346456692913, 0.33070866141732286, 0.33858267716535434, 0.3464566929133858, 0.3543307086614173, 0.36220472440944884, 0.3700787401574803, 0.3779527559055118, 0.3858267716535433, 0.3937007874015748, 0.4015748031496063, 0.4094488188976378, 0.41732283464566927, 0.4251968503937008, 0.4330708661417323, 0.4409448818897638, 0.44881889763779526, 0.4566929133858268, 0.4645669291338583, 0.47244094488188976, 0.48031496062992124, 0.4881889763779528, 0.49606299212598426, 0.5039370078740157, 0.5118110236220472, 0.5196850393700787, 0.5275590551181102, 0.5354330708661418, 0.5433070866141733, 0.5511811023622047, 0.5590551181102362, 0.5669291338582677, 0.5748031496062992, 0.5826771653543307, 0.5905511811023622, 0.5984251968503937, 0.6062992125984252, 0.6141732283464567, 0.6220472440944882, 0.6299212598425197, 0.6377952755905512, 0.6456692913385826, 0.6535433070866141, 0.6614173228346457, 0.6692913385826772, 0.6771653543307087, 0.6850393700787402, 0.6929133858267716, 0.7007874015748031, 0.7086614173228346, 0.7165354330708661, 0.7244094488188977, 0.7322834645669292, 0.7401574803149606, 0.7480314960629921, 0.7559055118110236, 0.7637795275590551, 0.7716535433070866, 0.7795275590551181, 0.7874015748031497, 0.7952755905511811, 0.8031496062992126, 0.8110236220472441, 0.8188976377952756, 0.8267716535433071, 0.8346456692913385, 0.84251968503937, 0.8503937007874016, 0.8582677165354331, 0.8661417322834646, 0.8740157480314961, 0.8818897637795275, 0.889763779527559, 0.8976377952755905, 0.905511811023622, 0.9133858267716536, 0.9212598425196851, 0.9291338582677166, 0.937007874015748, 0.9448818897637795, 0.952755905511811, 0.9606299212598425, 0.968503937007874, 0.9763779527559056, 0.984251968503937, 0.9921259842519685, 1, -1, -0.9921259842519685, -0.984251968503937, -0.9763779527559056, -0.968503937007874, -0.9606299212598425, -0.952755905511811, -0.9448818897637795, -0.937007874015748, -0.9291338582677166, -0.9212598425196851, -0.9133858267716536, -0.905511811023622, -0.8976377952755905, -0.889763779527559, -0.8818897637795275, -0.8740157480314961, -0.8661417322834646, -0.8582677165354331, -0.8503937007874016, -0.84251968503937, -0.8346456692913385, -0.8267716535433071, -0.8188976377952756, -0.8110236220472441, -0.8031496062992126, -0.7952755905511811, -0.7874015748031497, -0.7795275590551181, -0.7716535433070866, -0.7637795275590551, -0.7559055118110236, -0.7480314960629921, -0.7401574803149606, -0.7322834645669292, -0.7244094488188977, -0.7165354330708661, -0.7086614173228346, -0.7007874015748031, -0.6929133858267716, -0.6850393700787402, -0.6771653543307087, -0.6692913385826772, -0.6614173228346457, -0.6535433070866141, -0.6456692913385826, -0.6377952755905512, -0.6299212598425197, -0.6220472440944882, -0.6141732283464567, -0.6062992125984252, -0.5984251968503937, -0.5905511811023622, -0.5826771653543307, -0.5748031496062992, -0.5669291338582677, -0.5590551181102362, -0.5511811023622047, -0.5433070866141733, -0.5354330708661418, -0.5275590551181102, -0.5196850393700787, -0.5118110236220472, -0.5039370078740157, -0.49606299212598426, -0.4881889763779528, -0.48031496062992124, -0.47244094488188976, -0.4645669291338583, -0.4566929133858268, -0.44881889763779526, -0.4409448818897638, -0.4330708661417323, -0.4251968503937008, -0.41732283464566927, -0.4094488188976378, -0.4015748031496063, -0.3937007874015748, -0.3858267716535433, -0.3779527559055118, -0.3700787401574803, -0.36220472440944884, -0.3543307086614173, -0.3464566929133858, -0.33858267716535434, -0.33070866141732286, -0.3228346456692913, -0.31496062992125984, -0.30708661417322836, -0.2992125984251969, -0.29133858267716534, -0.28346456692913385, -0.2755905511811024, -0.2677165354330709, -0.25984251968503935, -0.25196850393700787, -0.2440944881889764, -0.23622047244094488, -0.2283464566929134, -0.2204724409448819, -0.2125984251968504, -0.2047244094488189, -0.1968503937007874, -0.1889763779527559, -0.18110236220472442, -0.1732283464566929, -0.16535433070866143, -0.15748031496062992, -0.14960629921259844, -0.14173228346456693, -0.13385826771653545, -0.12598425196850394, -0.11811023622047244, -0.11023622047244094, -0.10236220472440945, -0.09448818897637795, -0.08661417322834646, -0.07874015748031496, -0.07086614173228346, -0.06299212598425197, -0.05511811023622047, -0.047244094488188976, -0.03937007874015748, -0.031496062992125984, -0.023622047244094488, -0.015748031496062992, -0.007874015748031496, 0],
  separateChannels (view8) {
    const channelSize = view8.length * 0.25
    const channelR = new Uint8ClampedArray(channelSize)
    const channelG = new Uint8ClampedArray(channelSize)
    const channelB = new Uint8ClampedArray(channelSize)

    const len = view8.length
    for (let i = 0, j = 0; i < len; i += 4, j++) {
      channelR[j] = view8[i]
      channelG[j] = view8[i + 1]
      channelB[j] = view8[i + 2]
    }
    return [channelR, channelG, channelB]
  },
  getHistograms (data) {
    const histR = new Uint32Array(256)
    const histG = new Uint32Array(256)
    const histB = new Uint32Array(256)

    const len = data.length
    for (let i = 0; i < len; i += 4) {
      histR[data[i] & 0b11111111]++
      histG[data[i + 1] & 0xFF]++
      histB[data[i + 2] & 0xFF]++
    }

    const counts = [histR[0], histR[255], histG[0], histG[255], histB[0], histB[255]]

    const highestR = util.maxHistogramPoint(histR)
    const highestG = util.maxHistogramPoint(histG)
    const highestB = util.maxHistogramPoint(histB)

    const factorR = 100 / highestR
    const factorG = 100 / highestG
    const factorB = 100 / highestB

    for (let i = 0; i < 256; i++) {
      histR[i] = histR[i] > 0 ? util.clamp(histR[i] * factorR, 1, 100) : 0
      histG[i] = histG[i] > 0 ? util.clamp(histG[i] * factorG, 1, 100) : 0
      histB[i] = histB[i] > 0 ? util.clamp(histB[i] * factorB, 1, 100) : 0
    }
    return [histR, histG, histB, counts]
  },
  drawHistogram (ctx, histogram, height = 100) {
    ctx.beginPath()
    for (let i = 0; i < 256; i++) {
      ctx.moveTo(i + 0.5, height)
      ctx.lineTo(i + 0.5, height - histogram[i])
    }
    ctx.stroke()
    // ctx.beginPath
    // for (let i = 0; i < 256; i++) {

    // }
  },
  histogramEqualization (channel) {
    const counted = this.getCount(channel)
    const cdf = this.getCdf(counted)
    const min = util.minInArray(channel)
    const max = util.maxInArray(channel)
    this.equalizeLevel(channel, cdf, min, max)
    return channel
  },
  getChannel (array, index) {
    const data = new Uint8ClampedArray(array.length / 4)
    const len = array.length
    for (let i = index, j = 0; i < len; i += 4, j++) {
      data[j] = array[i]
    }
    return data
  },
  getCount (channel) {
    const counted = new Uint32Array(256)
    const len = channel.length
    for (let i = 0; i < len; i++) {
      counted[channel[i] & 0xFF]++
      // for (let j = 0; j < 256; j++) {
      //   if (channelArray[i] === j) {
      //     counted[j]++
      //     break
      //   }
      // }
    }
    return counted
  },
  getCdf (countedArray) {
    const cdf = new Uint32Array(countedArray)
    const len = countedArray.length
    for (let i = 1; i < len; i++) {
      cdf[i] += cdf[i - 1]
    }
    return cdf
  },
  equalizeLevel (channel, cdf, min, max) {
    // const factor = 1 / 255
    const len = channel.length
    for (let i = 0; i < len; i++) {
      channel[i] = Math.round((cdf[channel[i]] - cdf[min]) / (len - cdf[min]) * 255)
    }
  },
  getAutoClips (channel, limit) {
    const counted = this.getCount(channel)
    const limitL = counted[0] + limit
    const limitR = counted[255] + limit
    let sumL = 0
    let sumR = 0
    let clipL = 0
    let clipR = 255
    for (let i = 0; i < 256; i++) {
      sumL += counted[i]
      if (sumL <= limitL) {
        clipL = i
      } else {
        break
      }
    }
    for (let i = 255; i >= 0; i--) {
      sumR += counted[i]
      if (sumR <= limitR) {
        clipR = i
      } else {
        break
      }
    }
    return [clipL, clipR]
  },
  spread (channel, clipL, clipR) {
    // Example: clipL: 10, clipR: 230, newCenter: 90
    const shift = Math.round(((255 - clipR) - clipL) * 0.5)
    const gap = clipL + shift
    const gapDistance = util.findPercentage(gap, 127, 0)
    const factor = gapDistance > 0 ? Math.round(gap / gapDistance) : 0
    // const newCenter = 127 - shift
    const len = channel.length
    const dividerA = 1 / (0 - 127) * -1 * factor
    const dividerB = 1 / (255 - 128) * factor
    // Shift
    for (let i = 0; i < len; i++) {
      channel[i] += shift
      if (channel[i] <= 127) {
        channel[i] += (channel[i] - 127) * dividerA
      } else {
        channel[i] += (channel[i] - 128) * dividerB
      }
    }
  },
  adaptativeSpread (channel, width, height, amount) {
    const squareSize = 8
    const totalBlocksX = Math.ceil(width / squareSize)
    const totalBlocksY = Math.ceil(height / squareSize)
    const totalSquares = totalBlocksX * totalBlocksY
    const blocks = Array(totalSquares)
    // Initialize blocks
    for (let i = 0; i < totalSquares; i++) {
      blocks[i] = new Uint8ClampedArray(squareSize * squareSize)
    }
    // Fill blocks
    let blockI = 0
    for (let blockY = 0; blockY < totalBlocksY; blockY++) {
      for (let blockX = 0; blockX < totalBlocksX; blockX++) {
        let squareIndex = 0
        for (let y = 0; y < squareSize; y++) {
          for (let x = 0; x < squareSize; x++, squareIndex++) {
            blocks[blockI][squareIndex] = channel[(blockY * squareSize * width + y * width) + (blockX * squareSize + x)]
          }
        }
        blockI++
      }
    }
    // Process
    const limit = Math.round(squareSize * squareSize * 0.001)
    for (let i = 0; i < totalSquares; i++) {
      let [clipL, clipR] = this.getAutoClips(blocks[i], limit)
      clipL = util.lerp(0, clipL, amount / 100)
      clipR = util.lerp(255, clipR, amount / 100)
      this.spread(blocks[i], clipL, clipR)
    }
    // Reassign
    blockI = 0
    for (let blockY = 0; blockY < totalBlocksY; blockY++) {
      for (let blockX = 0; blockX < totalBlocksX; blockX++) {
        let squareIndex = 0
        for (let y = 0; y < squareSize; y++) {
          for (let x = 0; x < squareSize; x++, squareIndex++) {
            channel[(blockY * squareSize * width + y * width) + (blockX * squareSize + x)] = blocks[blockI][squareIndex]
          }
        }
        blockI++
      }
    }
  },
  moveSection (channel, amount, range, interpolation, limitLeft = 0, limitRight = 255) {
    const len = channel.length
    const factors = this.factors[interpolation][range]
    for (let i = 0; i < len; i++) {
      channel[i] += amount * factors[channel[i]]
    }
  },
  changeCenter (channel, newMidPoint) {
    const factor = 127 - newMidPoint
    const len = channel.length
    let distance
    for (let i = 0; i < len; i++) {
      if (channel[i] <= newMidPoint) {
        distance = util.findPercentage(channel[i], 0, newMidPoint)
      } else {
        distance = util.findPercentage(channel[i], 255, newMidPoint)
      }
      channel[i] += factor * distance
    }
  },
  drawRGB (ctx, histR, histG, histB) {
    const colorRed = 'red'
    ctx.strokeStyle = colorRed
    ctx.beginPath()
    for (let i = 0; i < 256; i++) {
      // ctx.fillRect(i + 0.5, 100 - histR[i], 1, 100 - histR[i - 1])
      ctx.moveTo(i + 0.5, 100 - histR[i])
      ctx.lineTo(i + 0.5, 100 - histR[i - 1])
    }
    ctx.stroke()

    ctx.strokeStyle = 'green'
    ctx.beginPath()
    for (let i = 0; i < 256; i++) {
      ctx.moveTo(i + 0.5, 100 - histG[i])
      ctx.lineTo(i + 0.5, 100 - histG[i - 1])
    }
    ctx.stroke()

    ctx.strokeStyle = 'blue'
    ctx.beginPath()
    for (let i = 0; i < 256; i++) {
      ctx.moveTo(i + 0.5, 100 - histB[i])
      ctx.lineTo(i + 0.5, 100 - histB[i - 1])
    }
    ctx.stroke()
  },
  RGBToHSL (r, g, b) {
    // Make r, g, and b fractions of 1
    r /= 255
    g /= 255
    b /= 255

    // Find greatest and smallest channel values
    const cmin = Math.min(r, g, b)
    const cmax = Math.max(r, g, b)
    const delta = cmax - cmin
    let h = 0
    let s = 0
    let l = 0

    // Calculate hue
    // No difference
    if (delta === 0) {
      h = 0
    } else if (cmax === r) {
      // Red is max
      h = ((g - b) / delta) % 6
    } else if (cmax === g) {
      // Green is max
      h = (b - r) / delta + 2
    } else {
      // Blue is max
      h = (r - g) / delta + 4
    }

    h = Math.round(h * 60)

    // Make negative hues positive behind 360°
    if (h < 0) { h += 360 }

    // Calculate lightness
    l = (cmax + cmin) * 0.5

    // Calculate saturation
    s = delta === 0 ? 0 : delta / (1 - Math.abs(2 * l - 1))

    // Multiply l and s by 100
    s = +(s * 100).toFixed(1)
    l = +(l * 100).toFixed(1)

    // return 'hsl(' + h + ',' + s + '%,' + l + '%)'
    return [h, s, l]
  },
  HSLToRGB (h, s, l) {
    // Must be fractions of 1
    s *= 0.01
    l *= 0.01

    const c = (1 - Math.abs(2 * l - 1)) * s
    const x = c * (1 - Math.abs((h / 60) % 2 - 1))
    const m = l - c * 0.5
    let r = 0
    let g = 0
    let b = 0
    if (h >= 0 && h < 60) {
      r = c
      g = x
      b = 0
    } else if (h >= 60 && h < 120) {
      r = x
      g = c
      b = 0
    } else if (h >= 120 && h < 180) {
      r = 0
      g = c
      b = x
    } else if (h >= 180 && h < 240) {
      r = 0
      g = x
      b = c
    } else if (h >= 240 && h < 300) {
      r = x
      g = 0
      b = c
    } else if (h >= 300 && h < 360) {
      r = c
      g = 0
      b = x
    }
    r = Math.round((r + m) * 255)
    g = Math.round((g + m) * 255)
    b = Math.round((b + m) * 255)
    return [r, g, b]
  },
  processImage (inImg) {
    // const width = inImg.width
    // const height = inImg.height
    const src = new Uint32Array(inImg.data.buffer)
    const isValueHistogram = true

    const histBrightness = (new Array(256)).fill(0)
    const histR = (new Array(256)).fill(0)
    const histG = (new Array(256)).fill(0)
    const histB = (new Array(256)).fill(0)

    for (let i = 0; i < src.length; i++) {
      const r = src[i] & 0xFF
      const g = (src[i] >> 8) & 0xFF
      const b = (src[i] >> 16) & 0xFF
      histBrightness[r]++
      histBrightness[g]++
      histBrightness[b]++
      histR[r]++
      histG[g]++
      histB[b]++
    }

    let maxBrightness = 0
    if (isValueHistogram) {
      for (let i = 1; i < 256; i++) {
        if (maxBrightness < histBrightness[i]) {
          maxBrightness = histBrightness[i]
        }
      }
    } else {
      for (let i = 0; i < 256; i++) {
        if (maxBrightness < histR[i]) {
          maxBrightness = histR[i]
        } else if (maxBrightness < histG[i]) {
          maxBrightness = histG[i]
        } else if (maxBrightness < histB[i]) {
          maxBrightness = histB[i]
        }
      }
    }

    const canvas = document.getElementById('canvasHistogram')
    const ctx = canvas.getContext('2d')
    const guideHeight = 8
    const startY = (canvas.height - guideHeight)
    const dx = canvas.width / 256
    const dy = startY / maxBrightness
    ctx.lineWidth = dx
    ctx.fillStyle = '#fff'
    ctx.fillRect(0, 0, canvas.width, canvas.height)

    for (let i = 0; i < 256; i++) {
      const x = i * dx
      if (isValueHistogram) {
        // Value
        ctx.strokeStyle = '#000000'
        ctx.beginPath()
        ctx.moveTo(x, startY)
        ctx.lineTo(x, startY - histBrightness[i] * dy)
        ctx.closePath()
        ctx.stroke()
      } else {
        // Red
        ctx.strokeStyle = 'rgba(220,0,0,0.5)'
        ctx.beginPath()
        ctx.moveTo(x, startY)
        ctx.lineTo(x, startY - histR[i] * dy)
        ctx.closePath()
        ctx.stroke()
        // Green
        ctx.strokeStyle = 'rgba(0,210,0,0.5)'
        ctx.beginPath()
        ctx.moveTo(x, startY)
        ctx.lineTo(x, startY - histG[i] * dy)
        ctx.closePath()
        ctx.stroke()
        // Blue
        ctx.strokeStyle = 'rgba(0,0,255,0.5)'
        ctx.beginPath()
        ctx.moveTo(x, startY)
        ctx.lineTo(x, startY - histB[i] * dy)
        ctx.closePath()
        ctx.stroke()
      }
      // Guide
      ctx.strokeStyle = 'rgb(' + i + ', ' + i + ', ' + i + ')'
      ctx.beginPath()
      ctx.moveTo(x, startY)
      ctx.lineTo(x, canvas.height)
      ctx.closePath()
      ctx.stroke()
    }
  },
  previewFast () {
    console.log('prev')
    const lowestPixel = this.lowestPixel
    const highestPixel = this.highestPixel

    const tempdata = this.tempData.data

    const canvas = this.getCurrentCanvas()
    const context = canvas.getContext('2d')
    const imageData = context.createImageData(canvas.width, canvas.height)
    const length = imageData.data.length

    const buf = new ArrayBuffer(length)
    const buf8 = new Uint8ClampedArray(buf)
    const data = new Uint32Array(buf)

    const shadowsValue = this.modalBrightness.controls[0].value
    const shadowsPeak = 0
    const shadowsOffset = (highestPixel - lowestPixel) / 5 / highestPixel

    const darksValue = this.modalBrightness.controls[1].value
    const darksPeak = 0.25
    const darksOffset = (highestPixel - lowestPixel) / 5 / highestPixel

    const midsValue = this.modalBrightness.controls[2].value
    const midsPeak = 0.5
    const midsOffset = (highestPixel - lowestPixel) / 5 / highestPixel

    const brightsValue = this.modalBrightness.controls[3].value
    const brightsPeak = 0.75
    const brightsOffset = (highestPixel - lowestPixel) / 5 / highestPixel

    const highlightsValue = this.modalBrightness.controls[4].value
    const highlightsPeak = 1
    const highlightsOffset = (highestPixel - lowestPixel) / 5 / highestPixel

    const divisor = 1 / 3 / highestPixel

    let r, g, b, average
    let shadowsToAdd, darksToAdd, midsToAdd, brightsToAdd, highlightsToAdd

    for (let i = 0, j = 0; i < length; i += 4, j++) {
      r = tempdata[i]
      g = tempdata[i + 1]
      b = tempdata[i + 2]

      average = (r + g + b) * divisor

      shadowsToAdd = this.calculateStrength(average, shadowsPeak, shadowsOffset) * shadowsValue
      darksToAdd = this.calculateStrength(average, darksPeak, darksOffset) * darksValue
      midsToAdd = this.calculateStrength(average, midsPeak, midsOffset) * midsValue
      brightsToAdd = this.calculateStrength(average, brightsPeak, brightsOffset) * brightsValue
      highlightsToAdd = this.calculateStrength(average, highlightsPeak, highlightsOffset) * highlightsValue

      const finalSum = shadowsToAdd + darksToAdd + midsToAdd + brightsToAdd + highlightsToAdd
      r += finalSum
      g += finalSum
      b += finalSum

      r = util.clamp(r, 0, 255)
      g = util.clamp(g, 0, 255)
      b = util.clamp(b, 0, 255)

      data[j] =
        (255 << 24) | // alpha
        (b << 16) | // blue
        (g << 8) | // green
        r // red
    }
    imageData.data.set(buf8)
    context.putImageData(imageData, 0, 0)
  }
}

export default histogram
